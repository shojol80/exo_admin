(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4af27f88"],{"090e":function(t,e,n){},"41ce":function(t,e,n){"use strict";n("a251")},"5de3":function(t,e,n){"use strict";n("910c")},6101:function(t,e,n){},6513:function(t,e,n){"use strict";n("e59c")},"7a88":function(t,e,n){"use strict";n("090e")},"853a":function(t,e,n){"use strict";n("6101")},"88a5":function(t,e,n){},"89ac":function(t,e,n){"use strict";n("88a5")},"8e16":function(t,e,n){},"910c":function(t,e,n){},a251:function(t,e,n){},a983:function(t,e,n){},b3a8:function(t,e,n){"use strict";e["a"]={computed:{fqt:function(){return this.$store.getters["ECO/fqtArray"].filter((function(t){return!(t.builder&&t.builder.hidden)}))}},methods:{getGhostParent:function(){return document.body}}}},b79d:function(t,e,n){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"fe-form-group form-group"},[t._t("default")],2)},r=[],o={name:"feFormGroup"},a=o,s=(n("89ac"),n("2877")),c=Object(s["a"])(a,i,r,!1,null,null,null);e["a"]=c.exports},bbbb:function(t,e,n){"use strict";var i=function(){var t=this,e=t._self._c;return e("waiter",{ref:"waiter"},[e("action-toolbar",[e("action-group",[t._t("actionBefore"),e("action-button",{attrs:{title:"Save",icon:t.$icons.save,shortkey:"['ctrl', 's']"},on:{action:t.submit}}),e("action-button",{attrs:{title:"Reload",disabled:!t.react_id,icon:t.$icons.reload},on:{action:t.load}}),e("action-group-separator"),t.isDeveloper?e("action-button",{attrs:{title:"Show all fields",icon:t.$icons.visible,active:t.showAllFields},on:{action:function(e){t.showAllFields=!t.showAllFields}}}):t._e(),e("action-button",{directives:[{name:"show",rawName:"v-show",value:t.isDeveloper,expression:"isDeveloper"}],attrs:{title:"Edit form",icon:t.$icons.form},on:{action:t.setupForm}}),e("action-set-edition"),e("action-group-separator"),t.isMailable?e("action-send-mailable",{attrs:{react_id:t.react_id}}):t._e(),e("action-edit-layout",{attrs:{react_id:t.react_id}}),e("open-link",{attrs:{title:"Open permalink - ".concat(t.react_primary_permalink),disabled:!t.react_primary_permalink,react_id:this.react_id,container:this.isMailable?this.container:null}}),t._t("actionAfter")],2)],1),e("div",{staticClass:"mt-3 mb-3"},[e("ValidationObserver",{ref:"form",scopedSlots:t._u([{key:"default",fn:function(t){t.invalid;return[e("form",[e("fields-list",{attrs:{fq_parent_id:null}})],1)]}}])})],1)],1)},r=[],o=(n("96cf"),n("3b8d")),a=function(){var t=this,e=t._self._c;return e("action-button",{attrs:{disabled:!t.react_id,title:"Setup layout",icon:t.$icons.layout},on:{action:t.action}})},s=[],c=n("7c8b"),u=n("1b58"),l=n("ffc9"),d={name:"ActionEditLayout",components:{},props:{react_id:{}},computed:{},methods:{action:function(){this.$router.push({name:c["y"],params:{layout:Object(u["a"])({holderId:this.react_id,holderType:l["b"]})}})}}},f=d,m=(n("853a"),n("2877")),h=Object(m["a"])(f,a,s,!1,null,"6e742fbe",null),p=h.exports,b=function(){var t=this,e=t._self._c;return e("action-button",{attrs:{disabled:!t.react_id,title:"Send mail",icon:t.$icons.send_bulk},on:{action:t.send}})},_=[],v=function(){var t=this,e=t._self._c;return e("dialog-aside",t._b({ref:"modal",attrs:{"hide-action-toolbar":!0},on:{hide:t.onModalHide,hidden:t.onModalHidden}},"dialog-aside",t.$dialogsProps,!1),[e("send-mailable",{attrs:{react_id:t.react_id},scopedSlots:t._u([{key:"before_actions",fn:function(){return[e("action-button",{attrs:{icon:t.$icons.back},on:{action:function(e){return e.preventDefault(),t.back.apply(null,arguments)}}})]},proxy:!0}])})],1)},g=[],k=n("8965"),F=n("001c"),y={name:"SendMailableAside",mixins:[F["a"]],components:{SendMailable:k["a"]},props:{react_id:{required:!0}}},$=y,w=(n("41ce"),Object(m["a"])($,v,g,!1,null,"700fa840",null)),q=w.exports,x={name:"ActionSendMailable",components:{},props:{react_id:{}},computed:{},methods:{send:function(){this.$dialogs.show(q,{react_id:this.react_id})}}},C=x,A=(n("6513"),Object(m["a"])(C,b,_,!1,null,"99e5c00a",null)),O=A.exports,S=function(){var t=this,e=t._self._c;return e("select-edition",{staticClass:"action-set-edition",attrs:{"value-format":"id",multiple:!1,value:t.edition_id,required:!0,clearable:!1},on:{select:t.setEdition}})},E=[],R={name:"ActionSetEdition",computed:{edition_id:function(){return this.$store.getters["reactForm/react_edition_id"]}},methods:{setEdition:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e){t.next=1;break}return t.abrupt("return");case 1:this.$store.commit("reactForm/setRelationEditionId",e["e_id"]);case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},j=R,M=(n("e432"),Object(m["a"])(j,S,E,!1,null,"fb7a74be",null)),D=M.exports,L=n("b79d"),B=n("1475"),P=n("62a6"),I=n("c017"),T=n("e395"),V={name:"ReactForm",mixins:[B["a"]],components:{FieldsList:T["a"],ListFields:I["a"],ActionSetEdition:D,feFormGroup:L["a"],ActionSendMailable:O,ActionEditLayout:p,OpenLink:P["a"]},props:{react_id:{required:!1},form_id:{required:!1},container:{required:!1},react_edition_id:{required:!1}},computed:{showAllFields:{get:function(){return this.$store.state.reactForm.showAllFields},set:function(t){this.$store.commit("reactForm/setShowAllFields",t)}},formconf:function(){return this.$store.getters["reactForm/formconf"]},form:function(){return this.$store.getters["forms/getForm"](this.formconf.form_id)||{}},isMailable:function(){return!!this.formconf.form_id&&this.$store.getters["forms/isMailable"](this.formconf.form_id)},react_primary_permalink:function(){return this.$store.getters["reactForm/react_primary_permalink"]}},watch:{react_id:function(){this._inactive||this.load()},form_id:function(){this._inactive||this.load()},$route:function(){this.updateBreadcrumb()},"formconf.react_id":function(){this.updateBreadcrumb()}},mounted:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.showAllFields=this.isDeveloper,this.$store.commit("reactForm/setForm"),t.next=1,this.load();case 1:this.updateBreadcrumb();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{load:function(){this.$refs.waiter.wait(this.$store.dispatch("reactForm/loadReactForm",{form_id:this.form_id,react_id:this.react_id,container:this.container,react_edition_id:this.react_edition_id}))},submit:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=1,this.$refs.form.validate();case 1:if(e=t.sent,e){t.next=2;break}return this.scrollToError(),t.abrupt("return");case 2:return t.next=3,this.$refs.waiter.wait(this.$store.dispatch("reactForm/submitReactForm").then((function(t){t&&n.$store.getters["reactForm/react_id"]&&n.$emit("save",n.$store.getters["reactForm/react_id"])})));case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),scrollToError:function(){try{var t=this.$refs.form.ctx.errors;for(var e in t)if(t[e].length>0)return void this.$refs.form.refs[e].$el.scrollIntoView(!1)}catch(n){this.$awn.alert("Form has errors.")}},setupForm:function(){var t={};this.container&&(t.container=this.container),this.$router.push({name:c["s"],params:{form_id:this.formconf.form_id,group_id:0},query:t})},updateBreadcrumb:function(){this.$store.dispatch("breadcrumb/updateLast",{label:"EDIT REACT: ".concat(this.react_id," / FORM: ").concat(this.form.form_name," (").concat(this.form.form_id,")")})}}},G=V,H=(n("5de3"),Object(m["a"])(G,i,r,!1,null,"66f9b481",null)),J=H.exports;e["a"]=J},c017:function(t,e,n){"use strict";var i=function(){var t=this,e=t._self._c;return e("list-base",{attrs:{title:"Available field types",items:t.fqt,"key-name":"fqt_name"},scopedSlots:t._u([{key:"default",fn:function(n){var i=n.item;return[e("icon",{staticClass:"mr-1",attrs:{icon:i.icon}}),t._v(t._s(i.fqt_displayname)+"\n    ")]}}])})},r=[],o=n("d290"),a=n("b3a8"),s={name:"ListFields",mixins:[a["a"]],components:{ListBase:o["a"]}},c=s,u=n("2877"),l=Object(u["a"])(c,i,r,!1,null,null,null);e["a"]=l.exports},d290:function(t,e,n){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"list-base"},[e("h3",{staticClass:"list-base-legend"},[t._v("\n        "+t._s(t.title)+"\n    ")]),e("b-list-group",[e("Container",{attrs:{"group-name":"1",behaviour:"copy","get-child-payload":t.getChildPayload,"get-ghost-parent":t.getGhostParent,"remove-on-drop-out":!1}},t._l(t.items,(function(n){return e("Draggable",{key:n[t.keyName]},[e("b-list-group-item",{staticClass:"list-base-item draggable-item",attrs:{button:""}},[t._t("default",null,{item:n})],2)],1)})),1)],1)],1)},r=[],o=n("b3a8"),a=n("3f7d"),s={name:"ListBase",mixins:[o["a"]],components:{Container:a["Container"],Draggable:a["Draggable"]},props:{items:{type:Array,required:!0},keyName:{type:String,required:!0},title:{type:String,default:""}},methods:{getChildPayload:function(t){return this.items[t]}}},c=s,u=(n("7a88"),n("2877")),l=Object(u["a"])(c,i,r,!1,null,"0a374a4d",null);e["a"]=l.exports},e2ee:function(t,e,n){"use strict";n("a983")},e395:function(t,e,n){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"field-list"},[t._l(t.fields,(function(n,i){return[e("fe-form-group",{key:i},[e(n.component,{tag:"component",attrs:{fq:n},on:{change:t.changeValue}})],1)]}))],2)},r=[],o=n("b79d"),a=n("2ef0"),s=n.n(a),c={name:"FieldsList",components:{feFormGroup:o["a"],feInput:function(){return n.e("chunk-96a1957c").then(n.bind(null,"ec7a"))},feCheckbox:function(){return n.e("chunk-0c3e4ec8").then(n.bind(null,"0314"))},feSelect:function(){return n.e("chunk-e762a8d0").then(n.bind(null,"5b55"))},feTextarea:function(){return n.e("chunk-4cfa292e").then(n.bind(null,"9f51"))},feDate:function(){return n.e("chunk-03d8d614").then(n.bind(null,"ed50"))},feRadio:function(){return n.e("chunk-ff071cfa").then(n.bind(null,"557a"))},feFile:function(){return n.e("chunk-594aa463").then(n.bind(null,"f98b"))},feHidden:function(){return n.e("chunk-00809c8a").then(n.bind(null,"e015"))},feHtml:function(){return n.e("chunk-6ba74b6c").then(n.bind(null,"1d32"))},fePlainText:function(){return n.e("chunk-30e587fe").then(n.bind(null,"d0d8"))},fePicture:function(){return n.e("chunk-74b14ca0").then(n.bind(null,"6704"))},feContainer:function(){return n.e("chunk-46263aa6").then(n.bind(null,"83d3"))},feView:function(){return n.e("chunk-09423014").then(n.bind(null,"b9e6"))},feUnit:function(){return n.e("chunk-11b45810").then(n.bind(null,"2f80"))},feMailable:function(){return n.e("chunk-63ab44c4").then(n.bind(null,"6843"))},feSection:function(){return n.e("chunk-df1fe952").then(n.bind(null,"f148"))},fePermalink:function(){return n.e("chunk-08ea46e8").then(n.bind(null,"38f6"))},feJson:function(){return Promise.all([n.e("vendors"),n.e("chunk-464877ba")]).then(n.bind(null,"9f23"))}},props:{fq_parent_id:{}},computed:{fqt:function(){return this.$store.getters["ECO/fqtArray"]},fields:function(){var t=this;return this.$store.getters["reactForm/fields"].filter((function(e){if(e.fq_parent_id!==t.fq_parent_id)return!1;var n=t.$store.getters["ECO/getFqtById"](e.fqt_id);return(!n["front"]||!n["front"]["reactForm"]||!0!==n["front"]["reactForm"]["hidden"])&&(1===e.isvisible||t.$store.state.reactForm.showAllFields)})).map((function(e){return e.component=t.getComponent(e.fqt_id),e}))}},methods:{getComponent:function(t){var e=this.$store.getters["ECO/getFqtById"](t);return s.a.get(e,"front.reactForm.component","feInput")},changeValue:function(t){var e=t.fq_id,n=t.value;this.$store.commit("reactForm/setQuestionValue",{fq_id:e,value:n})}}},u=c,l=(n("e2ee"),n("2877")),d=Object(l["a"])(u,i,r,!1,null,null,null);e["a"]=d.exports},e432:function(t,e,n){"use strict";n("8e16")},e59c:function(t,e,n){}}]);
//# sourceMappingURL=chunk-4af27f88.1bdc8029.js.map