{"version":3,"sources":["webpack:///./src/views/pages/Site.vue","webpack:///src/views/pages/Site.vue","webpack:///./src/views/pages/Site.vue?c441","webpack:///./src/views/pages/Site.vue?d6ce","webpack:///./src/components/DomainName.vue","webpack:///src/components/DomainName.vue","webpack:///./src/components/DomainName.vue?6fb9","webpack:///./src/components/DomainName.vue?ca65","webpack:///./src/components/LinkDomainModal.vue?4c67","webpack:///./src/mixins/showDeprecated.js","webpack:///./src/views/pages/Site.vue?ae66","webpack:///./src/components/statefull/EntityDomainList.vue?72a9","webpack:///./src/components/statefull/EntityDomainList.vue","webpack:///./src/components/LinkDomainModal.vue","webpack:///src/components/LinkDomainModal.vue","webpack:///./src/components/LinkDomainModal.vue?51ed","webpack:///./src/components/LinkDomainModal.vue?8ba9","webpack:///src/components/statefull/EntityDomainList.vue","webpack:///./src/components/statefull/EntityDomainList.vue?8770","webpack:///./src/components/statefull/EntityDomainList.vue?336d"],"names":["render","_vm","this","_c","_self","ref","scopedSlots","_u","key","fn","_ref","invalid","staticClass","attrs","_ref2","valid","errors","model","value","site","site_name","callback","$$v","$set","expression","$icons","save","on","reload","load","slot","properties","_v","site_id","site_alias","variables","proxy","staticRenderFns","name","mixins","showDeprecated","components","EntityDomainList","data","vars","computed","mounted","methods","_this","$refs","waiter","wait","getCurrentSite","then","loadNested","Promise","all","_this2","observer","validate","isValid","component","class","domain","is_readonly","domain_name","_s","domain_ismain","_e","domain_isdefault","props","Object","$store","getters","_l","domains","domain_id","pin","$event","onActionDefault","unlink","onActionUnlink","link","onActionLink","availableDomains","allDomains","title","onCancel","onSave","isOpen","activeTab","selectedDomain","ruleObject","subdomainValue","parentDomains","subdomainParent","error","index","message","modalProps","default","open","Array","required","regex","watch","newVal","show","resolve","modal","e","preventDefault","validateSubdomain","subdomain","length","setErrors","genID","LinkDomainModal","DomainName","prop","event","type","state","pages","filter","startsWith","some","item","_onActionLink","_asyncToGenerator","regeneratorRuntime","mark","_callee","wrap","_context","prev","next","sent","abrupt","_objectSpread","$emit","concat","_toConsumableArray","stop","apply","arguments","d","map"],"mappings":"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","file":"js/chunk-1cdd4cfe.5bf164f9.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('waiter',{ref:\"waiter\"},[_c('ValidationObserver',{ref:\"observer\",scopedSlots:_vm._u([{key:\"default\",fn:function({ invalid }){return [_c('action-toolbar',[_c('action-group',{staticClass:\"mr-2\"},[_c('action-back'),_c('action-group-separator'),_c('ValidationProvider',{attrs:{\"rules\":\"required\",\"name\":\"title\",\"slim\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function({ valid, errors }){return _c('action-input',{ref:\"name\",attrs:{\"valid\":valid,\"errors\":errors,\"readonly\":\"\"},model:{value:(_vm.site.site_name),callback:function ($$v) {_vm.$set(_vm.site, \"site_name\", $$v)},expression:\"site.site_name\"}})}}],null,true)}),_c('action-button',{attrs:{\"title\":\"Save\",\"icon\":_vm.$icons.save,\"shortkey\":\"['ctrl', 's']\",\"disabled\":invalid},on:{\"action\":_vm.save}}),_c('action-button',{attrs:{\"title\":\"Reload\",\"icon\":_vm.$icons.reload},on:{\"action\":_vm.load}})],1)],1),_c('b-tabs',{staticClass:\"x-tabs\"},[_c('b-tab',{attrs:{\"active\":\"\"}},[_c('template',{slot:\"title\"},[_c('icon',{attrs:{\"icon\":_vm.$icons.properties}}),_vm._v(\"\\n                    Properties\\n                \")],1),_c('x-form-input',{attrs:{\"title\":\"Site ID\",\"db-field\":\"site_id\",\"readonly\":\"\"},model:{value:(_vm.site.site_id),callback:function ($$v) {_vm.$set(_vm.site, \"site_id\", $$v)},expression:\"site.site_id\"}}),_c('x-form-input',{attrs:{\"title\":\"Alias\",\"db-field\":\"site_alias\",\"readonly\":\"\"},model:{value:(_vm.site.site_alias),callback:function ($$v) {_vm.$set(_vm.site, \"site_alias\", $$v)},expression:\"site.site_alias\"}})],2),_c('b-tab',{scopedSlots:_vm._u([{key:\"title\",fn:function(){return [_c('icon',{attrs:{\"icon\":_vm.$icons.variables}}),_vm._v(\"\\n                    Variables\\n                \")]},proxy:true}],null,true)},[_c('x-vars-editor',{ref:\"vars\",attrs:{\"var_parent\":_vm.site.site_id,\"var_type\":\"site\"}})],1)],1)]}}])})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <waiter ref=\"waiter\">\n        <ValidationObserver ref=\"observer\" v-slot=\"{ invalid }\">\n            <action-toolbar>\n                <action-group class=\"mr-2\">\n                    <action-back></action-back>\n                    <action-group-separator></action-group-separator>\n                    <ValidationProvider rules=\"required\" name=\"title\" slim>\n                        <action-input\n                            ref=\"name\"\n                            slot-scope=\"{ valid, errors }\"\n                            :valid=\"valid\"\n                            :errors=\"errors\"\n                            readonly\n                            v-model=\"site.site_name\"></action-input>\n                    </ValidationProvider>\n                    <action-button title=\"Save\" :icon=\"$icons.save\" @action=\"save\"\n                                   shortkey=\"['ctrl', 's']\"\n                                   :disabled=\"invalid\">\n                    </action-button>\n                    <action-button title=\"Reload\" :icon=\"$icons.reload\"\n                                   @action=\"load\"\n                    >\n                    </action-button>\n                </action-group>\n            </action-toolbar>\n            <b-tabs class=\"x-tabs\">\n                <b-tab active>\n                    <template slot=\"title\">\n                        <icon :icon=\"$icons.properties\"></icon>\n                        Properties\n                    </template>\n\n                    <x-form-input\n                        title=\"Site ID\"\n                        v-model=\"site.site_id\"\n                        db-field=\"site_id\"\n                        readonly>\n                    </x-form-input>\n                    <x-form-input\n                        title=\"Alias\"\n                        v-model=\"site.site_alias\"\n                        db-field=\"site_alias\"\n                        readonly>\n                    </x-form-input>\n                </b-tab>\n                <b-tab>\n                    <template #title>\n                        <icon :icon=\"$icons.variables\"></icon>\n                        Variables\n                    </template>\n                    <x-vars-editor ref=\"vars\" :var_parent=\"site.site_id\" var_type=\"site\"></x-vars-editor>\n                </b-tab>\n            </b-tabs>\n        </ValidationObserver>\n    </waiter>\n</template>\n\n<script>\nimport EntityDomainList from \"@/components/statefull/EntityDomainList.vue\"\nimport showDeprecated from '@/mixins/showDeprecated'\nimport site from '@/services/api/site'\n\nexport default {\n    name: 'Site',\n    mixins: [showDeprecated],\n    components: {\n        EntityDomainList,\n    },\n    data() {\n        return {\n            site: {\n                vars: []\n            },\n        }\n    },\n    computed: {},\n    mounted() {\n        this.load()\n    },\n    methods: {\n        load() {\n            this.$refs.waiter.wait(\n                site.getCurrentSite().then(data => this.site = data).then(this.loadNested)\n            )\n        },\n        loadNested() {\n            return Promise.all([\n                this.$refs.vars.load(),\n            ])\n        },\n        save() {\n            this.$refs.observer.validate().then(isValid => {\n                if (!isValid) return\n                this.$refs.waiter.wait(\n                    this.$refs.vars.save()\n                )\n            });\n        },\n    }\n}\n</script>\n\n<style scoped lang=\"scss\">\n@import \"src/assets/scss/vue-component\";\n\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Site.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Site.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Site.vue?vue&type=template&id=f92315fc&scoped=true\"\nimport script from \"./Site.vue?vue&type=script&lang=js\"\nexport * from \"./Site.vue?vue&type=script&lang=js\"\nimport style0 from \"./Site.vue?vue&type=style&index=0&id=f92315fc&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f92315fc\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('a',{staticClass:\"mr-2\",class:{ 'text-muted': _vm.domain.is_readonly==1 },attrs:{\"href\":'https://'+_vm.domain.domain_name,\"target\":\"_blank\"}},[_vm._v(_vm._s(_vm.domain.domain_name))]),(_vm.domain.domain_ismain===1)?_c('span',{staticClass:\"badge badge-danger mr-2\"},[_vm._v(\"main\")]):_vm._e(),(_vm.domain.domain_isdefault===1)?_c('span',{staticClass:\"badge badge-secondary\"},[_vm._v(\"default\")]):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div>\n        <a :class=\"{ 'text-muted': domain.is_readonly==1 }\" :href=\"'https://'+domain.domain_name\" target=\"_blank\"\n           class=\"mr-2\">{{domain.domain_name}}</a>\n        <span v-if=\"domain.domain_ismain===1\" class=\"badge badge-danger mr-2\">main</span>\n        <span v-if=\"domain.domain_isdefault===1\" class=\"badge badge-secondary\">default</span>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: \"DomainName\",\n    props: {\n        domain: Object\n    }\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DomainName.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DomainName.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./DomainName.vue?vue&type=template&id=33a57b06\"\nimport script from \"./DomainName.vue?vue&type=script&lang=js\"\nexport * from \"./DomainName.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LinkDomainModal.vue?vue&type=style&index=0&id=13959cda&prod&lang=scss\"","export default {\n    computed: {\n        showDeprecated() {\n            return this.$store.getters['site/getSiteVarValue']('show_deprecated_feature')\n        }\n    },\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Site.vue?vue&type=style&index=0&id=f92315fc&prod&scoped=true&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EntityDomainList.vue?vue&type=style&index=0&id=b58300b4&prod&scoped=true&lang=scss\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"domain-list\"},[_c('b-list-group',_vm._l((_vm.domains),function(domain){return _c('b-list-group-item',{key:domain.domain_id,staticClass:\"d-flex justify-content-between align-items-center\"},[_c('domain-name',{attrs:{\"domain\":domain}}),_c('action-group',{staticClass:\"domain-list__actions\"},[(+domain.domain_isdefault!==1)?_c('action-button',{attrs:{\"title\":\"Set domain default\",\"icon\":_vm.$icons.pin},on:{\"action\":function($event){return _vm.onActionDefault(domain)}}}):_vm._e(),(+domain.is_readonly!==1)?_c('action-button',{attrs:{\"title\":\"Unlink domain\",\"icon\":_vm.$icons.unlink},on:{\"action\":function($event){return _vm.onActionUnlink(domain)}}}):_vm._e()],1)],1)}),1),_c('action-group',{staticClass:\"mt-1\"},[_c('action-button',{attrs:{\"title\":\"Link domain\",\"icon\":_vm.$icons.link},on:{\"action\":function($event){return _vm.onActionLink()}}})],1),_c('link-domain-modal',{ref:\"modal\",attrs:{\"domains\":_vm.availableDomains,\"parent-domains\":_vm.allDomains}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('b-modal',{ref:\"modal\",attrs:{\"modal-class\":\"modal-primary modal-min-btn link-domain-modal\",\"title\":_vm.title,\"hide-header-close\":\"\",\"centered\":\"\",\"cancel-title\":\"CANCEL\",\"cancel-variant\":\"light\",\"ok-title\":\"OK\",\"ok-variant\":\"primary\"},on:{\"cancel\":_vm.onCancel,\"ok\":_vm.onSave},model:{value:(_vm.isOpen),callback:function ($$v) {_vm.isOpen=$$v},expression:\"isOpen\"}},[_c('waiter',{ref:\"waiter\"},[_c('div',[_c('b-tabs',{attrs:{\"fill\":\"\"},model:{value:(_vm.activeTab),callback:function ($$v) {_vm.activeTab=$$v},expression:\"activeTab\"}},[_c('b-tab',{attrs:{\"title\":\"Select domain\",\"active\":\"\"}},[_c('p'),_c('x-select',{attrs:{\"clearable\":false,\"multiple\":false,\"options\":_vm.domains,\"valueFormat\":\"object\",\"id-key\":\"domain_id\",\"label-key\":\"domain_name\"},model:{value:(_vm.selectedDomain),callback:function ($$v) {_vm.selectedDomain=$$v},expression:\"selectedDomain\"}})],1),_c('b-tab',{attrs:{\"title\":\"Add new subdomain\"}},[_c('ValidationObserver',{ref:\"observer\",scopedSlots:_vm._u([{key:\"default\",fn:function({ invalid, errors }){return [_c('p'),_c('div',{staticClass:\"link-domain-modal__subdomain\"},[_c('div',[_c('ValidationProvider',{attrs:{\"rules\":_vm.ruleObject,\"name\":\"subdomain\",\"debounce\":200},scopedSlots:_vm._u([{key:\"default\",fn:function({ valid, errors }){return [_c('b-input',{staticClass:\"link-domain-modal__subdomain-value\",attrs:{\"state\":errors[0] ? false : null},model:{value:(_vm.subdomainValue),callback:function ($$v) {_vm.subdomainValue=$$v},expression:\"subdomainValue\"}})]}}],null,true)})],1),_c('span',{staticClass:\"px-1\"},[_vm._v(\".\")]),_c('x-select',{attrs:{\"clearable\":false,\"multiple\":false,\"options\":_vm.parentDomains,\"valueFormat\":\"object\",\"id-key\":\"domain_id\",\"label-key\":\"domain_name\"},model:{value:(_vm.subdomainParent),callback:function ($$v) {_vm.subdomainParent=$$v},expression:\"subdomainParent\"}})],1),_c('div',{staticClass:\"mt-2\"},_vm._l((errors),function(error,index){return _c('p',{key:index,staticClass:\"text-danger\"},[_vm._l((error),function(message,index){return [_c('span',{key:index},[_vm._v(\"\\n                                    \"+_vm._s(message)+\"\\n                                \")]),_c('br')]})],2)}),0)]}}])})],1)],1)],1)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <b-modal modal-class=\"modal-primary modal-min-btn link-domain-modal\"\n             v-model=\"isOpen\"\n             :title=\"title\"\n             hide-header-close\n             centered\n             cancel-title=\"CANCEL\"\n             @cancel=\"onCancel\"\n             cancel-variant=\"light\"\n             @ok=\"onSave\"\n             ok-title=\"OK\"\n             ok-variant=\"primary\"\n             ref=\"modal\">\n        <waiter ref=\"waiter\">\n            <div>\n                <b-tabs fill v-model=\"activeTab\">\n                    <b-tab title=\"Select domain\" active>\n                        <p></p>\n                        <x-select v-model=\"selectedDomain\"\n                                  :clearable=\"false\"\n                                  :multiple=\"false\"\n                                  :options=\"domains\"\n                                  valueFormat=\"object\"\n                                  id-key=\"domain_id\"\n                                  label-key=\"domain_name\"/>\n                    </b-tab>\n                    <b-tab title=\"Add new subdomain\">\n                        <ValidationObserver ref=\"observer\" v-slot=\"{ invalid, errors }\">\n                            <p></p>\n                            <div class=\"link-domain-modal__subdomain\">\n                                <div>\n                                    <ValidationProvider :rules=\"ruleObject\"\n                                                        name=\"subdomain\"\n                                                        :debounce=\"200\"\n                                                        v-slot=\"{ valid, errors }\">\n                                        <b-input v-model=\"subdomainValue\"\n                                                 class=\"link-domain-modal__subdomain-value\"\n                                                 :state=\"errors[0] ? false : null\"\n                                        />\n                                    </ValidationProvider>\n                                </div>\n                                <span class=\"px-1\">.</span>\n                                <x-select v-model=\"subdomainParent\"\n                                          :clearable=\"false\"\n                                          :multiple=\"false\"\n                                          :options=\"parentDomains\"\n                                          valueFormat=\"object\"\n                                          id-key=\"domain_id\"\n                                          label-key=\"domain_name\"/>\n                            </div>\n                            <div class=\"mt-2\">\n                                <p v-for=\"(error,index) in errors\" :key=\"index\" class=\"text-danger\">\n                                    <template v-for=\"(message,index) in error\">\n                                        <span :key=\"index\">\n                                        {{message}}\n                                    </span><br>\n                                    </template>\n                                </p>\n                            </div>\n                        </ValidationObserver>\n                    </b-tab>\n                </b-tabs>\n            </div>\n        </waiter>\n    </b-modal>\n</template>\n\n<script>\n\nimport domains from '@/services/api/domains'\n\nexport default {\n    name: \"LinkDomainModal\",\n    props: {\n        modalProps: {},\n        title: {default: 'Domains'},\n        open: false,\n        domains: Array,\n        parentDomains: Array\n    },\n    data() {\n        return {\n            ruleObject: {\n                required: true,\n                regex: /^[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?$/,\n            },\n            selectedDomain: null,\n            subdomainValue: null,\n            subdomainParent: null,\n            isOpen: false,\n            activeTab: 0\n        }\n    },\n    computed: {},\n    watch: {\n        open(newVal) {\n            if (newVal) {\n                this.isOpen = true;\n            }\n        },\n        parentDomains(newVal) {\n            this.subdomainParent = newVal[0]\n        },\n        domains(newVal) {\n            this.selectedDomain = newVal[0]\n        }\n    },\n    methods: {\n        show() {\n            this.subdomainValue = ''\n            return new Promise((resolve) => {\n                this.resolve = resolve;\n                if (this.default) {\n                    this.value = this.default\n                } else {\n                    this.value = null\n                }\n                this.$refs.modal.show();\n            })\n        },\n        onCancel(e) {\n            this.resolve(false)\n        },\n        onSave(e) {\n            if (this.resolve) {\n\n                if (this.activeTab === 1) {\n                    e.preventDefault()\n                    this.$refs.waiter.wait(\n                        this.$refs.observer.validate()\n                            .then(isValid => {\n\n                                if (!isValid) {\n                                    return\n                                }\n                                return domains.validateSubdomain({subdomain: this.subdomainValue + '.' + this.subdomainParent.domain_name})\n                            })\n                            .then(data => {\n                                if (data.length) {\n                                    this.$refs.observer.setErrors({\n                                        subdomain: data\n                                    });\n                                } else {\n                                    let value = {\n                                        subdomainValue: this.subdomainValue,\n                                        subdomainParent: this.subdomainParent\n                                    }\n\n                                    this.isOpen = false;\n                                    this.resolve(value)\n                                }\n                            })\n                    )\n                } else {\n                    this.resolve(this.selectedDomain)\n                }\n\n            }\n        }\n    }\n}\n</script>\n\n<style lang=\"scss\">\n.link-domain-modal {\n\n    .tab-content {\n        min-height: 200px;\n    }\n\n    &__subdomain {\n        display: flex;\n        align-items: flex-end;\n\n        .x-select {\n            flex: 1 0 auto;\n        }\n    }\n\n    &__subdomain-value {\n        width: 140px\n    }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LinkDomainModal.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LinkDomainModal.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./LinkDomainModal.vue?vue&type=template&id=13959cda\"\nimport script from \"./LinkDomainModal.vue?vue&type=script&lang=js\"\nexport * from \"./LinkDomainModal.vue?vue&type=script&lang=js\"\nimport style0 from \"./LinkDomainModal.vue?vue&type=style&index=0&id=13959cda&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n    <div class=\"domain-list\">\n        <b-list-group>\n            <b-list-group-item v-for=\"domain in domains\" :key=\"domain.domain_id\"\n                               class=\"d-flex justify-content-between align-items-center\">\n                <domain-name :domain=\"domain\">\n                </domain-name>\n                <action-group class=\"domain-list__actions\">\n                    <action-button\n                        v-if=\"+domain.domain_isdefault!==1\"\n                        @action=\"onActionDefault(domain)\"\n                        title=\"Set domain default\"\n                        :icon=\"$icons.pin\">\n                    </action-button>\n                    <action-button\n                        v-if=\"+domain.is_readonly!==1\"\n                        @action=\"onActionUnlink(domain)\"\n                        title=\"Unlink domain\"\n                        :icon=\"$icons.unlink\">\n                    </action-button>\n                </action-group>\n            </b-list-group-item>\n        </b-list-group>\n        <action-group class=\"mt-1\">\n            <action-button @action=\"onActionLink()\"\n                           title=\"Link domain\"\n                           :icon=\"$icons.link\">\n            </action-button>\n        </action-group>\n        <link-domain-modal ref=\"modal\" :domains=\"availableDomains\" :parent-domains=\"allDomains\"></link-domain-modal>\n    </div>\n</template>\n\n<script>\nimport LinkDomainModal from '@/components/LinkDomainModal'\nimport DomainName from '@/components/DomainName'\nimport genID from '@modules/mixins/genID'\nimport domains from '@/services/api/domains'\n\nexport default {\n    name: 'EntityDomainList',\n    mixins: [genID],\n    components: {\n        LinkDomainModal,\n        DomainName\n    },\n    model: {\n        prop: 'domains',\n        event: 'change'\n    },\n    props: {\n        domains: {\n            type: Array,\n            required: true,\n        }\n    },\n    data() {\n        return {\n            //allDomains: [],\n        }\n    },\n    computed: {\n        allDomains() {\n            return this.$store.state.pages.domains\n        },\n        availableDomains() {\n            return this.allDomains.filter(domain => {\n                if (domain.domain_name.startsWith('webmail') /*|| domain.domain_isssl === 0*/) return false\n                return !this.domains.some(item => item.domain_id === domain.domain_id)\n            })\n        },\n    },\n    methods: {\n        async onActionLink() {\n            const value = await this.$refs.modal.show()\n            if (!value) return false\n\n            let domain = {...value}\n\n            if (domain.subdomainValue) {\n                domain = {\n                    domain_id: -this.genID(),\n                    domain_name: value.subdomainValue + '.' + value.subdomainParent.domain_name\n                }\n            }\n            domain.domain_isdefault = this.domains.length === 0 ? 1 : 0\n            this.$emit('change', [...this.domains, domain])\n        },\n\n        onActionUnlink(domain) {\n            const domains = this.domains.filter(d => d.domain_id !== domain.domain_id);\n            this.$emit('change', domains)\n        },\n\n        onActionDefault(domain) {\n            const domains = this.domains.map(item => {\n                item.domain_isdefault = item.domain_id === domain.domain_id ? 1 : 0\n                return item\n            })\n            this.$emit('change', domains)\n        },\n    }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.domain-list {\n    &__actions {\n        display: none;\n    }\n\n    .list-group-item {\n        max-width: 500px;\n        padding: 0.0rem 0.45rem;\n        min-height: 37px;\n\n        &:hover {\n            .domain-list__actions {\n                display: flex;\n            }\n        }\n    }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EntityDomainList.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EntityDomainList.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./EntityDomainList.vue?vue&type=template&id=b58300b4&scoped=true\"\nimport script from \"./EntityDomainList.vue?vue&type=script&lang=js\"\nexport * from \"./EntityDomainList.vue?vue&type=script&lang=js\"\nimport style0 from \"./EntityDomainList.vue?vue&type=style&index=0&id=b58300b4&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b58300b4\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}