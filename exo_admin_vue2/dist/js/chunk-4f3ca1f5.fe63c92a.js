(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f3ca1f5"],{2181:function(e,t,n){},"38e7":function(e,t,n){"use strict";n("96cf");var r=n("3b8d"),i=n("b991"),a=n("b84e"),o=n("f3b3"),c=n("8934"),s=n("6658");t["a"]={methods:{reactEdit:function(e){this.$router.push({name:i["w"],params:{react_id:e[0].react_id}})},reactBrowse:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},e.next=1,Object(c["a"])(t[0].react_id,n);case 1:if(r=e.sent,!r){e.next=2;break}return e.next=2,Object(s["a"])(r);case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),reactClone:function(e){this.$awn.alert("Not implemented!")},reactDelete:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return 1===t.length?(r='Are you sure want to delete reaction "'.concat(t[0]["react_title"],'"?'),n=t[0]):(r='Are you sure want to delete "'.concat(t.length,'" reactions?'),n={react_id:t.map((function(e){return e["react_id"]}))}),e.next=1,this.$dialogs.confirmDelete({title:"Delete reaction",message:r});case 1:if(i=e.sent,"ok"===i.trigger){e.next=2;break}return e.abrupt("return");case 2:return e.next=3,a["a"].deleteReact(n);case 3:if(!this.load){e.next=4;break}return e.next=4,this.load();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),reactNew:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=1,this.$dialogs.show(o["a"],{forms:t});case 1:if(n=e.sent,"ok"===n.trigger&&n.value){e.next=2;break}return e.abrupt("return");case 2:this.$router.push({name:i["w"],params:{react_id:"new"},query:n.value});case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}}},"5ffd":function(e,t,n){"use strict";n("6762"),n("2fdb");var r=function(){var e=this,t=e._self._c;return t("fragment",[e.actions.includes("edit")?t("x-context-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.rows&&1===e.rows.length,expression:"rows && rows.length===1"}],attrs:{icon:e.$icons.edit},on:{click:function(t){return e.$emit("edit")}}},[e._v("\n        Edit\n    ")]):e._e(),e.rows&&1===e.rows.length&&e.actions.includes("browse")&&e.rows[0].hasOwnProperty("permalink")?t("x-context-menu-item",{attrs:{icon:e.$icons.external_link},on:{click:function(t){return e.$emit("browse")}}},[e._v("\n        Browse\n    ")]):e._e(),e.actions.includes("clone")?t("x-context-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.rows&&1===e.rows.length,expression:"rows && rows.length===1"}],attrs:{icon:e.$icons.clone},on:{click:function(t){return e.$emit("clone")}}},[e._v("\n        Clone\n    ")]):e._e(),e.actions.includes("delete")?t("x-context-menu-item",{attrs:{icon:e.$icons.delete},on:{click:function(t){return e.$emit("delete")}}},[e._v("\n        Delete completely\n    ")]):e._e()],1)},i=[],a={name:"ReactContextMenu",props:{actions:{default:function(){return["edit","browse","clone","delete"]}},rows:{type:Array}}},o=a,c=n("2877"),s=Object(c["a"])(o,r,i,!1,null,"470e7b54",null);t["a"]=s.exports},"62fc":function(e,t,n){},"86e4":function(e,t,n){"use strict";n("9591")},9591:function(e,t,n){},"98f8":function(e,t,n){"use strict";n("62fc")},"99a1":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e._self._c;return t("waiter",{ref:"tableWaiter"},[t("action-table",{ref:"table",staticClass:"sitemap-table",attrs:{name:"Sitemap",columns:e.columns,options:e.options},scopedSlots:e._u([{key:"beforeFilterWrapper",fn:function(){return[t("action-group",{},[t("action-button",{attrs:{title:"Filters by columns",icon:e.$icons.filter},on:{action:function(t){return e.switchFilter()}}})],1)]},proxy:!0},{key:"actions",fn:function(n){var r=n.rows;return[t("action-group",[t("react-table-actions",{attrs:{actions:["delete","edit"],rows:r},on:{new:function(t){return e.reactNew(e.forms)},edit:function(t){return e.reactEdit(r)},delete:function(t){return e.reactDelete(r)}}}),t("action-button",{directives:[{name:"show",rawName:"v-show",value:r&&r.length>0,expression:"rows && rows.length>0"}],attrs:{title:"Set up a linked edition",icon:e.$icons.edition},on:{action:function(t){return e.updateEdition(r)}}}),t("action-group-separator"),t("action-button",{attrs:{title:"Reload",icon:e.$icons.reload},on:{action:e.load}})],1)]}},{key:"col-action",fn:function(n){var r=n.row;return[t("action-group",{on:{click:function(e){e.stopPropagation()}}},[t("action-button",{attrs:{title:"Set as homepage",icon:e.$icons.homepage},on:{action:function(t){return e.setHomepage([r])}}}),t("action-button",{attrs:{title:"Set up a linked edition",icon:e.$icons.edition},on:{action:function(t){return e.updateEdition([r])}}}),t("react-column-actions",{attrs:{actions:["edit","delete"],row:r},on:{edit:function(t){return e.reactEdit([r])},browse:function(t){return e.reactBrowse([r])},clone:function(t){return e.reactClone([r])},delete:function(t){return e.reactDelete([r])}}})],1)]}},{key:"contextmenu",fn:function(n){var r=n.rows;return[t("x-context-menu-item",{attrs:{icon:e.$icons.homepage},on:{click:function(t){return e.setHomepage(r)}}},[e._v("\n                Set as homepage\n            ")]),t("x-context-menu-item",{attrs:{icon:e.$icons.edition},on:{click:function(t){return e.updateEdition(r)}}},[e._v("\n                Set up a linked edition\n            ")]),t("react-context-menu",{attrs:{actions:["edit","delete"],rows:r},on:{edit:function(t){return e.reactEdit(r)},browse:function(t){return e.reactBrowse(r)},clone:function(t){return e.reactClone(r)},delete:function(t){return e.reactDelete(r)}}})]}},{key:"publish",fn:function(n){var r=n.row,i=n.column,a=n.update;return[1===+r.have_publish?t("x-switch",{attrs:{size:"sm",value:+r.publish},on:{change:function(t){return e.updateReact(r,t,i,a)}}}):e._e()]}},{key:"no_sitemap",fn:function(n){var r=n.row,i=n.column,a=n.update;return[1===+r.have_no_sitemap?t("x-switch",{attrs:{size:"sm",value:+r[i]},on:{change:function(t){return e.updateReact(r,t,i,a)}}}):e._e()]}},{key:"permalink",fn:function(n){var r=n.row;return[t("a",{directives:[{name:"show",rawName:"v-show",value:!!r.permalink,expression:"!!row.permalink"}],attrs:{href:r.permalink,target:"_blank"}},[e._v(e._s(r.permalink)+"\n            ")])]}}]),model:{value:e.reacts,callback:function(t){e.reacts=t},expression:"reacts"}})],1)},i=[],a=n("bd86"),o=(n("96cf"),n("3b8d")),c=n("2c67"),s={getReacts:function(e,t){return c["a"].post.apply(c["a"],["/sitemap/getReacts"].concat(Array.prototype.slice.call(arguments)))}},u=n("b84e"),l=n("d06d"),d=n("38e7"),f=n("affb"),m=n("5ffd"),p=function(){var e=this,t=e._self._c;return t("dialog-modal",e._b({ref:"modal",attrs:{"ok-disabled":!e.localValue},on:{hide:e.onModalHide,hidden:e.onModalHidden}},"dialog-modal",e.$dialogsProps,!1),[t("select-edition",{attrs:{multiple:!1,"value-format":e.valueFormat,required:!0,clearable:!1},model:{value:e.localValue,callback:function(t){e.localValue=t},expression:"localValue"}})],1)},h=[],_=n("e5a8"),w={name:"SelectEditionDialog",mixins:[_["a"]],props:{title:{default:"Editions"},valueFormat:{default:"object"},default:null},mounted:function(){this.localValue=this.default?this.default:null}},b=w,v=n("2877"),g=Object(v["a"])(b,p,h,!1,null,null,null),x=g.exports,k={name:"SitemapTable",components:{ReactContextMenu:m["a"],ReactColumnActions:f["a"],ReactTableActions:l["a"]},mixins:[d["a"]],props:{e_id:{required:!1}},data:function(){return{reacts:[],columns:["col-check","publish","no_sitemap","permalink","react_title","react_form_name","react_id","react_edition_id","col-action"],options:{editableColumns:["publish","no_sitemap"],filterByColumn:!0,listColumns:{react_form_name:[]},filterable:!1,sortable:["permalink","react_title","react_form_name","react_id","react_edition_id"],uniqueKey:"react_id",headings:{publish:"Publish",no_sitemap:"No sitemp",react_id:"ID",react_title:"Title",react_form_name:"Form",react_edition_id:"Edition"}}}},computed:{availableForms:function(){return this.$store.getters["forms/forms"].filter((function(e){return e.form_questions.some((function(e){return"no_sitemap"===e.fq_name}))})).map((function(e){return{id:e.form_name,text:e.form_name}}))}},watch:{availableForms:{immediate:!0,handler:function(){this.options.listColumns.react_form_name=this.availableForms}},e_id:function(e,t){e!==t&&this.load()}},mounted:function(){this.load()},methods:{switchFilter:function(){var e=this;this.options.filterable?(this.$refs.table.setFilter({permalink:"",react_title:"",react_form_name:"",react_id:"",react_edition_id:""}),this.$nextTick((function(t){e.options.filterable=!1}))):this.options.filterable=["permalink","react_title","react_form_name","react_id","react_edition_id"]},load:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=1,this.$refs.tableWaiter.wait(s.getReacts({e_id:this.e_id}));case 1:this.reacts=e.sent;case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),updateReact:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n,r,i){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=+n,+t[r]===n){e.next=1;break}return i(n),e.next=1,u["a"].saveReact({react:Object(a["a"])({react_id:t.react_id},r,n)});case 1:case"end":return e.stop()}}),e)})));function t(t,n,r,i){return e.apply(this,arguments)}return t}(),updateEdition:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=void 0,1===t.length&&(n=t[0].react_edition_id),e.next=1,this.$dialogs.show(x,{valueFormat:"id",default:n});case 1:if(r=e.sent,"ok"===r.trigger&&r.value){e.next=2;break}return e.abrupt("return");case 2:return e.next=3,this.$refs.tableWaiter.wait(u["a"].updateReactEdition({reacts:t,e_id:r.value}));case 3:return e.next=4,this.load();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),setHomepage:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=void 0,1!==t.length){e.next=1;break}n=t[0].react_id,e.next=2;break;case 1:return e.abrupt("return");case 2:return e.next=3,this.$refs.tableWaiter.wait(u["a"].setHomepageReact({react_id:n}));case 3:return e.next=4,this.load();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},$=k,y=(n("aaba"),Object(v["a"])($,r,i,!1,null,null,null));t["default"]=y.exports},aaba:function(e,t,n){"use strict";n("2181")},affb:function(e,t,n){"use strict";n("6762"),n("2fdb");var r=function(){var e=this,t=e._self._c;return t("fragment",[e.actions.includes("edit")?t("action-button",{attrs:{title:"Edit",icon:e.$icons.edit},on:{action:function(t){return e.$emit("edit")}}}):e._e(),e.actions.includes("browse")&&e.row.hasOwnProperty("permalink")?t("action-button",{attrs:{title:"Browse",icon:e.$icons.external_link},on:{action:function(t){return e.$emit("browse")}}}):e._e(),e.actions.includes("clone")?t("action-button",{attrs:{title:"Clone",icon:e.$icons.clone},on:{action:function(t){return e.$emit("clone")}}}):e._e(),e.actions.includes("delete")?t("action-button",{attrs:{title:"Delete completely",icon:e.$icons.delete},on:{action:function(t){return e.$emit("delete")}}}):e._e()],1)},i=[],a={name:"ReactColumnActions",props:{actions:{default:function(){return["edit","browse","clone","delete"]}},row:{type:Object}}},o=a,c=(n("86e4"),n("2877")),s=Object(c["a"])(o,r,i,!1,null,"2c903583",null);t["a"]=s.exports},d06d:function(e,t,n){"use strict";n("6762"),n("2fdb");var r=function(){var e=this,t=e._self._c;return t("fragment",[e.actions.includes("new")?t("action-button",{attrs:{title:"New",icon:e.$icons.new,shortkey:"['ctrl', 'n']"},on:{action:function(t){return e.$emit("new")}}}):e._e(),e.actions.includes("edit")?t("action-button",{directives:[{name:"show",rawName:"v-show",value:e.rows&&1===e.rows.length,expression:"rows && rows.length===1"}],attrs:{title:"Edit",icon:e.$icons.edit},on:{action:function(t){return e.$emit("edit")}}}):e._e(),e.actions.includes("delete")?t("action-button",{directives:[{name:"show",rawName:"v-show",value:e.rows&&e.rows.length>0,expression:"rows && rows.length>0"}],attrs:{title:"Delete",icon:e.$icons.delete},on:{action:function(t){return e.$emit("delete")}}}):e._e()],1)},i=[],a={name:"ReactTableActions",props:{actions:{default:function(){return["new","edit","delete"]}},rows:{type:Array}}},o=a,c=(n("98f8"),n("2877")),s=Object(c["a"])(o,r,i,!1,null,"5656d29a",null);t["a"]=s.exports},f3b3:function(e,t,n){"use strict";var r=function(){var e=this,t=e._self._c;return t("dialog-modal",e._b({ref:"modal",attrs:{"ok-disabled":!e.localValue.form_id||!e.localValue.react_edition_id},on:{hide:e.onModalHide,hidden:e.onModalHidden}},"dialog-modal",e.$dialogsProps,!1),[t("b-form-group",{attrs:{"label-cols":"2",label:"Form"}},[t("select-form",{attrs:{"value-format":"id",required:!0,clearable:!1,forms:e.forms,"exclude-forms":e.excludeForms},model:{value:e.localValue.form_id,callback:function(t){e.$set(e.localValue,"form_id",t)},expression:"localValue.form_id"}})],1),t("b-form-group",{staticClass:"mb-0",attrs:{"label-cols":"2",label:"Edition"}},[t("select-edition",{attrs:{"value-format":"id",required:!0,clearable:!1},model:{value:e.localValue.react_edition_id,callback:function(t){e.$set(e.localValue,"react_edition_id",t)},expression:"localValue.react_edition_id"}})],1)],1)},i=[],a=n("e5a8"),o={name:"PromptNewReactDialog",mixins:[a["a"]],props:{title:{default:"Create new React"},forms:[Array,Boolean],excludeForms:Array,defaults:{type:Object,default:function(){return{form_id:null,react_edition_id:this.currentEdition}}}},data:function(){return{localValue:{form_id:null,react_edition_id:null}}},computed:{currentEdition:function(){return this.$store.state.exolog.defaults.edition}},mounted:function(){this.defaults.form_id&&(this.localValue.form_id=this.defaults.form_id),this.defaults.react_edition_id?this.localValue.react_edition_id=this.defaults.react_edition_id:this.localValue.react_edition_id=this.currentEdition},methods:{}},c=o,s=n("2877"),u=Object(s["a"])(c,r,i,!1,null,null,null);t["a"]=u.exports}}]);
//# sourceMappingURL=chunk-4f3ca1f5.fe63c92a.js.map