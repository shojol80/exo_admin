{"version":3,"sources":["webpack:///./src/mixins/showGroupTree.js","webpack:///./src/views/pages/Pages.vue","webpack:///./src/views/pages/parties/PageGroupTree.vue","webpack:///src/views/pages/parties/PageGroupTree.vue","webpack:///./src/views/pages/parties/PageGroupTree.vue?721e","webpack:///./src/views/pages/parties/PageGroupTree.vue?d753","webpack:///src/views/pages/Pages.vue","webpack:///./src/views/pages/Pages.vue?640e","webpack:///./src/views/pages/Pages.vue?de42"],"names":["computed","showGroupTree","this","$store","getters","$route","meta","hideTreeInPopup","render","_vm","_c","_self","scopedSlots","_u","key","fn","staticClass","proxy","staticRenderFns","ref","attrs","tree","options","on","onClick","onAdd","onEdit","onDelete","name","data","customNodeEdit","watch","to","from","selectByRoute","mounted","load","exoEventBus","$on","methods","_this","editions","getExoAdminTree","then","node","select","type","$router","push","R_EDITION_EDIT","params","e_id","R_SITE_EDIT","id","_onDelete","_asyncToGenerator","regeneratorRuntime","mark","_callee","response","_t","wrap","_context","prev","next","$dialogs","confirmDelete","title","message","concat","text","sent","trigger","abrupt","hide","$refs","waiter","wait","deleteEdition","replace","R_EDITION_TABLE","stop","_x","apply","arguments","getParentEdition","parent","_this2","$nextTick","xtree","selected","length","nodes","pagegroup_id","find","selectAndExpand","component","mixins","components","PageGroupTree"],"mappings":"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","file":"js/chunk-0b467264.644d40e7.js","sourcesContent":["export default {\n    computed: {\n        showGroupTree() {\n            return !(this.$store.getters['app/screenMode'] === 'POPUP' && this.$route.meta.hideTreeInPopup)\n        }\n    },\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('app-screen',{scopedSlots:_vm._u([(_vm.showGroupTree)?{key:\"aside\",fn:function(){return [_c('page-group-tree',{staticClass:\"mt-2\"})]},proxy:true}:null],null,true)})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('waiter',{ref:\"waiter\"},[_c('x-tree',{ref:\"xtree\",attrs:{\"data\":_vm.tree,\"options\":_vm.options},on:{\"click\":_vm.onClick,\"add\":_vm.onAdd,\"edit\":_vm.onEdit,\"delete\":_vm.onDelete}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <waiter ref=\"waiter\">\n        <x-tree\n            ref=\"xtree\"\n            :data=\"tree\"\n            :options=\"options\"\n            @click=\"onClick\"\n            @add=\"onAdd\"\n            @edit=\"onEdit\"\n            @delete=\"onDelete\">\n        </x-tree>\n    </waiter>\n</template>\n\n<script>\nimport {R_EDITION_EDIT, R_EDITION_TABLE, R_SITE_EDIT} from \"@/router/routs\"\nimport editions from \"@/services/api/editions\";\n\nexport default {\n    name: \"PageGroupTree\",\n    data() {\n        return {\n            tree: [],\n            options: {\n                customNodeEdit: true,\n            }\n        }\n    },\n    watch: {\n        '$route'(to, from) {\n            this.selectByRoute()\n        }\n    },\n    mounted() {\n        this.load();\n        exoEventBus.$on('exo-api-call:editions/saveEdition', this.load)\n        exoEventBus.$on('exo-api-call:editions/deleteEdition', this.load)\n        exoEventBus.$on('exo-api-call:editions/setDefaultEdition', this.load)\n    },\n    methods: {\n        load() {\n            editions.getExoAdminTree()\n                .then(data => this.tree = data)\n                .then(this.selectByRoute)\n        },\n        onAdd(node) {\n            node.select()\n            switch (node.data.type) {\n                case 'root':\n                    this.$router.push({name: R_EDITION_EDIT, params: {e_id: 'new'}})\n                    break\n                case 'edition':\n                    /*this.$router.push({\n                        name: R_PAGEGROUP_EDIT,\n                        params: {\n                            pagegroup_id: 'new',\n                            e_id: this.getParentEdition(node),\n                        }\n                    })*/\n                    break\n            }\n        },\n\n        onEdit(node) {\n            node.select()\n            switch (node.data.type) {\n                case 'root':\n                    this.$router.push({\n                        name: R_SITE_EDIT\n                    })\n                    break\n                case 'edition':\n                    this.$router.push({name: R_EDITION_EDIT, params: {e_id: node.id}})\n                    break\n            }\n        },\n\n        async onDelete(node) {\n            let response = await this.$dialogs.confirmDelete({\n                title: 'Delete',\n                message: `Are you sure want to delete ${node.data.type} \"${node.data.text}\"?`\n            })\n            if (response.trigger !== 'ok') return\n\n\n            node.hide()\n            switch (node.data.type) {\n                case 'edition':\n                    this.$refs.waiter.wait(editions.deleteEdition({e_id: node.id}))\n                    //if deleted item was select in tree go to common view\n                    if (this.$route.name === R_EDITION_EDIT && +this.$route.params.e_id === +node.id) {\n                        this.$router.replace({name: R_EDITION_TABLE})\n                    }\n                    break;\n            }\n\n        },\n\n        onClick(node) {\n            switch (node.data.type) {\n                case 'root':\n                    this.$router.push({\n                        name: R_EDITION_TABLE\n                    })\n                    break\n                case 'edition':\n                    this.$router.push({\n                        name: R_EDITION_EDIT,\n                        params: {\n                            e_id: node.id,\n                        }\n                    })\n                    break\n            }\n        },\n\n        getParentEdition(node) {\n            if (node.data.type === 'edition') return node.id\n            if (!node.parent) return null\n            if (node.parent.data.type === 'edition') return node.parent.id\n            else return this.getParentEdition(node.parent)\n        },\n\n        selectByRoute() {\n            this.$nextTick(() => {\n                let tree = this.$refs.xtree.tree\n                if (tree.selected().length > 0) return\n                let nodes = []\n\n                if (this.$route.params.pagegroup_id > 0) {\n                    nodes = tree.find({\n                        id: this.$route.params.pagegroup_id,\n                        data: {\n                            type: 'pagegroup'\n                        }\n                    })\n                } else {\n                    nodes = tree.find({\n                        id: this.$route.params.e_id,\n                        data: {type: 'edition'}\n                    })\n                }\n\n                if (!nodes || nodes.length === 0) {\n                    nodes = tree.find({data: {type: 'root'}})\n                }\n\n                if (nodes && nodes.length > 0) {\n                    this.$refs.xtree.selectAndExpand(nodes[0])\n                }\n            })\n        }\n    },\n\n\n}\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PageGroupTree.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PageGroupTree.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./PageGroupTree.vue?vue&type=template&id=6fce8a2a&scoped=true\"\nimport script from \"./PageGroupTree.vue?vue&type=script&lang=js\"\nexport * from \"./PageGroupTree.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6fce8a2a\",\n  null\n  \n)\n\nexport default component.exports","<template>\n    <app-screen>\n        <template #aside v-if=\"showGroupTree\">\n            <page-group-tree class=\"mt-2\"></page-group-tree>\n        </template>\n    </app-screen>\n</template>\n\n<script>\n\nimport PageGroupTree from './parties/PageGroupTree'\nimport showGroupTree from '@/mixins/showGroupTree'\n\nexport default {\n    name: 'Pages',\n    mixins: [showGroupTree],\n    components: {\n        PageGroupTree,\n    },\n}\n</script>\n\n<style scoped lang=\"scss\">\n\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Pages.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Pages.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Pages.vue?vue&type=template&id=57a16167&scoped=true\"\nimport script from \"./Pages.vue?vue&type=script&lang=js\"\nexport * from \"./Pages.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"57a16167\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}