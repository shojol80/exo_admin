{"version":3,"sources":["webpack:///./src/views/scheduler/SchedulesTable.vue","webpack:///src/views/scheduler/SchedulesTable.vue","webpack:///./src/views/scheduler/SchedulesTable.vue?77d6","webpack:///./src/views/scheduler/SchedulesTable.vue?e30b","webpack:///./src/views/scheduler/SchedulesTable.vue?a9a1","webpack:///./src/services/api/schedule.js"],"names":["render","_vm","this","_c","_self","ref","attrs","loading","staticClass","columns","options","scopedSlots","_u","key","fn","props","$icons","new","on","$event","onActionNew","directives","name","rawName","value","rows","length","expression","edit","onActionEdit","onActionInactivate","onActionActivate","onActionDelete","reload","load","_v","_s","timezone","stopPropagation","row","status","_ref","_ref2","formatParams","params","_ref3","formatOptions","_ref4","formatDate","created_at","_ref5","updated_at","staticRenderFns","data","requestFunction","useFilterSearchQuery","useFilterByColumn","filterableColumns","listColumns","id","text","sortable","uniqueKey","headings","command","computed","dayjs","_","get","$store","mounted","activated","methods","_requestFunction","_asyncToGenerator","regeneratorRuntime","mark","_callee","wrap","_context","prev","next","schedule","getSchedules","sent","abrupt","stop","_x","apply","arguments","$refs","table","refresh","$router","push","R_SCHEDULE_EDIT","schedule_id","_onActionInactivate","_callee2","_context2","inactivate","map","_x2","_onActionActivate","_callee3","_context3","activate","_x3","_onActionDelete","_callee4","message","_t","_context4","concat","$dialogs","confirmDelete","title","trigger","deleteSchedule","_x4","onRowClick","e","str","utc","format","Object","keys","reduce","acc","join","isObject","component","config","Api","post","Array","prototype","slice","call","saveSchedule","getSchedule","commands"],"mappings":"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","file":"js/chunk-b69aa882.445cddc8.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('app-screen',[_c('waiter',{ref:\"tableWaiter\",attrs:{\"show\":_vm.loading}},[_c('action-table',{ref:\"table\",staticClass:\"schedule-table\",attrs:{\"name\":\"Schedules\",\"table-type\":\"server\",\"columns\":_vm.columns,\"options\":_vm.options},scopedSlots:_vm._u([{key:\"actions\",fn:function(props){return [_c('action-group',[_c('action-button',{attrs:{\"title\":\"New schedule\",\"icon\":_vm.$icons.new},on:{\"action\":function($event){return _vm.onActionNew()}}}),_c('action-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(props.rows && props.rows.length === 1),expression:\"props.rows && props.rows.length === 1\"}],attrs:{\"title\":\"Edit schedule\",\"icon\":_vm.$icons.edit},on:{\"action\":function($event){return _vm.onActionEdit(props.rows)}}}),_c('action-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(props.rows && props.rows.length > 0),expression:\"props.rows && props.rows.length > 0\"}],attrs:{\"title\":\"Inactivate schedule\",\"icon\":\"pause\"},on:{\"action\":function($event){return _vm.onActionInactivate(props.rows)}}}),_c('action-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(props.rows && props.rows.length > 0),expression:\"props.rows && props.rows.length > 0\"}],attrs:{\"title\":\"Activate schedule\",\"icon\":\"play\"},on:{\"action\":function($event){return _vm.onActionActivate(props.rows)}}}),_c('action-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(props.rows && props.rows.length > 0),expression:\"props.rows && props.rows.length > 0\"}],attrs:{\"title\":\"Delete schedule\",\"icon\":\"delete\"},on:{\"action\":function($event){return _vm.onActionDelete(props.rows)}}}),_c('action-group-separator'),_c('action-button',{attrs:{\"title\":\"Refresh\",\"icon\":_vm.$icons.reload},on:{\"action\":function($event){return _vm.load()}}})],1),_c('action-group',{staticClass:\"ml-auto mr-4\"},[_c('action-text',[_vm._v(\"\\n                        All schedules will be executed in the timezone:\\n                        \"),_c('span',{staticClass:\"text-danger\"},[_vm._v(_vm._s(_vm.timezone))])])],1)]}},{key:\"col-action\",fn:function(props){return [_c('action-group',{on:{\"click\":function($event){$event.stopPropagation();void 0}}},[_c('action-button',{attrs:{\"title\":\"Edit schedule\",\"icon\":_vm.$icons.edit},on:{\"action\":function($event){return _vm.onActionEdit([props.row])}}}),(+props.row.status === 1)?_c('action-button',{attrs:{\"title\":\"Inactivate\",\"icon\":\"pause\"},on:{\"action\":function($event){return _vm.onActionInactivate([props.row])}}}):_c('action-button',{attrs:{\"title\":\"Activate\",\"icon\":\"play\"},on:{\"action\":function($event){return _vm.onActionActivate([props.row])}}}),_c('action-button',{attrs:{\"title\":\"Delete\",\"icon\":\"delete\"},on:{\"action\":function($event){return _vm.onActionDelete([props.row])}}})],1)]}},{key:\"contextmenu\",fn:function(props){return [_c('x-context-menu-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(props.rows && props.rows.length === 1),expression:\"props.rows && props.rows.length === 1\"}],attrs:{\"icon\":_vm.$icons.edit},on:{\"click\":function($event){return _vm.onActionEdit(props.rows)}}},[_vm._v(\"\\n                    Edit\\n                \")]),_c('x-context-menu-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(\n                        props.rows &&\n                            props.rows.length === 1 &&\n                            props.rows[0].status === '1'\n                    ),expression:\"\\n                        props.rows &&\\n                            props.rows.length === 1 &&\\n                            props.rows[0].status === '1'\\n                    \"}],attrs:{\"icon\":\"pause\"},on:{\"click\":function($event){return _vm.onActionInactivate(props.rows)}}},[_vm._v(\"\\n                    Inactivate\\n                \")]),_c('x-context-menu-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(\n                        props.rows &&\n                            props.rows.length === 1 &&\n                            props.rows[0].status === '0'\n                    ),expression:\"\\n                        props.rows &&\\n                            props.rows.length === 1 &&\\n                            props.rows[0].status === '0'\\n                    \"}],attrs:{\"icon\":\"play\"},on:{\"click\":function($event){return _vm.onActionActivate(props.rows)}}},[_vm._v(\"\\n                    Activate\\n                \")]),_c('x-context-menu-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(props.rows && props.rows.length > 0),expression:\"props.rows && props.rows.length > 0\"}],attrs:{\"icon\":\"delete\"},on:{\"click\":function($event){return _vm.onActionDelete(props.rows)}}},[_vm._v(\"\\n                    Delete\\n                \")])]}},{key:\"status\",fn:function({row}){return [(row.status === '1')?_c('span',{staticClass:\"badge badge-success\"},[_vm._v(\"Active\\n                \")]):_c('span',{staticClass:\"badge badge-secondary\"},[_vm._v(\"Inactive \")])]}},{key:\"params\",fn:function({row}){return [_c('div',{staticClass:\"text-truncate\"},[_vm._v(\"\\n                    \"+_vm._s(_vm.formatParams(row.params))+\"\\n                \")])]}},{key:\"options\",fn:function({row}){return [_c('div',{staticClass:\"text-truncate\"},[_vm._v(\"\\n                    \"+_vm._s(_vm.formatOptions(row.options))+\"\\n                \")])]}},{key:\"created_at\",fn:function({row}){return [_vm._v(\"\\n                \"+_vm._s(_vm.formatDate(row.created_at))+\"\\n            \")]}},{key:\"updated_at\",fn:function({row}){return [_vm._v(\"\\n                \"+_vm._s(_vm.formatDate(row.updated_at))+\"\\n            \")]}}])})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <app-screen>\n        <waiter ref=\"tableWaiter\" :show=\"loading\">\n            <action-table\n                name=\"Schedules\"\n                ref=\"table\"\n                table-type=\"server\"\n                :columns=\"columns\"\n                :options=\"options\"\n                class=\"schedule-table\"\n            >\n                <!--Actions-->\n                <template #actions=\"props\">\n                    <action-group>\n                        <action-button\n                            @action=\"onActionNew()\"\n                            title=\"New schedule\"\n                            :icon=\"$icons.new\"\n                        >\n                        </action-button>\n                        <action-button\n                            v-show=\"props.rows && props.rows.length === 1\"\n                            @action=\"onActionEdit(props.rows)\"\n                            title=\"Edit schedule\"\n                            :icon=\"$icons.edit\"\n                        >\n                        </action-button>\n                        <action-button\n                            v-show=\"props.rows && props.rows.length > 0\"\n                            @action=\"onActionInactivate(props.rows)\"\n                            title=\"Inactivate schedule\"\n                            icon=\"pause\"\n                        >\n                        </action-button>\n                        <action-button\n                            v-show=\"props.rows && props.rows.length > 0\"\n                            @action=\"onActionActivate(props.rows)\"\n                            title=\"Activate schedule\"\n                            icon=\"play\"\n                        >\n                        </action-button>\n                        <action-button\n                            v-show=\"props.rows && props.rows.length > 0\"\n                            @action=\"onActionDelete(props.rows)\"\n                            title=\"Delete schedule\"\n                            icon=\"delete\"\n                        >\n                        </action-button>\n                        <action-group-separator></action-group-separator>\n                        <action-button\n                            @action=\"load()\"\n                            title=\"Refresh\"\n                            :icon=\"$icons.reload\"\n                        >\n                        </action-button>\n                    </action-group>\n                    <action-group class=\"ml-auto mr-4\">\n                        <action-text>\n                            All schedules will be executed in the timezone:\n                            <span class=\"text-danger\">{{ timezone }}</span>\n                        </action-text>\n                    </action-group>\n                </template>\n                <template #col-action=\"props\">\n                    <action-group @click.stop=\"void 0\">\n                        <action-button\n                            @action=\"onActionEdit([props.row])\"\n                            title=\"Edit schedule\"\n                            :icon=\"$icons.edit\"\n                        >\n                        </action-button>\n                        <action-button\n                            v-if=\"+props.row.status === 1\"\n                            @action=\"onActionInactivate([props.row])\"\n                            title=\"Inactivate\"\n                            icon=\"pause\"\n                        >\n                        </action-button>\n                        <action-button\n                            v-else\n                            @action=\"onActionActivate([props.row])\"\n                            title=\"Activate\"\n                            icon=\"play\"\n                        >\n                        </action-button>\n                        <action-button\n                            @action=\"onActionDelete([props.row])\"\n                            title=\"Delete\"\n                            icon=\"delete\"\n                        >\n                        </action-button>\n                    </action-group>\n                </template>\n                <template #contextmenu=\"props\">\n                    <x-context-menu-item\n                        v-show=\"props.rows && props.rows.length === 1\"\n                        @click=\"onActionEdit(props.rows)\"\n                        :icon=\"$icons.edit\"\n                    >\n                        Edit\n                    </x-context-menu-item>\n                    <x-context-menu-item\n                        v-show=\"\n                            props.rows &&\n                                props.rows.length === 1 &&\n                                props.rows[0].status === '1'\n                        \"\n                        @click=\"onActionInactivate(props.rows)\"\n                        icon=\"pause\"\n                    >\n                        Inactivate\n                    </x-context-menu-item>\n                    <x-context-menu-item\n                        v-show=\"\n                            props.rows &&\n                                props.rows.length === 1 &&\n                                props.rows[0].status === '0'\n                        \"\n                        @click=\"onActionActivate(props.rows)\"\n                        icon=\"play\"\n                    >\n                        Activate\n                    </x-context-menu-item>\n                    <x-context-menu-item\n                        v-show=\"props.rows && props.rows.length > 0\"\n                        @click=\"onActionDelete(props.rows)\"\n                        icon=\"delete\"\n                    >\n                        Delete\n                    </x-context-menu-item>\n                </template>\n                <!--Columns-->\n                <template #status=\"{row}\">\n                    <span v-if=\"row.status === '1'\" class=\"badge badge-success\"\n                        >Active\n                    </span>\n                    <span v-else class=\"badge badge-secondary\">Inactive </span>\n                </template>\n                <template #params=\"{row}\">\n                    <div class=\"text-truncate\">\n                        {{ formatParams(row.params) }}\n                    </div>\n                </template>\n                <template #options=\"{row}\">\n                    <div class=\"text-truncate\">\n                        {{ formatOptions(row.options) }}\n                    </div>\n                </template>\n                <template #created_at=\"{row}\">\n                    {{ formatDate(row.created_at) }}\n                </template>\n                <template #updated_at=\"{row}\">\n                    {{ formatDate(row.updated_at) }}\n                </template>\n            </action-table>\n        </waiter>\n    </app-screen>\n</template>\n\n<script>\nimport { R_SCHEDULE_EDIT } from \"@modules/routs\";\nimport schedule from \"@/services/api/schedule\";\nimport dayjs from \"dayjs\";\n\nexport default {\n    name: \"SchedulesTable\",\n    data() {\n        return {\n            loading:false,\n            columns: [\n                \"col-check\",\n\n                \"id\",\n                \"command\",\n                \"params\",\n                \"options\",\n                \"expression\",\n                \"status\",\n                \"created_at\",\n                \"updated_at\",\n\n                \"col-action\"\n            ],\n            options: {\n                requestFunction: this.requestFunction,\n                useFilterSearchQuery: true,\n                useFilterByColumn: true,\n                filterableColumns: [\"id\", \"command\", \"expression\", \"status\"],\n                listColumns: {\n                    status: [\n                        {\n                            id: \"1\",\n                            text: \"Active\"\n                        },\n                        {\n                            id: \"0\",\n                            text: \"Inactive\"\n                        }\n                    ]\n                },\n                sortable: [\n                    \"id\",\n                    \"command\",\n                    \"expression\",\n                    \"status\",\n                    \"created_at\",\n                    \"updated_at\"\n                ],\n                uniqueKey: \"id\",\n                headings: {\n                    id: \"ID\",\n                    command: \"Command\",\n                    params: \"Arguments\",\n                    options: \"Options\",\n                    expression: \"Cron Expression\",\n                    created_at: \"Created At\",\n                    updated_at: \"Updated At\",\n                    status: \"Status\"\n                }\n            }\n        };\n    },\n    computed: {\n        dayjs() {\n            return dayjs;\n        },\n        timezone() {\n            return _.get(\n                this.$store,\n                \"state.exolog.app.database-schedule.timezone\"\n            );\n        }\n    },\n    mounted() {},\n    activated() {\n        this.load();\n    },\n    methods: {\n        async requestFunction(params) {\n            this.loading = true;\n            let data = await schedule.getSchedules(params);\n            this.loading = false;\n            return data;\n        },\n        load() {\n            this.$refs.table.refresh();\n        },\n\n        onActionNew() {\n            this.$router.push({\n                name: R_SCHEDULE_EDIT,\n                params: { schedule_id: \"new\" }\n            });\n        },\n\n        async onActionInactivate(rows) {\n            await schedule.inactivate({ id: rows.map(row => row[\"id\"]) });\n            await this.load();\n        },\n\n        async onActionActivate(rows) {\n            await schedule.activate({ id: rows.map(row => row[\"id\"]) });\n            await this.load();\n        },\n\n        onActionEdit(rows) {\n            this.$router.push({\n                name: R_SCHEDULE_EDIT,\n                params: { schedule_id: rows[0][\"id\"] }\n            });\n        },\n\n        async onActionDelete(rows) {\n            let message;\n            if (rows.length === 1) {\n                message = `Are you sure want to delete schedule <b>${rows[0][\"command\"]}</b>?`;\n            } else {\n                message = `Are you sure want to delete \"${rows.length}\" schedules?`;\n            }\n            if (\n                (\n                    await this.$dialogs.confirmDelete({\n                        title: \"Delete schedule\",\n                        message\n                    })\n                ).trigger !== \"ok\"\n            )\n                return;\n            await schedule.deleteSchedule({ id: rows.map(row => row[\"id\"]) });\n            await this.load();\n        },\n\n        onRowClick(e) {},\n\n        formatDate(str) {\n            return dayjs(str)\n                .utc()\n                .format(\"YYYY-MM-DD HH:mm\");\n        },\n        formatParams(params) {\n            return Object.keys(params)\n                .reduce((acc, key) => {\n                    acc.push(`${key}=${params[key].value}`);\n                    return acc;\n                }, [])\n                .join(\", \");\n        },\n\n        formatOptions(params) {\n            return Object.keys(params)\n                .reduce((acc, key) => {\n                    if (_.isObject(params[key])) {\n                        acc.push(`--${key}=${params[key].value}`);\n                    } else {\n                        acc.push(`--${key}`);\n                    }\n                    return acc;\n                }, [])\n                .join(\" \");\n        }\n    }\n};\n</script>\n\n<style lang=\"scss\">\n.schedule-table {\n    .col-id {\n        width: 100px;\n    }\n\n    .col-status {\n        width: 100px;\n    }\n\n    .col-params,\n    .col-options {\n        max-width: 180px;\n    }\n\n    .col-created_at,\n    .col-updated_at {\n        width: 130px;\n    }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SchedulesTable.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SchedulesTable.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./SchedulesTable.vue?vue&type=template&id=7bd9d1e2\"\nimport script from \"./SchedulesTable.vue?vue&type=script&lang=js\"\nexport * from \"./SchedulesTable.vue?vue&type=script&lang=js\"\nimport style0 from \"./SchedulesTable.vue?vue&type=style&index=0&id=7bd9d1e2&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SchedulesTable.vue?vue&type=style&index=0&id=7bd9d1e2&prod&lang=scss\"","import Api from \"@/services/api/Api\"\n\nexport default {\n    getSchedules(params, config) {\n        return Api.post('/schedule/getSchedules', ...arguments)\n    },\n    saveSchedule(params, config) {\n        return Api.post('/schedule/saveSchedule', ...arguments)\n    },\n    inactivate(params, config) {\n        return Api.post('/schedule/inactivate', ...arguments)\n    },\n    activate(params, config) {\n        return Api.post('/schedule/activate', ...arguments)\n    },\n    deleteSchedule(params, config) {\n        return Api.post('/schedule/deleteSchedule', ...arguments)\n    },\n    getSchedule(params, config) {\n        return Api.post('/schedule/getSchedule', ...arguments)\n    },\n    commands(params, config) {\n        return Api.post('/schedule/commands', ...arguments)\n    },\n}\n"],"sourceRoot":""}