(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34d9ec9c"],{"0376":function(e,t,a){"use strict";a("f920")},"12e8":function(e,t,a){"use strict";a("6979")},"5a04":function(e,t,a){},6979:function(e,t,a){},8055:function(e,t,a){"use strict";var r=function(){var e=this,t=e._self._c;return t("b-card-group",{staticClass:"two-step-auth"},[t("b-card",{staticClass:"animated fadeIn",attrs:{"no-body":"","footer-bg-variant":"success"}},[t("b-card-header",{directives:[{name:"show",rawName:"v-show",value:!e.hideHeader,expression:"!hideHeader"}]},[t("h2",{staticClass:"text-primary mb-0"},[e._v("Set up Authenticator")])]),t("b-card-body",{directives:[{name:"show",rawName:"v-show",value:1===e.step,expression:"step===1"}]},[e.showCode?t("div",[t("ol",{staticClass:"text-dark"},[t("li",[e._v("Tap Menu, then Set up account.")]),t("li",[e._v("Tap Enter provided key.")]),t("li",[e._v("Enter your email address and this key:\n                        "),t("b-alert",{staticClass:"mt-3",attrs:{show:"",variant:"dark"}},[e._v(e._s(e.secretCode))])],1),t("li",[e._v("Make sure Time based is turned on, and tap Add to finish.")])]),t("div",{staticClass:"text-center"},[t("a",{attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.showCode=!1}}},[e._v("Show QR code")])])]):t("div",[t("ol",{staticClass:"text-dark"},[t("li",[e._v("\n                        Get the Authenticator App from the Play Store.\n                        "),t("div",{staticClass:"d-flex flex-row align-items-center"},[t("div",{staticClass:"exo-2FA-steps__link-android"},[t("a",{attrs:{href:"https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2&pcampaignid=MKT-Other-global-all-co-prtnr-py-PartBadge-Mar2515-1"}},[t("img",{staticStyle:{display:"inline-block",width:"150px"},attrs:{alt:"Get it on Google Play",src:"https://play.google.com/intl/en_us/badges/images/generic/en_badge_web_generic.png"}})])]),t("a",{staticStyle:{display:"inline-block",overflow:"hidden",background:"url(https://linkmaker.itunes.apple.com/assets/shared/badges/en-us/appstore-lrg.svg) no-repeat",width:"135px",height:"40px","background-size":"contain"},attrs:{href:"https://itunes.apple.com/us/app/google-authenticator/id388497605?mt=8"}})])]),t("li",[e._v(" In the App select Set up account.\n                    ")]),t("li",[e._v(" Choose Scan a barcode.\n                    ")])]),t("div",{staticClass:"text-center mb-4 mt-4"},[e.barcode?t("vue-qrcode",{attrs:{value:e.barcode,options:{width:200,color:{dark:"#00919c"}}}}):e._e()],1),t("div",{staticClass:"text-center"},[t("a",{attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.showCode=!0}}},[e._v("Can't scan it? or want backup code?")])])])]),t("b-card-body",{directives:[{name:"show",rawName:"v-show",value:2===e.step,expression:"step===2"}]},[t("waiter",{ref:"step2waiter"},[t("div",[t("b-input-group",{staticClass:"mb-3"},[t("b-input-group-prepend",[t("b-input-group-text",[e._v("6-digit code")])],1),t("b-form-input",{ref:"input",staticClass:"form-control",attrs:{type:"text",placeholder:"Enter code that you see in the app",state:!(!e.gaCodeState||e.verifyError)&&null},on:{input:function(t){e.verifyError=""},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.verify.apply(null,arguments)}},model:{value:e.ga_code,callback:function(t){e.ga_code=t},expression:"ga_code"}}),t("b-form-invalid-feedback",{attrs:{id:"inputLiveFeedback"}},[e._v("\n                            "+e._s(e.verifyError)+"\n                        ")])],1)],1)])],1),t("b-card-body",{directives:[{name:"show",rawName:"v-show",value:3===e.step,expression:"step===3"}]},[t("b-alert",{attrs:{variant:"success",show:""}},[t("h4",{staticClass:"text-center mb-0"},[e._v("2-Step Verification turned on")])])],1),t("b-card-footer",{staticClass:"text-right",attrs:{"footer-bg-variant":"light"}},[t("b-button",{directives:[{name:"show",rawName:"v-show",value:e.step>1&&e.step<3,expression:"step>1 && step<3"}],staticClass:"px-4 mx-1 btn-min",attrs:{variant:"light"},on:{click:function(t){e.step--}}},[e._v("BACK\n            ")]),t("b-button",{directives:[{name:"show",rawName:"v-show",value:e.step<2,expression:"step<2"}],staticClass:"px-4 mx-1 btn-min",attrs:{variant:"primary"},on:{click:function(t){e.step++}}},[e._v("NEXT\n            ")]),t("b-button",{directives:[{name:"show",rawName:"v-show",value:2===e.step,expression:"step===2"}],staticClass:"px-4 mx-1 btn-min",attrs:{variant:"primary",disabled:!e.gaCodeState},on:{click:e.verify}},[e._v("VERIFY\n            ")]),t("b-button",{directives:[{name:"show",rawName:"v-show",value:3===e.step,expression:"step===3"}],staticClass:"px-4 mx-1 btn-min",attrs:{variant:"primary"},on:{click:e.onClose}},[e._v("DONE\n            ")])],1)],1)],1)},s=[],i=a("9a1e"),n=a("b2e5"),o=a.n(n),l={name:"TwoStepAuth",components:{VueQrcode:o.a},props:{u_id:{default:void 0},hideHeader:{default:!1}},data:function(){return{step:1,barcode:"",secretCode:"",showCode:!1,ga_code:"",verifyError:""}},watch:{step:function(e,t){var a=this;2===e&&(this.ga_code="",this.$nextTick((function(){a.$refs.input.focus()})))}},computed:{gaCodeState:function(){return 6===this.ga_code.length||0===this.ga_code.length&&null},error:function(){return this.$store.state.auth.error}},methods:{verify:function(){var e=this;this.gaCodeState&&(this.verifyError="",this.$refs.step2waiter.wait(i["a"].enable2FA({u_id:this.u_id,ga_code:this.ga_code}).then((function(){e.step++})).catch((function(t){if(!t.data||!t.data.error)throw t;e.verifyError=t.data.error}))))},onClose:function(){this.$emit("done")}},mounted:function(){var e=this;i["a"].create2FA({u_id:this.u_id}).then((function(t){e.barcode=t.barcode,e.secretCode=t.code}))}},u=l,c=(a("aa56"),a("2877")),d=Object(c["a"])(u,r,s,!1,null,"0d40bacc",null);t["a"]=d.exports},"858e":function(e,t,a){"use strict";a("c9ac")},"890f":function(e,t,a){},"926e":function(e,t,a){"use strict";var r=function(){var e=this,t=e._self._c;return t("multiselect",e._g(e._b({staticClass:"x-multiselect",scopedSlots:e._u([e._l(e.$scopedSlots,(function(t,a){return{key:a,fn:function(t){return[e._t(a,null,null,t)]}}}))],null,!0)},"multiselect",e.$attrs,!1),e.$listeners),[e._l(e.$slots,(function(t,a){return e._t(a,null,{slot:a})}))],2)},s=[],i=a("8e5f"),n=a.n(i),o=(a("e607"),{components:{Multiselect:n.a},methods:{}}),l=o,u=(a("858e"),a("2877")),c=Object(u["a"])(l,r,s,!1,null,null,null);t["a"]=c.exports},aa56:function(e,t,a){"use strict";a("890f")},c9ac:function(e,t,a){},d51e:function(e,t,a){"use strict";a("5a04")},eeca:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("waiter",{ref:"waiter"},[t("ValidationObserver",{ref:"observer",scopedSlots:e._u([{key:"default",fn:function(a){a.invalid;return[t("action-toolbar",[t("action-group",{staticClass:"mr-2"},[t("action-back"),t("action-group-separator"),t("ValidationProvider",{attrs:{rules:"required|email",name:"email",slim:""},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.valid,s=a.errors;return t("action-input",{ref:"name",attrs:{title:"E-email","db-field":"u_email",readonly:"new"!==e.u_id,valid:r,errors:s},model:{value:e.user.u_email,callback:function(t){e.$set(e.user,"u_email",t)},expression:"user.u_email"}})}}],null,!0)}),t("action-button",{attrs:{title:"Save",icon:e.$icons.save,shortkey:"['ctrl', 's']"},on:{action:e.save}}),t("action-button",{attrs:{disabled:"new"===e.u_id,title:"Reload",icon:e.$icons.reload},on:{action:e.load}}),t("action-group-separator"),e.allowEmailSetting?t("action-button",{attrs:{disabled:"new"===e.u_id,title:"User mailbox",icon:e.$icons.mailbox},on:{action:function(t){return e.$refs.mailbox.show()}}}):e._e(),t("action-group-separator"),t("action-button",{attrs:{disabled:"new"===e.u_id,title:"Related reactions",icon:e.$icons.react},on:{action:e.onReactions}}),t("action-download-vcf",{attrs:{u_id:e.u_id}})],1)],1),t("b-tabs",{staticClass:"x-tabs"},[t("b-tab",{ref:"propertiesTab",attrs:{active:""},scopedSlots:e._u([{key:"title",fn:function(){return[t("icon",{attrs:{icon:e.$icons.properties}}),e._v("\n                    Properties\n                ")]},proxy:!0}],null,!0)},[t("x-form-input",{attrs:{title:"User ID","db-field":"u_id",readonly:""},model:{value:e.user.u_id,callback:function(t){e.$set(e.user,"u_id",t)},expression:"user.u_id"}}),t("ValidationProvider",{attrs:{rules:"email",name:"alternative email"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.valid,s=a.errors;return t("x-form-input",{attrs:{"aria-autocomplete":"none",autocomplete:"off",title:"Alternative e-mail","db-field":"u_alt_email",valid:r,errors:s},model:{value:e.user.u_alt_email,callback:function(t){e.$set(e.user,"u_alt_email",t)},expression:"user.u_alt_email"}})}}],null,!0)}),t("ValidationProvider",{attrs:{rules:"new"===e.u_id?"required|min:6":"min:6",name:"password"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.valid,s=a.errors;return t("x-form-password",{attrs:{"aria-autocomplete":"none",autocomplete:"off",valid:r,errors:s,title:"Password","db-field":"u_password"},model:{value:e.user.u_password,callback:function(t){e.$set(e.user,"u_password",t)},expression:"user.u_password"}})}}],null,!0)}),t("x-form-group",{attrs:{title:"2-Step Verification"}},[t("b-button",{attrs:{variant:"primary",disabled:"new"===e.u_id},domProps:{textContent:e._s(e.user.is_2fa?"Disable":"Enable")},on:{click:e.onProceed2FA}})],1),t("ValidationProvider",{attrs:{rules:"required",name:"language"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.valid,s=a.errors;return t("x-form-select",{attrs:{valid:r,errors:s,title:"Language",options:e.langs,"db-field":"u_lang","allow-empty":!1,placeholder:"Select language"},model:{value:e.user.u_lang,callback:function(t){e.$set(e.user,"u_lang",t)},expression:"user.u_lang"}})}}],null,!0)}),t("x-form-group",{attrs:{title:"Usergroups"}},[t("select-usergroup",{attrs:{multiple:!0,valueFormat:"object",flat:!0},model:{value:e.user.usergroups,callback:function(t){e.$set(e.user,"usergroups",t)},expression:"user.usergroups"}})],1),t("x-form-group",{staticClass:"form-group--input-flex",attrs:{title:"DID","db-field":"u_did"}},[t("span",[e._v(e._s(e.user.u_did))])]),t("x-form-group",{staticClass:"form-group--input-flex",attrs:{title:"Confirmstring","db-field":"u_newsletter_confirmstring"}},[t("span",[e._v(e._s(e.user.u_newsletter_confirmstring))])]),t("x-form-group",{staticClass:"form-group--input-flex",attrs:{title:"Email-bounce","db-field":"u_newsletter_count_bounced"}},[t("span",[e._v(e._s(e.user.u_newsletter_count_bounced))])])],1),t("b-tab",{scopedSlots:e._u([{key:"title",fn:function(){return[t("icon",{attrs:{icon:e.$icons.variables}}),e._v("\n                    Variables\n                ")]},proxy:!0}],null,!0)},[t("vars-editor",{model:{value:e.user.vars,callback:function(t){e.$set(e.user,"vars",t)},expression:"user.vars"}})],1)],1)]}}])}),t("b-modal",{ref:"modal2fa",attrs:{"modal-class":"modal-primary modal-2fa",size:"md","hide-footer":"",centered:""}}),t("user-mailbox-aside",{ref:"mailbox",attrs:{u_id:e.u_id,u_email:e.user.u_email},on:{"":function(e){}}})],1)},s=[],i=(a("a481"),a("96cf"),a("3b8d")),n=(a("7f7f"),a("28a5"),a("2c2f")),o=a("b991"),l=a("9a1e"),u=function(){var e=this,t=e._self._c;return t("action-button",{attrs:{disabled:"new"===e.u_id,title:"Download vCard",icon:e.$icons.vcf},on:{action:e.downdload}},[t("iframe",{staticStyle:{display:"none"},attrs:{id:"invisible",src:e.src}})])},c=[],d={name:"ActionDownloadVcf",props:{u_id:{requared:!0}},data:function(){return{src:null,cache:0}},methods:{downdload:function(){this.cache++,this.src="/api/users/downloadUserVCF?u_id=".concat(this.u_id,"&cache=").concat(this.cache)}}},p=d,m=a("2877"),f=Object(m["a"])(p,u,c,!1,null,"3792afd0",null),b=f.exports,h=function(){var e=this,t=e._self._c;return t("aside-panel",{ref:"modal",staticClass:"user-mailbox-aside",scopedSlots:e._u([{key:"actions",fn:function(){return[t("action-button",{attrs:{title:"Save",icon:e.$icons.save},on:{action:function(){return e.save(!0)}}})]},proxy:!0}])},[t("waiter",{ref:"waiter"},[t("ValidationObserver",{ref:"observer",scopedSlots:e._u([{key:"default",fn:function(a){a.invalid;return[t("div",{staticClass:"user-mailbox-aside__body"},[t("b-card",{staticClass:"my-3"},[t("x-form-fieldset",{attrs:{title:"Mailbox of ".concat(e.u_email," (IMAP/POP)")}},[t("div",{staticClass:"d-flex align-items-start"},[t("x-form-switch",{attrs:{value:e.mailbox.is_popbox,"label-cols-sm":0,"label-cols-lg":0},on:{change:e.onChangeMailbox}})],1),e.mailbox.is_popbox?[t("ValidationProvider",{ref:"emailPassProvider",attrs:{vid:"emailPassProvider",rules:"min:8",name:"password"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.valid,s=a.errors;return t("x-form-password",{attrs:{valid:r,errors:s,title:"Password","db-field":""},model:{value:e.mailbox.password,callback:function(t){e.$set(e.mailbox,"password",t)},expression:"mailbox.password"}})}}],null,!0)}),t("x-form-group",[t("action-link",{staticClass:"d-inline-flex",attrs:{title:"Open mailbox",disabled:e.isNewMailbox,target:"_blank",icon:e.$icons.external_link,href:e.webmailUrl}},[t("span",{staticClass:"ml-2",staticStyle:{"margin-top":"3px"}},[e._v("View in webmail-client")])])],1)]:e._e()],2),t("hr"),t("x-form-fieldset",{attrs:{title:"Redirect email to another recipient"}},[t("x-form-group",{attrs:{title:"Forward to"}},[t("forward-to",{attrs:{aliases:e.aliases,"user-email":e.u_email},on:{"update:aliases":function(t){e.aliases=t}},model:{value:e.mailbox.mailboxdest,callback:function(t){e.$set(e.mailbox,"mailboxdest",t)},expression:"mailbox.mailboxdest"}})],1)],1)],1)],1)]}}])})],1)],1)},x=[],v=(a("6762"),a("2fdb"),a("870c")),_=a("926e"),g=function(){var e=this,t=e._self._c;return t("x-multiselect",e._g(e._b({attrs:{value:e.value,options:e.aliases,taggable:!0,label:"name","track-by":"name",multiple:!0,"tag-placeholder":"Add this as new email",placeholder:"Search or add a new email"},on:{tag:e.addTag,input:e.onInput}},"x-multiselect",e.$attrs,!1),e.$listeners))},w=[],k={name:"ForwardTo",components:{XMultiselect:_["a"]},props:{aliases:{type:Array,default:function(){return[]}},value:{type:Array,required:!0},userEmail:{type:String,default:""}},computed:{},methods:{addTag:function(e){if(this.userEmail&&e.toLowerCase()===this.userEmail.toLowerCase())this.$awn.warning("Cannot forward to the same address: ".concat(e));else{var t=this.value.find((function(t){return t.name&&t.name.toLowerCase()===e.toLowerCase()}));if(t)this.$awn.warning("Email ".concat(e," is already in the forward list"));else{var a={name:e};this.aliases.push(a),this.value.push(a)}}},onInput:function(e){var t=this;if(this.userEmail&&e){var a=e.filter((function(e){var a=e.name&&e.name.toLowerCase()===t.userEmail.toLowerCase();return!a||(t.$awn.warning("Cannot forward to the same address: ".concat(e.name)),!1)}));if(a.length!==e.length)return void this.$emit("input",a)}this.$emit("input",e)}}},y=k,C=(a("12e8"),Object(m["a"])(y,g,w,!1,null,"4deab4ad",null)),$=C.exports,S={name:"UserMailboxAside",components:{ForwardTo:$,AsidePanel:v["a"],XMultiselect:_["a"]},props:{u_id:{required:!0},u_email:{required:!0}},data:function(){return{isNewMailbox:!0,mailbox:{password:""},aliases:[]}},computed:{webmailUrl:function(){if(!this.u_email)return"#";var e=this.u_email.split("@");if(2!==e.length)return"#";var t=e[1];return"https://mail.".concat(t,"/webmail/?_user=").concat(this.u_email)}},methods:{show:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$refs.modal.show(),this.isNewMailbox=!0,e.next=1,this.load();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onChangeMailbox:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,r,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,1!==t&&!0!==t){e.next=1;break}return this.mailbox.is_popbox=!0,e.abrupt("return");case 1:if(!this.isNewMailbox){e.next=2;break}return this.mailbox.is_popbox=!1,e.abrupt("return");case 2:return e.next=3,this.$dialogs.confirmDelete({okTitle:"CONFIRM",title:"Disable Mailbox",message:"Are you sure you want to disable the mailbox for ".concat(this.u_email,"? This will delete all emails and cannot be undone. Click Save to apply changes.")});case 3:if(a=e.sent,"ok"===a.trigger){e.next=4;break}return this.$nextTick((function(){s.mailbox.is_popbox=!0})),e.abrupt("return");case 4:this.mailbox.is_popbox=!1,e.next=6;break;case 5:e.prev=5,r=e["catch"](0),console.error("Error updating mailbox state:",r),this.$awn.alert("Failed to update mailbox state. Please try again."),this.$nextTick((function(){s.mailbox.is_popbox=!t}));case 6:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(t){return e.apply(this,arguments)}return t}(),load:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("ðŸ”„ Loading mailbox data for user:",this.u_id,"email:",this.u_email),e.next=1,this.$refs.waiter.wait(n["a"].getUserMailbox({u_id:this.u_id}));case 1:t=e.sent,console.log("ðŸ“¥ Raw data received from API:",t),t.aliases&&(console.log("ðŸ“§ Aliases found:",t.aliases),this.aliases=t.aliases),t&&t.mailbox?(console.log("ðŸ“® Mailbox data found:",t.mailbox),console.log("ðŸ“® Original mailboxdest:",t.mailbox.mailboxdest),this.mailbox=t.mailbox,this.mailbox.password="",this.mailbox.mailboxdest&&Array.isArray(this.mailbox.mailboxdest)?(console.log("ðŸ” Before filtering - mailboxdest:",this.mailbox.mailboxdest),console.log("ðŸ” User email to filter out:",this.u_email),this.mailbox.mailboxdest=this.mailbox.mailboxdest.filter((function(e){var t=e.name&&e.name.toLowerCase()!==a.u_email.toLowerCase();return console.log('ðŸ” Checking destination "'.concat(e.name,'" - Keep: ').concat(t)),t})),console.log("âœ… After filtering - mailboxdest:",this.mailbox.mailboxdest)):console.log("âš ï¸ mailboxdest is not an array or is empty:",this.mailbox.mailboxdest)):console.log("âš ï¸ No mailbox data found in response"),this.mailbox.is_popbox?(console.log("ðŸ“® Mailbox is enabled (is_popbox = true)"),this.isNewMailbox=!1):console.log("ðŸ“® Mailbox is disabled (is_popbox = false)");case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),save:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a,r,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]&&s[0],e.next=1,this.$refs.observer.validate();case 1:if(a=e.sent,a){e.next=2;break}return e.abrupt("return");case 2:if(!this.mailbox.is_popbox||!this.isNewMailbox||0!==this.mailbox.password.length){e.next=3;break}return this.$refs.observer.setErrors({emailPassProvider:["Password filed is required for create mailbox."]}),e.abrupt("return");case 3:if(!this.mailbox["is_maillisting_dest"]||this.mailbox["maillisting_usergroup"]){e.next=4;break}return this.$refs.observer.setErrors({mUsergroupProvider:["Usergroup is required."]}),e.abrupt("return");case 4:return console.log("ðŸ’¾ Saving mailbox data:",{u_id:this.u_id,mailbox:this.mailbox,mailboxdest:this.mailbox.mailboxdest}),e.prev=5,e.next=6,this.$refs.waiter.wait(n["a"].saveUserMailbox({u_id:this.u_id,mailbox:this.mailbox}));case 6:return console.log("âœ… Save completed, reloading data..."),e.next=7,this.load();case 7:this.isNewMailbox=!1,t&&(this.mailbox.is_popbox?this.$awn.success("Mailbox enabled and settings saved for ".concat(this.u_email)):this.$awn.warning("Mailbox disabled and settings saved for ".concat(this.u_email))),e.next=9;break;case 8:e.prev=8,r=e["catch"](5),console.error("âŒ Error saving mailbox:",r),r.response&&r.response.data&&r.response.data.message?this.$awn.alert(r.response.data.message):r.message?this.$awn.alert(r.message):this.$awn.alert("Failed to save mailbox settings. Please try again."),r.response&&r.response.data&&r.response.data.message&&r.response.data.message.includes("password")&&this.$refs.observer.setErrors({emailPassProvider:[r.response.data.message]});case 9:case"end":return e.stop()}}),e,this,[[5,8]])})));function t(){return e.apply(this,arguments)}return t}()}},A=S,P=(a("0376"),Object(m["a"])(A,h,x,!1,null,"2bc7d85c",null)),M=P.exports,E=a("9466"),R=function(){var e=this,t=e._self._c;return t("dialog-modal",e._b({ref:"modal",attrs:{"modal-class":"two-factors-setup-dialog",size:"md","hide-footer":"",title:"Set up Authenticator"},on:{hide:e.onModalHide,hidden:e.onModalHidden}},"dialog-modal",e.$dialogsProps,!1),[t("two-step-auth",{attrs:{"hide-header":"true",u_id:e.u_id},on:{done:e.onDone}})],1)},O=[],T=a("e5a8"),N=a("8055"),V={name:"TwoFactorsSetupDialog",mixins:[T["a"]],components:{TwoStepAuth:N["a"]},props:{u_id:null},methods:{onDone:function(){this.ok()}}},j=V,F=Object(m["a"])(j,R,O,!1,null,null,null),D=F.exports,U={name:"User",components:{VarsEditor:E["a"],UserMailboxAside:M,ActionDownloadVcf:b},props:{u_id:{required:!0,type:null},ug_id:{required:!0,type:null,default:0}},data:function(){return{user:{u_email:null,u_lang:2,vars:[],usergroups:[]},emaildata:{is_popbox:!1,password:""},originStatePopbox:!1,langs:[{label:"dutch",id:"1"},{label:"english",id:"2"},{label:"russian",id:"3"},{label:"ukrainian",id:"4"}]}},computed:{allowEmailSetting:function(){if(!this.user||!this.user.u_email)return!1;if("new"===this.u_id)return!1;var e=this.user.u_email.split("@")[1];return this.$store.getters["pages/getMailhosts"].indexOf(e)>-1}},watch:{u_id:function(e,t){e!==t&&this.load()}},mounted:function(){this.load(),this.$store.dispatch("breadcrumb/updateLast",{label:this.$route.params.u_id})},methods:{new:function(){var e=this;if(this.ug_id&&this.user.usergroups){var t=this.$store.state.usergroups.usergroups.find((function(t){return+t.ug_id===+e.ug_id}));t&&this.user.usergroups.push(t)}this.$nextTick((function(){e.$refs.name.focus()}))},load:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("new"!==this.u_id){e.next=1;break}return this.new(),e.abrupt("return");case 1:return e.next=2,this.$refs.waiter.wait(Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=1,n["a"].getUser({u_id:t.u_id});case 1:t.user=e.sent;case 2:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),save:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=1,this.$refs.observer.validate();case 1:if(t=e.sent,t){e.next=2;break}return this.$refs.propertiesTab.activate(),e.abrupt("return");case 2:return e.next=3,this.$refs.waiter.wait(Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=1,n["a"].saveUser(a.user);case 1:if(t=e.sent,"new"!==a.u_id){e.next=3;break}return e.next=2,a.$router.replace({name:o["O"],params:{u_id:t.u_id,ug_id:a.ug_id},query:a.$route.query});case 2:e.next=4;break;case 3:return e.next=4,a.load();case 4:case"end":return e.stop()}}),e)}))));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onProceed2FA:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.user.is_2fa){e.next=4;break}return e.next=1,this.$dialogs.confirm({okTitle:"DISABLE",message:"Are you sure want to disable 2-Step Verification?"});case 1:if(t=e.sent,"ok"===t.trigger){e.next=2;break}return e.abrupt("return");case 2:return e.next=3,l["a"].disable2FA({u_id:this.u_id});case 3:this.user.is_2fa=!1,e.next=7;break;case 4:return e.next=5,this.$dialogs.show(D,{u_id:this.u_id});case 5:if(a=e.sent,"ok"===a.trigger){e.next=6;break}return e.abrupt("return");case 6:this.user.is_2fa=!0;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onReactions:function(){this.$router.push({name:o["v"],params:{backRoute:!0},query:{react_user_email:this.user.u_email}})}}},q=U,L=(a("d51e"),Object(m["a"])(q,r,s,!1,null,"e873abd8",null));t["default"]=L.exports},f920:function(e,t,a){}}]);
//# sourceMappingURL=chunk-34d9ec9c.70c0c212.js.map