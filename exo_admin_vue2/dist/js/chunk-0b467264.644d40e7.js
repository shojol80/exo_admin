(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0b467264"],{"6b7d":function(e,t,n){"use strict";t["a"]={computed:{showGroupTree:function(){return!("POPUP"===this.$store.getters["app/screenMode"]&&this.$route.meta.hideTreeInPopup)}}}},c0b3:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("app-screen",{scopedSlots:e._u([e.showGroupTree?{key:"aside",fn:function(){return[t("page-group-tree",{staticClass:"mt-2"})]},proxy:!0}:null],null,!0)})},r=[],i=function(){var e=this,t=e._self._c;return t("waiter",{ref:"waiter"},[t("x-tree",{ref:"xtree",attrs:{data:e.tree,options:e.options},on:{click:e.onClick,add:e.onAdd,edit:e.onEdit,delete:e.onDelete}})],1)},o=[],s=(n("a481"),n("7f7f"),n("96cf"),n("3b8d")),u=n("b991"),d=n("e6a4"),c={name:"PageGroupTree",data:function(){return{tree:[],options:{customNodeEdit:!0}}},watch:{$route:function(e,t){this.selectByRoute()}},mounted:function(){this.load(),exoEventBus.$on("exo-api-call:editions/saveEdition",this.load),exoEventBus.$on("exo-api-call:editions/deleteEdition",this.load),exoEventBus.$on("exo-api-call:editions/setDefaultEdition",this.load)},methods:{load:function(){var e=this;d["a"].getExoAdminTree().then((function(t){return e.tree=t})).then(this.selectByRoute)},onAdd:function(e){switch(e.select(),e.data.type){case"root":this.$router.push({name:u["m"],params:{e_id:"new"}});break;case"edition":break}},onEdit:function(e){switch(e.select(),e.data.type){case"root":this.$router.push({name:u["J"]});break;case"edition":this.$router.push({name:u["m"],params:{e_id:e.id}});break}},onDelete:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=1,this.$dialogs.confirmDelete({title:"Delete",message:"Are you sure want to delete ".concat(t.data.type,' "').concat(t.data.text,'"?')});case 1:if(n=e.sent,"ok"===n.trigger){e.next=2;break}return e.abrupt("return");case 2:t.hide(),a=t.data.type,e.next="edition"===a?3:4;break;case 3:return this.$refs.waiter.wait(d["a"].deleteEdition({e_id:t.id})),this.$route.name===u["m"]&&+this.$route.params.e_id===+t.id&&this.$router.replace({name:u["n"]}),e.abrupt("continue",4);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),onClick:function(e){switch(e.data.type){case"root":this.$router.push({name:u["n"]});break;case"edition":this.$router.push({name:u["m"],params:{e_id:e.id}});break}},getParentEdition:function(e){return"edition"===e.data.type?e.id:e.parent?"edition"===e.parent.data.type?e.parent.id:this.getParentEdition(e.parent):null},selectByRoute:function(){var e=this;this.$nextTick((function(){var t=e.$refs.xtree.tree;if(!(t.selected().length>0)){var n=[];n=e.$route.params.pagegroup_id>0?t.find({id:e.$route.params.pagegroup_id,data:{type:"pagegroup"}}):t.find({id:e.$route.params.e_id,data:{type:"edition"}}),n&&0!==n.length||(n=t.find({data:{type:"root"}})),n&&n.length>0&&e.$refs.xtree.selectAndExpand(n[0])}}))}}},p=c,l=n("2877"),h=Object(l["a"])(p,i,o,!1,null,"6fce8a2a",null),f=h.exports,m=n("6b7d"),g={name:"Pages",mixins:[m["a"]],components:{PageGroupTree:f}},x=g,$=Object(l["a"])(x,a,r,!1,null,"57a16167",null);t["default"]=$.exports}}]);
//# sourceMappingURL=chunk-0b467264.644d40e7.js.map