{"version":3,"sources":["webpack:///./src/components/ReactQueryBuilder/ReactQueryBuilder.vue","webpack:///./src/components/ReactQueryBuilder/FieldInput.vue","webpack:///src/components/ReactQueryBuilder/FieldInput.vue","webpack:///./src/components/ReactQueryBuilder/FieldInput.vue?4fcc","webpack:///./src/components/ReactQueryBuilder/FieldInput.vue?fc6e","webpack:///src/components/ReactQueryBuilder/ReactQueryBuilder.vue","webpack:///./src/components/ReactQueryBuilder/ReactQueryBuilder.vue?4390","webpack:///./src/components/ReactQueryBuilder/ReactQueryBuilder.vue?9874","webpack:///./src/components/XQueryBuilder/XQueryBuilder.vue","webpack:///src/components/XQueryBuilder/XQueryBuilder.vue","webpack:///./src/components/XQueryBuilder/XQueryBuilder.vue?2d9f","webpack:///./src/components/XQueryBuilder/XQueryBuilder.vue?37ff","webpack:///./src/components/ReactQueryBuilder/ReactQueryBuilder.vue?cdab","webpack:///./src/components/SendMailable/SendMailable.vue","webpack:///./src/services/api/mailable.js","webpack:///src/components/SendMailable/SendMailable.vue","webpack:///./src/components/SendMailable/SendMailable.vue?0b29","webpack:///./src/components/SendMailable/SendMailable.vue?97d5","webpack:///./src/components/SendMailable/SendMailable.vue?2a5a","webpack:///./src/components/ReactQueryBuilder/FieldInput.vue?29a5","webpack:///./src/components/XQueryBuilder/XQueryBuilder.vue?99dd"],"names":["render","_vm","this","_c","_self","staticClass","attrs","labels","rules","value","on","$event","$emit","staticRenderFns","_g","_b","directives","name","rawName","show","expression","$attrs","$listeners","help","_v","_s","computed","operator","$parent","query","includes","component","components","XQueryBuilder","model","prop","event","props","type","Object","required","forms","Array","data","_this","composeFieldRule","id","label","map","form_id","form","$store","getters","res","form_questions","forEach","fq","find","i","fq_name","push","methods","field","operators","_objectSpread","FieldInput","default","scopedSlots","_u","_l","$scopedSlots","_","key","fn","slotData","_t","$slots","VueQueryBuilder","ref","$icons","send","_ref","invalid","x","sendToOptions","callback","$$v","_ref2","valid","errors","selectForm","some","question","fqt_name","_ref3","form_val","mail","fq_id","$set","class","QBRules","_ref4","groups","_ref5","node","shouldShowCount","count","labelClassName","countClassName","raw","ug_isnewsletter","_e","ug_id","_ref6","email","recipientCount","subject","scheduleOptions","sendSchedule","config","date_scheduled","log","react_id","Api","post","apply","concat","prototype","slice","call","arguments","estimatedRecipients","ReactQueryBuilder","defaultQBRules","dayjs","add","toISOString","text","allowInput","wrap","enableTime","time_24hr","altInput","altFormat","dateFormat","state","usergroups","filter","watch","handler","getEstimatedRecipient","deep","_send","_asyncToGenerator","regeneratorRuntime","mark","_callee2","isValid","mail_params","response","_context2","prev","next","$refs","observer","validate","sent","abrupt","$dialogs","confirm","message","okTitle","trigger","scheduled","waiter","wait","_callee","_context","mailable","$awn","success","JSON","stringify","error_count","warning","stop","_getEstimatedRecipient","_callee3","_context3","mounted"],"mappings":"kHAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,kBAAkB,CAACE,YAAY,sBAAsBC,MAAM,CAAC,OAASL,EAAIM,OAAO,MAAQN,EAAIO,MAAM,MAAQP,EAAIQ,OAAOC,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAIW,MAAM,QAASD,QAE9OE,EAAkB,G,oECFlBb,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,UAAUF,EAAIa,GAAGb,EAAIc,GAAG,CAACC,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAAST,MAAOR,EAAIkB,KAAMC,WAAW,UAAU,UAAUnB,EAAIoB,QAAO,GAAOpB,EAAIqB,aAAanB,EAAG,YAAY,CAACa,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAAST,QAASR,EAAIsB,KAAMH,WAAW,YAAY,CAACnB,EAAIuB,GAAGvB,EAAIwB,GAAGxB,EAAIsB,UAAU,IAE/XV,EAAkB,GCMP,G,oBAAA,CACfI,KAAA,aACAS,SAAA,CACAC,SAAA,WACA,YAAAC,QAAAC,MAAAF,UAEAR,KAAA,WACA,6BAAAW,SAAA,KAAAH,WAEAJ,KAAA,WACA,0BAAAO,SAAA,KAAAH,UACA,0CAEA,gBAAAG,SAAA,KAAAH,UACA,yDADA,MCrBkW,I,wBCQ9VI,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,EAAAA,E,olBCJA,OACfd,KAAA,oBACAe,WAAA,CAAAC,sBACAC,MAAA,CACAC,KAAA,QACAC,MAAA,SAEAC,MAAA,CACA5B,MAAA,CACA6B,KAAAC,OACAC,UAAA,GAEAC,MAAA,CACAH,KAAAI,MACAF,UAAA,IAGAG,KAAA,WACA,OACApC,OAAA,CACA,uBACA,YACA,uBACA,sBAEA,mBACA,qBACA,qBACA,sBACA,gCAIAmB,SAAA,CACAlB,MAAA,eAAAoC,EAAA,KACApC,EAAA,CACA,KAAAqC,iBAAA,CACAC,GAAA,WACAC,MAAA,aAEA,KAAAF,iBAAA,CACAC,GAAA,mBACAC,MAAA,qBAEA,KAAAF,iBAAA,CACAC,GAAA,0BACAC,MAAA,4BAEA,KAAAF,iBAAA,CACAC,GAAA,YACAC,MAAA,eAkBA,OAfA,KAAAN,MAAAO,KAAA,SAAAC,GACA,IAAAC,EAAAN,EAAAO,OAAAC,QAAA,iBAAAH,GACAI,EAAA,GAWA,OAVAH,EAAAI,eAAAC,SAAA,SAAAC,GACAhD,EAAAiD,MAAA,SAAAC,GAAA,OAAAA,EAAAZ,KAAAU,EAAAG,YACAnD,EAAAoD,KACAhB,EAAAC,iBAAA,CACAC,GAAAU,EAAAG,QACAZ,MAAAS,EAAAG,cAKAN,KAEA7C,IAGAqD,QAAA,CACAhB,iBAAA,SAAAiB,GACA,IAAAC,EAAA,CACA,2BACA,kBACA,QACA,YACA,KACA,UAQA,MANA,cAAAD,EAAAhB,KACAiB,EAAA,CACA,2BACA,oBAGAC,EAAA,CACA1B,KAAA,mBACAP,UAAAkC,EACAF,YACAG,QAAA,IACAJ,MC3GyW,ICQrW,G,UAAY,eACd,EACA9D,EACAa,GACA,EACA,KACA,KACA,OAIa,S,6CCnBf,IAAIb,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,oBAAoBF,EAAIa,GAAGb,EAAIc,GAAG,CAACV,YAAY,kBAAkB8D,YAAYlE,EAAImE,GAAG,CAACnE,EAAIoE,GAAIpE,EAAIqE,cAAc,SAASC,EAAEtD,GAAM,MAAO,CAACuD,IAAIvD,EAAKwD,GAAG,SAASC,GAAU,MAAO,CAACzE,EAAI0E,GAAG1D,EAAK,KAAK,KAAKyD,UAAgB,MAAK,IAAO,oBAAoBzE,EAAIoB,QAAO,GAAOpB,EAAIqB,YAAY,CAACrB,EAAIoE,GAAIpE,EAAI2E,QAAQ,SAASL,EAAEtD,GAAM,OAAOhB,EAAI0E,GAAG1D,EAAK,KAAK,CAAC,KAAOA,QAAU,IAEzaJ,EAAkB,G,iCCYP,GACfI,KAAA,gBACAe,WAAA,CACA6C,sBCjBqW,I,wBCQjW9C,EAAY,eACd,EACA/B,EACAa,GACA,EACA,KACA,KACA,MAIa,OAAAkB,E,6CCnBf,W,yDCAA,IAAI/B,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,SAAS,CAAC2E,IAAI,UAAU,CAAC3E,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,iBAAiB,CAACF,EAAI0E,GAAG,kBAAkBxE,EAAG,eAAe,CAACA,EAAG,gBAAgB,CAACG,MAAM,CAAC,MAAQ,OAAO,KAAOL,EAAI8E,OAAOC,KAAK,SAAW,iBAAiBtE,GAAG,CAAC,OAAST,EAAI+E,SAAS,IAAI,GAAG7E,EAAG,SAAS,CAACE,YAAY,aAAa,CAACF,EAAG,qBAAqB,CAAC2E,IAAI,WAAWX,YAAYlE,EAAImE,GAAG,CAAC,CAACI,IAAI,UAAUC,GAAG,SAADQ,GAAmBA,EAAPC,QAAW,MAAO,CAAC/E,EAAG,qBAAqB,CAACG,MAAM,CAAC,MAAQ,GAAG,IAAM,QAAQ6D,YAAYlE,EAAImE,GAAG,CAAC,CAACI,IAAI,UAAUC,GAAG,SAASU,GAAG,MAAO,CAAChF,EAAG,qBAAqB,CAACG,MAAM,CAAC,MAAQ,UAAU,QAAUL,EAAImF,cAAc,YAAc,GAAGlD,MAAM,CAACzB,MAAOR,EAAIqC,KAAM+C,SAAS,SAAUC,GAAMrF,EAAIqC,KAAKgD,GAAKlE,WAAW,cAAc,MAAK,KAAQjB,EAAG,qBAAqB,CAACa,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAAST,MAAoB,SAAbR,EAAIqC,KAAiBlB,WAAW,oBAAoBd,MAAM,CAAC,KAAO,OAAO,MAAQ,yBAAyB6D,YAAYlE,EAAImE,GAAG,CAAC,CAACI,IAAI,UAAUC,GAAG,SAADc,GAAiBA,EAALC,MAAgB,IAATC,EAAMF,EAANE,OAAU,OAAOtF,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,OAAO,YAAc,IAAI,CAACH,EAAG,cAAc,CAACG,MAAM,CAAC,eAAe,SAAS,UAAW,EAAK,OAAQmF,EAAO,IAAa,KAAK,OAAQ,EAAK,OAAS,SAAAC,GAAU,OAAIA,EAAWpC,eAAeqC,MAAK,SAAAC,GAAQ,MAA+B,cAA3BA,EAAStD,KAAKuD,cAA2B3D,MAAM,CAACzB,MAAOR,EAAIiD,KAAMmC,SAAS,SAAUC,GAAMrF,EAAIiD,KAAKoC,GAAKlE,WAAW,UAAUjB,EAAG,0BAA0B,CAACG,MAAM,CAAC,GAAK,sBAAsB,CAACL,EAAIuB,GAAG,iCAAiCvB,EAAIwB,GAAGgE,EAAO,IAAI,iCAAiC,MAAM,MAAK,KAAQtF,EAAG,qBAAqB,CAACa,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAAST,MAAoB,SAAbR,EAAIqC,KAAiBlB,WAAW,oBAAoBd,MAAM,CAAC,MAAQ,wBAAwB,KAAO,SAAS6D,YAAYlE,EAAImE,GAAG,CAAC,CAACI,IAAI,UAAUC,GAAG,SAADqB,GAA4B,IAAhBN,EAAKM,EAALN,MAAOC,EAAMK,EAANL,OAAU,OAAOtF,EAAG,gBAAgB,CAACG,MAAM,CAAC,MAAQ,QAAQ,SAAS,QAAQ,YAAY,UAAU,YAAc,iBAAiB,MAAQkF,EAAM,OAASC,EAAO,UAAYxF,EAAIiD,KAAK,YAAc,EAAE,UAAW,EAAM,QAAUjD,EAAIiD,KAAOjD,EAAI8F,SAAW,IAAI7D,MAAM,CAACzB,MAAOR,EAAI+F,KAAKC,MAAOZ,SAAS,SAAUC,GAAMrF,EAAIiG,KAAKjG,EAAI+F,KAAM,QAASV,IAAMlE,WAAW,mBAAmB,MAAK,KAAQjB,EAAG,qBAAqB,CAACa,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAAST,MAAoB,SAAbR,EAAIqC,KAAiBlB,WAAW,oBAAoBd,MAAM,CAAC,KAAO,cAAc,CAACH,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,SAAS,YAAc,IAAI,CAACH,EAAG,sBAAsB,CAACE,YAAY,OAAO8F,MAAM,CAAE,sBAAuBlG,EAAIiD,MAAO5C,MAAM,CAAC,MAAQL,EAAIiD,KAAO,CAACjD,EAAIiD,KAAKD,SAAW,IAAIf,MAAM,CAACzB,MAAOR,EAAI+F,KAAKI,QAASf,SAAS,SAAUC,GAAMrF,EAAIiG,KAAKjG,EAAI+F,KAAM,UAAWV,IAAMlE,WAAW,mBAAmB,IAAI,GAAGjB,EAAG,qBAAqB,CAACa,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAAST,MAAoB,cAAbR,EAAIqC,KAAsBlB,WAAW,yBAAyBd,MAAM,CAAC,MAAQ,6BAA6B,KAAO,aAAa6D,YAAYlE,EAAImE,GAAG,CAAC,CAACI,IAAI,UAAUC,GAAG,SAAD4B,GAA4B,IAAhBb,EAAKa,EAALb,MAAOC,EAAMY,EAANZ,OAAU,OAAOtF,EAAG,gBAAgB,CAACG,MAAM,CAAC,MAAQ,YAAY,QAAUL,EAAIqG,OAAO,SAAS,QAAQ,YAAY,UAAU,MAAQd,EAAM,OAASC,EAAO,YAAc,GAAGtB,YAAYlE,EAAImE,GAAG,CAAC,CAACI,IAAI,eAAeC,GAAG,SAAD8B,GAA2E,IAA/DC,EAAID,EAAJC,KAAMC,EAAeF,EAAfE,gBAAiBC,EAAKH,EAALG,MAAOC,EAAcJ,EAAdI,eAAgBC,EAAcL,EAAdK,eAAkB,MAAO,CAACzG,EAAG,QAAQ,CAACgG,MAAMQ,GAAgB,CAAC1G,EAAIuB,GAAG,qCAAqCvB,EAAIwB,GAAG+E,EAAKzD,OAAO,sCAAoE,MAA7ByD,EAAKK,IAAIC,gBAAyB3G,EAAG,OAAO,CAACE,YAAY,uBAAuB,CAACJ,EAAIuB,GAAG,8FAA8FvB,EAAI8G,KAAMN,EAAiBtG,EAAG,OAAO,CAACgG,MAAMS,GAAgB,CAAC3G,EAAIuB,GAAG,0CAA0CvB,EAAIwB,GAAGiF,GAAO,yCAAyCzG,EAAI8G,WAAW,MAAK,GAAM7E,MAAM,CAACzB,MAAOR,EAAI+F,KAAKgB,MAAO3B,SAAS,SAAUC,GAAMrF,EAAIiG,KAAKjG,EAAI+F,KAAM,QAASV,IAAMlE,WAAW,mBAAmB,MAAK,KAAQjB,EAAG,qBAAqB,CAACa,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAAST,MAAoB,UAAbR,EAAIqC,KAAkBlB,WAAW,qBAAqBd,MAAM,CAAC,MAAQ,+BAA+B,KAAO,SAAS6D,YAAYlE,EAAImE,GAAG,CAAC,CAACI,IAAI,UAAUC,GAAG,SAADwC,GAA4B,IAAhBzB,EAAKyB,EAALzB,MAAOC,EAAMwB,EAANxB,OAAU,MAAO,CAACtF,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,gBAAgB,MAAQkF,EAAM,OAASC,EAAO,YAAc,GAAGvD,MAAM,CAACzB,MAAOR,EAAI+F,KAAKkB,MAAO7B,SAAS,SAAUC,GAAMrF,EAAIiG,KAAKjG,EAAI+F,KAAM,QAASV,IAAMlE,WAAW,oBAAoB,MAAK,KAAQjB,EAAG,eAAe,CAACE,YAAY,wBAAwBC,MAAM,CAAC,MAAQ,aAAa,YAAc,IAAI,CAAuB,QAArBL,EAAIkH,eAAwBhH,EAAG,YAAY,CAACG,MAAM,CAAC,MAAQ,GAAG,MAAQ,eAAeH,EAAG,OAAO,CAACF,EAAIuB,GAAG,8BAA8BvB,EAAIwB,GAAGxB,EAAIkH,gBAAgB,4BAA4B,GAAGhH,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,UAAU,YAAc,yBAAyB,YAAc,GAAG4B,MAAM,CAACzB,MAAOR,EAAI+F,KAAKoB,QAAS/B,SAAS,SAAUC,GAAMrF,EAAIiG,KAAKjG,EAAI+F,KAAM,UAAWV,IAAMlE,WAAW,kBAAkBjB,EAAG,qBAAqB,CAACG,MAAM,CAAC,MAAQ,uCAAuC,QAAUL,EAAIoH,gBAAgB,YAAc,GAAGnF,MAAM,CAACzB,MAAOR,EAAIqH,aAAcjC,SAAS,SAAUC,GAAMrF,EAAIqH,aAAahC,GAAKlE,WAAW,kBAAkBjB,EAAG,mBAAmB,CAACa,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAAST,MAA4B,aAArBR,EAAIqH,aAA6BlG,WAAW,gCAAgCd,MAAM,CAAC,MAAQ,yBAAyB,OAASL,EAAIsH,OAAO,YAAc,GAAGrF,MAAM,CAACzB,MAAOR,EAAIuH,eAAgBnC,SAAS,SAAUC,GAAMrF,EAAIuH,eAAelC,GAAKlE,WAAW,2BAA2BjB,EAAG,mBAAmB,CAACa,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAAST,MAAOR,EAAIwH,IAAKrG,WAAW,QAAQd,MAAM,CAAC,UAAW,EAAK,MAAQ,MAAM,KAAO,GAAG,YAAc,GAAG4B,MAAM,CAACzB,MAAOR,EAAIwH,IAAKpC,SAAS,SAAUC,GAAMrF,EAAIwH,IAAInC,GAAKlE,WAAW,UAAU,IAAI,MAEjlLP,EAAkB,G,yDCAP,GACXmE,KAAI,SAAAC,EAA4DsC,GAAlDtC,EAARyC,SAAezC,EAAL+B,MAAY/B,EAALiC,MAAYjC,EAALgB,MAAchB,EAAPmB,QAAuBnB,EAAduC,eAC1C,OAAOG,OAAIC,KAAIC,MAARF,OAAG,CAAM,kBAAgBG,OAAApF,MAAAqF,UAAAC,MAAAC,KAAKC,cAEzCC,oBAAmB,SAAA5C,EAAiCgC,GAA1BhC,EAALyB,MAAYzB,EAAL2B,MAAY3B,EAALU,MAAcV,EAAPa,QACtC,OAAOuB,OAAIC,KAAIC,MAARF,OAAG,CAAM,iCAA+BG,OAAApF,MAAAqF,UAAAC,MAAAC,KAAKC,e,wBCiK7C,GACfjH,KAAA,eACAe,WAAA,CAAAoG,0BACA/F,MAAA,CACAqF,SAAA,CACAlF,UAAA,IAGAG,KAAA,WACA,OACA8E,IAAA,KACAN,eAAA,EACAnB,KAAA,CACA0B,SAAA,KAAAA,SACAV,MAAA,KACAE,MAAA,KACAE,QAAA,KACAnB,MAAA,KACAG,QAAAiC,kBAEAb,eAAAc,MACAC,IAAA,OACAC,cACApD,cAAA,CACA,CAAAqD,KAAA,eAAAhI,MAAA,SACA,CAAAgI,KAAA,YAAAhI,MAAA,aACA,CAAAgI,KAAA,OAAAhI,MAAA,SAEA4G,gBAAA,CACA,CAAAoB,KAAA,WAAAhI,MAAA,OACA,CAAAgI,KAAA,WAAAhI,MAAA,aAEA6B,KAAA,QACAgF,aAAA,MACApE,KAAA,OAGAxB,SAAA,CACA6F,OAAA,WACA,OACAmB,YAAA,EACAC,MAAA,EACAC,YAAA,EACAC,WAAA,EACAC,UAAA,EACAC,UAAA,YACAC,WAAA,MAGA1C,OAAA,WACA,YAAAnD,OAAA8F,MAAAC,uBAEAnD,SAAA,WACA,YAAA7C,KAAAI,eAAA6F,QAAA,SAAArF,GAAA,oBAAAA,EAAAxB,KAAAuD,cAGAuD,MAAA,CACAlG,KAAA,WACA,KAAA8C,KAAAC,MAAA,KACA,KAAAD,KAAAI,QAAAiC,kBAEA,cACAgB,QAAA,WACA,KAAAC,0BAGA,cACAD,QAAA,WACA,KAAAC,0BAGA,gBACAD,QAAA,WACA,KAAAC,yBAEAC,MAAA,GAEA,cACAF,QAAA,WACA,KAAAC,0BAGAhH,KAAA,CACA+G,QAAA,WACA,KAAAC,2BAKAzF,QAAA,CACAmB,KAAA,eAAAwE,EAAAC,eAAAC,mBAAAC,MAAA,SAAAC,IAAA,IAAAC,EAAAC,EAAAC,EAAAnH,EAAA,YAAA8G,mBAAAf,MAAA,SAAAqB,GAAA,eAAAA,EAAAC,KAAAD,EAAAE,MAAA,OACA,YAAAzC,IAAA,KAAAuC,EAAAE,KAAA,EACA,KAAAC,MAAAC,SAAAC,WAAA,UAAAR,EAAAG,EAAAM,KACAT,EAAA,CAAAG,EAAAE,KAAA,eAAAF,EAAAO,OAAA,iBAEA,GAAAT,EAAA,CAAA1C,QAAA,KAAApB,KAAAoB,QAAAM,SAAA,KAAA1B,KAAA0B,UACA,mBAAApF,MAAA,aAAAgF,aAAA,CAAA0C,EAAAE,KAAA,eAAAF,EAAAE,KAAA,EACA,KAAAM,SAAAC,QAAA,CACAC,QACA,2NACAC,QAAA,aACA,OAJA,GAAAZ,EAAAC,EAAAM,KAKA,OAAAP,EAAAa,QAAA,CAAAZ,EAAAE,KAAA,eAAAF,EAAAO,OAAA,iBAgBA,MAdA,mBAAAjI,OACAwH,EAAA9C,MAAA,KAAAhB,KAAAgB,OAGA,eAAA1E,OACAwH,EAAA5C,MAAA,KAAAlB,KAAAkB,OAGA,cAAA5E,OACAwH,EAAA7D,MAAA,KAAAD,KAAAC,MACA6D,EAAA1D,QAAA,KAAAJ,KAAAI,SAGA0D,EAAAe,UACA,aAAAvD,aAAA,UAAAE,eAAAwC,EAAAE,KAAA,EAEA,KAAAC,MAAAW,OAAAC,KAAAtB,eAAAC,mBAAAC,MAAA,SAAAqB,IAAA,IAAAjB,EAAA,OAAAL,mBAAAf,MAAA,SAAAsC,GAAA,eAAAA,EAAAhB,KAAAgB,EAAAf,MAAA,cAAAe,EAAAf,KAAA,EACAgB,EAAAlG,KAAA8E,GAAA,OAAAC,EAAAkB,EAAAX,KACA,QAAA1H,EAAA0E,aACA1E,EAAAuI,KAAAC,QAAA,2BAEAxI,EAAA6E,IAAA4D,KAAAC,UAAAvB,EAAA,QACAA,EAAAwB,YAAA,EACA3I,EAAAuI,KAAAK,QACA,oDAGA5I,EAAAuI,KAAAC,QAAA,2BAGAxI,EAAAhC,MAAA,OAAAmJ,GAAA,wBAAAkB,EAAAQ,UAAAT,QACA,wBAAAhB,EAAAyB,UAAA7B,EAAA,mBA7CA5E,IAAA,OAAAwE,EAAA3B,MAAA,KAAAK,WAAA,OAAAlD,EAAA,GA+CAsE,sBAAA,eAAAoC,EAAAjC,eAAAC,mBAAAC,MAAA,SAAAgC,IAAA,IAAA7B,EAAA,OAAAJ,mBAAAf,MAAA,SAAAiD,GAAA,eAAAA,EAAA3B,KAAA2B,EAAA1B,MAAA,UACA,eAAA5H,KAAA,CAAAsJ,EAAA1B,KAAA,eAAA0B,EAAArB,OAAA,SACA,KAAApD,eAAA,UAIA,GAFA,KAAAA,eAAA,MAEA2C,EAAA,GAEA,mBAAAxH,KAAA,CAAAsJ,EAAA1B,KAAA,WACA,KAAAlE,KAAAgB,MAAA,CAAA4E,EAAA1B,KAAA,eAAA0B,EAAArB,OAAA,SACA,KAAApD,eAAA,UAEA2C,EAAA9C,MAAA,KAAAhB,KAAAgB,MAAA,UAGA,cAAA1E,KAAA,CAAAsJ,EAAA1B,KAAA,WACA,KAAAlE,KAAAC,MAAA,CAAA2F,EAAA1B,KAAA,eAAA0B,EAAArB,OAAA,SACA,KAAApD,eAAA,UAEA2C,EAAA7D,MAAA,KAAAD,KAAAC,MACA6D,EAAA1D,QAAA,KAAAJ,KAAAI,QAAA,cAAAwF,EAAA1B,KAAA,EAGAgB,EAAA/C,oBAAA2B,GAAA,YAAA3C,eAAAyE,EAAAtB,KAAA,wBAAAsB,EAAAH,UAAAE,EAAA,mBAvBArC,IAAA,OAAAoC,EAAA7D,MAAA,KAAAK,WAAA,OAAAoB,EAAA,IA0BAuC,QAAA,WACA,KAAAvC,0BC5UoW,I,wBCQhWvH,EAAY,eACd,EACA/B,EACAa,GACA,EACA,KACA,WACA,MAIa,OAAAkB,E,oECnBf,W,oCCAA,W,yDCAA,W","file":"js/chunk-78f709c4.c2f89c85.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('x-query-builder',{staticClass:\"react-query-builder\",attrs:{\"labels\":_vm.labels,\"rules\":_vm.rules,\"value\":_vm.value},on:{\"input\":function($event){return _vm.$emit('input', $event)}}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"field-input\"},[_c('b-input',_vm._g(_vm._b({directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.show),expression:\"show\"}]},'b-input',_vm.$attrs,false),_vm.$listeners)),_c('info-icon',{directives:[{name:\"show\",rawName:\"v-show\",value:(!!_vm.help),expression:\"!!help\"}]},[_vm._v(_vm._s(_vm.help))])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"field-input\">\n        <b-input v-show=\"show\" v-bind=\"$attrs\" v-on=\"$listeners\"></b-input>\n        <info-icon v-show=\"!!help\">{{ help }}</info-icon>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: \"FieldInput\",\n    computed: {\n        operator() {\n            return this.$parent.query.operator;\n        },\n        show() {\n            return !['EMPTY', 'NOT EMPTY',].includes(this.operator)\n        },\n        help() {\n            if (['LIKE', 'NOT LIKE'].includes(this.operator)) {\n                return 'Use %  as wildcard. Example: \"Product%\"'\n            }\n            if (['IN', 'NOT IN'].includes(this.operator)) {\n                return 'Use \",\" as delimiter. Example: \"4423,44334,23423\"'\n            }\n        }\n    }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.field-input {\n    position: relative;\n\n    .form-control {\n        width: 100%;\n        padding-right: 2rem;\n    }\n\n    .info-icon {\n        position: absolute;\n        right: 10px;\n        top: 50%;\n        transform: translateY(-50%);\n    }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FieldInput.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FieldInput.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./FieldInput.vue?vue&type=template&id=f9692498&scoped=true\"\nimport script from \"./FieldInput.vue?vue&type=script&lang=js\"\nexport * from \"./FieldInput.vue?vue&type=script&lang=js\"\nimport style0 from \"./FieldInput.vue?vue&type=style&index=0&id=f9692498&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f9692498\",\n  null\n  \n)\n\nexport default component.exports","<template>\n    <x-query-builder\n        class=\"react-query-builder\"\n        :labels=\"labels\"\n        :rules=\"rules\"\n        :value=\"value\"\n        @input=\"$emit('input', $event)\">\n    </x-query-builder>\n</template>\n\n<script>\n\nimport XQueryBuilder from '@/components/XQueryBuilder/XQueryBuilder'\nimport FieldInput from './FieldInput'\n\nexport default {\n    name: \"ReactQueryBuilder\",\n    components: {XQueryBuilder},\n    model: {\n        prop: 'value',\n        event: 'input'\n    },\n    props: {\n        value: {\n            type: Object,\n            required: true\n        },\n        forms: {\n            type: Array,\n            required: true\n        },\n    },\n    data() {\n        return {\n            labels: {\n                \"matchType\": \"Match Type\",\n                \"matchTypes\": [\n                    {\"id\": \"AND\", \"label\": \"AND\"},\n                    {\"id\": \"OR\", \"label\": \"OR\"}\n                ],\n                \"addRule\": \"Add Rule\",\n                \"removeRule\": \"&times;\",\n                \"addGroup\": \"Add Group\",\n                \"removeGroup\": \"&times;\",\n                \"textInputPlaceholder\": \"value\",\n            },\n        }\n    },\n    computed: {\n        rules() {\n            let rules = [\n                this.composeFieldRule({\n                    id: 'react_id',\n                    label: 'react_id',\n                }),\n                this.composeFieldRule({\n                    id: 'react_edition_id',\n                    label: 'react_edition_id',\n                }),\n                this.composeFieldRule({\n                    id: 'react_form_permalink_id',\n                    label: 'react_form_permalink_id',\n                }),\n                this.composeFieldRule({\n                    id: 'form_name',\n                    label: 'form_name',\n                })\n            ]\n            this.forms.map(form_id => {\n                let form = this.$store.getters['forms/getForm'](form_id)\n                let res = []\n                form.form_questions.forEach(fq => {\n                    if (!rules.find(i => i.id === fq.fq_name)) {\n                        rules.push(\n                            this.composeFieldRule({\n                                id: fq.fq_name,\n                                label: fq.fq_name,\n                            })\n                        )\n                    }\n                })\n                return res\n            })\n            return rules\n        }\n    },\n    methods: {\n        composeFieldRule(field) {\n            let operators = [\n                '=', '<', '>', '<=', '>=', '!=',\n                'LIKE', 'NOT LIKE',\n                'EMPTY',\n                'NOT EMPTY',\n                'IN',\n                'NOT IN'\n            ]\n            if (field.id === 'permalink') {\n                operators = [\n                    '=', '<', '>', '<=', '>=', '!=',\n                    'LIKE', 'NOT LIKE',\n                ]\n            }\n            return {\n                type: \"custom-component\",\n                component: FieldInput,\n                operators: operators,\n                default: '',\n                ...field\n            }\n        }\n    }\n\n}\n</script>\n\n<style lang=\"scss\">\n.react-query-builder {\n    .vqb-rule {\n        .form-inline > label {\n            font-weight: bold;\n            font-style: italic;\n            min-width: 10%;\n            text-align: left;\n            display: block;\n        }\n    }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ReactQueryBuilder.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ReactQueryBuilder.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ReactQueryBuilder.vue?vue&type=template&id=7ed14d22\"\nimport script from \"./ReactQueryBuilder.vue?vue&type=script&lang=js\"\nexport * from \"./ReactQueryBuilder.vue?vue&type=script&lang=js\"\nimport style0 from \"./ReactQueryBuilder.vue?vue&type=style&index=0&id=7ed14d22&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('vue-query-builder',_vm._g(_vm._b({staticClass:\"x-query-builder\",scopedSlots:_vm._u([_vm._l((_vm.$scopedSlots),function(_,name){return {key:name,fn:function(slotData){return [_vm._t(name,null,null,slotData)]}}})],null,true)},'vue-query-builder',_vm.$attrs,false),_vm.$listeners),[_vm._l((_vm.$slots),function(_,name){return _vm._t(name,null,{\"slot\":name})})],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <vue-query-builder v-bind=\"$attrs\" v-on=\"$listeners\" class=\"x-query-builder\">\n        <slot v-for=\"(_, name) in $slots\" :name=\"name\" :slot=\"name\"/>\n        <template v-for=\"(_, name) in $scopedSlots\" :slot=\"name\" slot-scope=\"slotData\">\n            <slot :name=\"name\" v-bind=\"slotData\"/>\n        </template>\n    </vue-query-builder>\n</template>\n\n<script>\n\nimport \"vue-query-builder/dist/VueQueryBuilder.css\"\nimport VueQueryBuilder from \"vue-query-builder\";\n\nexport default {\n    name: \"XQueryBuilder\",\n    components: {\n        VueQueryBuilder,\n    },\n}\n\n</script>\n\n<style lang=\"scss\">\n@import \"src/assets/scss/vue-component\";\n\n.x-query-builder {\n    > .vqb-group {\n        margin-bottom: 0;\n    }\n\n    .vqb-children {\n        .vqb-rule:last-child {\n            margin-bottom: 0;\n        }\n    }\n\n    .vqb-custom-component-wrap {\n        flex: 1 0 auto;\n        margin-right: 1rem;\n    }\n\n    .close {\n        color: #7f7f7f;\n        padding: 0.4rem;\n    }\n\n    .vqb-rule {\n        padding: 0.8rem 1rem;\n    }\n\n    .vqb-group .rule-actions {\n        margin-bottom: 1rem;\n    }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./XQueryBuilder.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./XQueryBuilder.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./XQueryBuilder.vue?vue&type=template&id=5094abb8\"\nimport script from \"./XQueryBuilder.vue?vue&type=script&lang=js\"\nexport * from \"./XQueryBuilder.vue?vue&type=script&lang=js\"\nimport style0 from \"./XQueryBuilder.vue?vue&type=style&index=0&id=5094abb8&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ReactQueryBuilder.vue?vue&type=style&index=0&id=7ed14d22&prod&lang=scss\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('waiter',{ref:\"waiter\"},[_c('div',{staticClass:\"send-mailable\"},[_c('action-toolbar',[_vm._t(\"before_actions\"),_c('action-group',[_c('action-button',{attrs:{\"title\":\"Send\",\"icon\":_vm.$icons.send,\"shortkey\":\"['ctrl', 's']\"},on:{\"action\":_vm.send}})],1)],2),_c('b-card',{staticClass:\"mt-3 mb-0\"},[_c('ValidationObserver',{ref:\"observer\",scopedSlots:_vm._u([{key:\"default\",fn:function({ invalid }){return [_c('ValidationProvider',{attrs:{\"rules\":\"\",\"vid\":\"type\"},scopedSlots:_vm._u([{key:\"default\",fn:function(x){return [_c('x-form-radio-group',{attrs:{\"title\":\"Send to\",\"options\":_vm.sendToOptions,\"labelColsLg\":3},model:{value:(_vm.type),callback:function ($$v) {_vm.type=$$v},expression:\"type\"}})]}}],null,true)}),_c('ValidationProvider',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.type === 'form'),expression:\"type === 'form'\"}],attrs:{\"name\":\"form\",\"rules\":\"required_if:type,form\"},scopedSlots:_vm._u([{key:\"default\",fn:function({ valid, errors }){return _c('x-form-group',{attrs:{\"title\":\"Form\",\"labelColsLg\":3}},[_c('select-form',{attrs:{\"value-format\":\"object\",\"required\":true,\"state\":errors[0] ? false : null,\"forms\":true,\"filter\":selectForm => selectForm.form_questions.some(question => question.type.fqt_name === 'useremail')},model:{value:(_vm.form),callback:function ($$v) {_vm.form=$$v},expression:\"form\"}}),_c('b-form-invalid-feedback',{attrs:{\"id\":\"inputLiveFeedback\"}},[_vm._v(\"\\n                            \"+_vm._s(errors[0])+\"\\n                        \")])],1)}}],null,true)}),_c('ValidationProvider',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.type === 'form'),expression:\"type === 'form'\"}],attrs:{\"rules\":\"required_if:type,form\",\"name\":\"field\"},scopedSlots:_vm._u([{key:\"default\",fn:function({ valid, errors }){return _c('x-form-select',{attrs:{\"title\":\"Field\",\"id-key\":\"fq_id\",\"label-key\":\"fq_name\",\"placeholder\":\"Select a field\",\"valid\":valid,\"errors\":errors,\"disabled\":!_vm.form,\"labelColsLg\":3,\"multiple\":false,\"options\":_vm.form ? _vm.form_val : []},model:{value:(_vm.mail.fq_id),callback:function ($$v) {_vm.$set(_vm.mail, \"fq_id\", $$v)},expression:\"mail.fq_id\"}})}}],null,true)}),_c('ValidationProvider',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.type === 'form'),expression:\"type === 'form'\"}],attrs:{\"name\":\"matchtype\"}},[_c('x-form-group',{attrs:{\"title\":\"Filter\",\"labelColsLg\":3}},[_c('react-query-builder',{staticClass:\"mb-3\",class:{ 'disabled-component': !_vm.form },attrs:{\"forms\":_vm.form ? [_vm.form.form_id] : []},model:{value:(_vm.mail.QBRules),callback:function ($$v) {_vm.$set(_vm.mail, \"QBRules\", $$v)},expression:\"mail.QBRules\"}})],1)],1),_c('ValidationProvider',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.type === 'usergroup'),expression:\"type === 'usergroup'\"}],attrs:{\"rules\":\"required_if:type,usergroup\",\"name\":\"usergroup\"},scopedSlots:_vm._u([{key:\"default\",fn:function({ valid, errors }){return _c('x-form-select',{attrs:{\"title\":\"Usergroup\",\"options\":_vm.groups,\"id-key\":\"ug_id\",\"label-key\":\"ug_name\",\"valid\":valid,\"errors\":errors,\"labelColsLg\":3},scopedSlots:_vm._u([{key:\"option-label\",fn:function({ node, shouldShowCount, count, labelClassName, countClassName }){return [_c('label',{class:labelClassName},[_vm._v(\"\\n                                \"+_vm._s(node.label)+\"\\n                                \"),(node.raw.ug_isnewsletter === '1')?_c('span',{staticClass:\"badge badge-primary\"},[_vm._v(\"\\n                                    Newsletter group\\n                                \")]):_vm._e(),(shouldShowCount)?_c('span',{class:countClassName},[_vm._v(\"\\n                                    (\"+_vm._s(count)+\")\\n                                \")]):_vm._e()])]}}],null,true),model:{value:(_vm.mail.ug_id),callback:function ($$v) {_vm.$set(_vm.mail, \"ug_id\", $$v)},expression:\"mail.ug_id\"}})}}],null,true)}),_c('ValidationProvider',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.type === 'email'),expression:\"type === 'email'\"}],attrs:{\"rules\":\"required_if:type,email|email\",\"name\":\"email\"},scopedSlots:_vm._u([{key:\"default\",fn:function({ valid, errors }){return [_c('x-form-input',{attrs:{\"title\":\"Email address\",\"valid\":valid,\"errors\":errors,\"labelColsLg\":3},model:{value:(_vm.mail.email),callback:function ($$v) {_vm.$set(_vm.mail, \"email\", $$v)},expression:\"mail.email\"}})]}}],null,true)}),_c('x-form-group',{staticClass:\"x-form-group--padding\",attrs:{\"title\":\"Recipients\",\"labelColsLg\":3}},[(_vm.recipientCount==='...')?_c('b-spinner',{attrs:{\"small\":\"\",\"label\":\"calculate\"}}):_c('span',[_vm._v(\"\\n                         \"+_vm._s(_vm.recipientCount)+\"\\n                   \")])],1),_c('x-form-input',{attrs:{\"title\":\"Subject\",\"placeholder\":\"Use default from react\",\"labelColsLg\":3},model:{value:(_vm.mail.subject),callback:function ($$v) {_vm.$set(_vm.mail, \"subject\", $$v)},expression:\"mail.subject\"}}),_c('x-form-radio-group',{attrs:{\"title\":\"Do you want to schedule or send now?\",\"options\":_vm.scheduleOptions,\"labelColsLg\":3},model:{value:(_vm.sendSchedule),callback:function ($$v) {_vm.sendSchedule=$$v},expression:\"sendSchedule\"}}),_c('x-form-date-time',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.sendSchedule === 'schedule'),expression:\"sendSchedule === 'schedule'\"}],attrs:{\"title\":\"Scheduled time to send\",\"config\":_vm.config,\"labelColsLg\":3},model:{value:(_vm.date_scheduled),callback:function ($$v) {_vm.date_scheduled=$$v},expression:\"date_scheduled\"}})]}}])}),_c('x-form-text-area',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.log),expression:\"log\"}],attrs:{\"disabled\":true,\"title\":\"Log\",\"rows\":15,\"labelColsLg\":3},model:{value:(_vm.log),callback:function ($$v) {_vm.log=$$v},expression:\"log\"}})],1)],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Api from \"@/services/api/Api\"\n\nexport default {\n    send({react_id, ug_id, email, fq_id, QBRules, date_scheduled,}, config) {\n        return Api.post('/mailable/send', ...arguments)\n    },\n    estimatedRecipients({ug_id, email, fq_id, QBRules}, config) {\n        return Api.post('/mailable/estimatedRecipients', ...arguments)\n    }\n}\n","<template>\n    <waiter ref=\"waiter\">\n        <div class=\"send-mailable\">\n            <action-toolbar>\n                <slot name=\"before_actions\"></slot>\n                <action-group>\n                    <action-button\n                        title=\"Send\"\n                        :icon=\"$icons.send\"\n                        @action=\"send\"\n                        shortkey=\"['ctrl', 's']\">\n                    </action-button>\n                </action-group>\n            </action-toolbar>\n            <b-card class=\"mt-3 mb-0\">\n                <ValidationObserver ref=\"observer\" v-slot=\"{ invalid }\">\n                    <ValidationProvider rules=\"\" vid=\"type\" v-slot=\"x\">\n                        <x-form-radio-group\n                            title=\"Send to\"\n                            v-model=\"type\"\n                            :options=\"sendToOptions\"\n                            :labelColsLg=\"3\">\n                        </x-form-radio-group>\n                    </ValidationProvider>\n                    <ValidationProvider\n                        v-show=\"type === 'form'\"\n                        name=\"form\"\n                        rules=\"required_if:type,form\">\n                        <x-form-group\n                            title=\"Form\"\n                            :labelColsLg=\"3\"\n                            slot-scope=\"{ valid, errors }\">\n                            <select-form\n                                v-model=\"form\"\n                                value-format=\"object\"\n                                :required=\"true\"\n                                :state=\"errors[0] ? false : null\"\n                                :forms=\"true\"\n                                :filter=\"selectForm => selectForm.form_questions.some(question => question.type.fqt_name === 'useremail')\">\n                            </select-form>\n                            <b-form-invalid-feedback id=\"inputLiveFeedback\">\n                                {{ errors[0] }}\n                            </b-form-invalid-feedback>\n                        </x-form-group>\n                    </ValidationProvider>\n                    <ValidationProvider\n                        v-show=\"type === 'form'\"\n                        rules=\"required_if:type,form\"\n                        name=\"field\">\n                        <x-form-select\n                            title=\"Field\"\n                            v-model=\"mail.fq_id\"\n                            id-key=\"fq_id\"\n                            label-key=\"fq_name\"\n                            placeholder=\"Select a field\"\n                            slot-scope=\"{ valid, errors }\"\n                            :valid=\"valid\"\n                            :errors=\"errors\"\n                            :disabled=\"!form\"\n                            :labelColsLg=\"3\"\n                            :multiple=\"false\"\n                            :options=\"form ? form_val : []\">\n                        </x-form-select>\n                    </ValidationProvider>\n                    <ValidationProvider\n                        v-show=\"type === 'form'\"\n                        name=\"matchtype\">\n                        <x-form-group\n                            title=\"Filter\"\n                            :labelColsLg=\"3\">\n                            <react-query-builder\n                                :class=\"{ 'disabled-component': !form }\"\n                                class=\"mb-3\"\n                                :forms=\"form ? [form.form_id] : []\"\n                                v-model=\"mail.QBRules\">\n                            </react-query-builder>\n                        </x-form-group>\n                    </ValidationProvider>\n                    <ValidationProvider\n                        v-show=\"type === 'usergroup'\"\n                        rules=\"required_if:type,usergroup\"\n                        name=\"usergroup\">\n                        <x-form-select\n                            title=\"Usergroup\"\n                            :options=\"groups\"\n                            id-key=\"ug_id\"\n                            label-key=\"ug_name\"\n                            v-model=\"mail.ug_id\"\n                            slot-scope=\"{ valid, errors }\"\n                            :valid=\"valid\"\n                            :errors=\"errors\"\n                            :labelColsLg=\"3\">\n                            <template\n                                #option-label=\"{ node, shouldShowCount, count, labelClassName, countClassName }\">\n                                <label :class=\"labelClassName\">\n                                    {{ node.label }}\n                                    <span\n                                        v-if=\"node.raw.ug_isnewsletter === '1'\"\n                                        class=\"badge badge-primary\">\n                                        Newsletter group\n                                    </span>\n                                    <span\n                                        v-if=\"shouldShowCount\"\n                                        :class=\"countClassName\">\n                                        ({{ count }})\n                                    </span>\n                                </label>\n                            </template>\n                        </x-form-select>\n                    </ValidationProvider>\n                    <ValidationProvider\n                        v-show=\"type === 'email'\"\n                        rules=\"required_if:type,email|email\"\n                        name=\"email\"\n                        v-slot=\"{ valid, errors }\">\n                        <x-form-input\n                            title=\"Email address\"\n                            v-model=\"mail.email\"\n                            :valid=\"valid\"\n                            :errors=\"errors\"\n                            :labelColsLg=\"3\">\n                        </x-form-input>\n                    </ValidationProvider>\n                    <x-form-group\n                        title=\"Recipients\"\n                        :labelColsLg=\"3\"\n                        class=\"x-form-group--padding\">\n                        <b-spinner v-if=\"recipientCount==='...'\" small label=\"calculate\"></b-spinner>\n                        <span v-else>\n                             {{ recipientCount }}\n                       </span>\n                    </x-form-group>\n                    <x-form-input\n                        title=\"Subject\"\n                        v-model=\"mail.subject\"\n                        placeholder=\"Use default from react\"\n                        :labelColsLg=\"3\"/>\n                    <x-form-radio-group\n                        title=\"Do you want to schedule or send now?\"\n                        v-model=\"sendSchedule\"\n                        :options=\"scheduleOptions\"\n                        :labelColsLg=\"3\">\n                    </x-form-radio-group>\n                    <x-form-date-time\n                        v-show=\"sendSchedule === 'schedule'\"\n                        title=\"Scheduled time to send\"\n                        v-model=\"date_scheduled\"\n                        :config=\"config\"\n                        :labelColsLg=\"3\"/>\n                </ValidationObserver>\n                <x-form-text-area\n                    v-show=\"log\"\n                    :disabled=\"true\"\n                    v-model=\"log\"\n                    title=\"Log\"\n                    :rows=\"15\"\n                    :labelColsLg=\"3\"/>\n            </b-card>\n        </div>\n    </waiter>\n</template>\n\n<script>\nimport dayjs from \"dayjs\";\nimport mailable from \"@/services/api/mailable\";\nimport ReactQueryBuilder from \"@/components/ReactQueryBuilder/ReactQueryBuilder.vue\";\nimport defaultQBRules from \"@/shared/defaultQBRules\";\n\nexport default {\n    name: \"SendMailable\",\n    components: {ReactQueryBuilder},\n    props: {\n        react_id: {\n            required: true\n        }\n    },\n    data() {\n        return {\n            log: null,\n            recipientCount: 0,\n            mail: {\n                react_id: this.react_id,\n                ug_id: null,\n                email: null,\n                subject: null,\n                fq_id: null,\n                QBRules: defaultQBRules(),\n            },\n            date_scheduled: dayjs()\n                .add(0, \"h\")\n                .toISOString(),\n            sendToOptions: [\n                {text: \"Single email\", value: \"email\"},\n                {text: \"Usergroup\", value: \"usergroup\"},\n                {text: \"Form\", value: \"form\"},\n            ],\n            scheduleOptions: [\n                {text: \"Send now\", value: \"now\"},\n                {text: \"Schedule\", value: \"schedule\"}\n            ],\n            type: \"email\",\n            sendSchedule: \"now\",\n            form: null,\n        };\n    },\n    computed: {\n        config() {\n            return {\n                allowInput: true,\n                wrap: false, // set wrap to true only when using 'input-group'\n                enableTime: true,\n                time_24hr: true,\n                altInput: true,\n                altFormat: \"d.m.Y H:i\",\n                dateFormat: \"Z\"\n            };\n        },\n        groups() {\n            return this.$store.state.usergroups.usergroups;\n        },\n        form_val() {\n            return this.form.form_questions.filter(field => field.type.fqt_name === 'useremail')\n        },\n    },\n    watch: {\n        form() {\n            this.mail.fq_id = null\n            this.mail.QBRules = defaultQBRules()\n        },\n        'mail.ug_id': {\n            handler() {\n                this.getEstimatedRecipient();\n            },\n        },\n        'mail.fq_id': {\n            handler() {\n                this.getEstimatedRecipient();\n            },\n        },\n        'mail.QBRules': {\n            handler() {\n                this.getEstimatedRecipient();\n            },\n            deep: true,\n        },\n        'mail.email': {\n            handler() {\n                this.getEstimatedRecipient();\n            },\n        },\n        type: {\n            handler() {\n                this.getEstimatedRecipient();\n            },\n        },\n\n    },\n    methods: {\n        async send() {\n            this.log = null;\n            let isValid = await this.$refs.observer.validate();\n            if (!isValid) return;\n\n            const mail_params = {subject: this.mail.subject, react_id: this.mail.react_id};\n            if (this.type === \"usergroup\" && this.sendSchedule === \"now\") {\n                let response = await this.$dialogs.confirm({\n                    message:\n                        'You have selected \"group\" and send \"now\" for this it is better to use the scheduler. If the group has a large number of recipients it can take a long time and in case of a disconnection not all users get the message.',\n                    okTitle: \"CONTINUE\"\n                });\n                if (response.trigger !== \"ok\") return;\n            }\n            if (this.type === \"usergroup\") {\n                mail_params.ug_id = this.mail.ug_id\n            }\n\n            if (this.type === \"email\") {\n                mail_params.email = this.mail.email\n            }\n\n            if (this.type === \"form\") {\n                mail_params.fq_id = this.mail.fq_id\n                mail_params.QBRules = this.mail.QBRules\n            }\n\n            mail_params.scheduled =\n                this.sendSchedule === \"now\" ? null : this.date_scheduled;\n\n            await this.$refs.waiter.wait(async () => {\n                const response = await mailable.send(mail_params);\n                if (this.sendSchedule !== \"now\") {\n                    this.$awn.success(\"Mail sent to the queue\");\n                } else {\n                    this.log = JSON.stringify(response, null, 4);\n                    if (response.error_count > 0) {\n                        this.$awn.warning(\n                            \"Errors occurred while sending emails, check logs\"\n                        );\n                    } else {\n                        this.$awn.success(\"Mail sent successfully\");\n                    }\n                }\n                this.$emit(\"send\", response);\n            });\n        },\n        async getEstimatedRecipient() {\n            if (this.type === \"email\") {\n                return this.recipientCount = 1\n            }\n            this.recipientCount = '...'\n\n            const mail_params = {}\n\n            if (this.type === \"usergroup\") {\n                if (!this.mail.ug_id) {\n                    return this.recipientCount = 0\n                }\n                mail_params.ug_id = this.mail.ug_id\n            }\n\n            if (this.type === \"form\") {\n                if (!this.mail.fq_id) {\n                    return this.recipientCount = 0\n                }\n                mail_params.fq_id = this.mail.fq_id\n                mail_params.QBRules = this.mail.QBRules\n            }\n\n            this.recipientCount = await mailable.estimatedRecipients(mail_params)\n        }\n    },\n    mounted() {\n        this.getEstimatedRecipient()\n    }\n};\n</script>\n\n<style scoped lang=\"scss\">\n.disabled-component {\n    pointer-events: none;\n    opacity: 0.6;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SendMailable.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SendMailable.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./SendMailable.vue?vue&type=template&id=810e4a8a&scoped=true\"\nimport script from \"./SendMailable.vue?vue&type=script&lang=js\"\nexport * from \"./SendMailable.vue?vue&type=script&lang=js\"\nimport style0 from \"./SendMailable.vue?vue&type=style&index=0&id=810e4a8a&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"810e4a8a\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SendMailable.vue?vue&type=style&index=0&id=810e4a8a&prod&scoped=true&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FieldInput.vue?vue&type=style&index=0&id=f9692498&prod&scoped=true&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./XQueryBuilder.vue?vue&type=style&index=0&id=5094abb8&prod&lang=scss\""],"sourceRoot":""}