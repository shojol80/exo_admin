(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7daf5102"],{"1c82":function(t,e,n){"use strict";n("7327")},2980:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t._self._c;return e("waiter",{ref:"tableWaiter",attrs:{show:t.loading}},[e("action-table",{ref:"table",staticClass:"editions-table",attrs:{name:"Editions","table-type":"server",columns:t.columns,options:t.options},on:{"row-click":t.onRowClick},scopedSlots:t._u([{key:"actions",fn:function(n){return[e("action-group",[e("action-button",{attrs:{title:"New edition",icon:t.$icons.new,shortkey:"['ctrl', 'o']"},on:{action:function(e){return t.onActionNew()}}}),e("action-button",{directives:[{name:"show",rawName:"v-show",value:n.rows&&1===n.rows.length,expression:"props.rows && props.rows.length===1"}],attrs:{title:"Edit edition",icon:t.$icons.edit},on:{action:function(e){return t.onActionEdit(n.rows)}}}),e("action-button",{directives:[{name:"show",rawName:"v-show",value:n.rows&&n.rows.length>0,expression:"props.rows && props.rows.length>0"}],attrs:{title:"Delete edition",icon:t.$icons.delete},on:{action:function(e){return t.onActionDelete(n.rows)}}}),e("action-group-separator"),e("action-button",{attrs:{title:"Reload",icon:t.$icons.reload},on:{action:t.load}}),e("action-group-separator"),e("action-button",{directives:[{name:"show",rawName:"v-show",value:n.rows&&1===n.rows.length,expression:"props.rows && props.rows.length===1"}],attrs:{title:"Set as default",icon:t.$icons.pin},on:{action:function(e){return t.onActionDefault(n.rows)}}})],1)]}},{key:"col-action",fn:function(n){return[e("action-group",{on:{click:function(t){t.stopPropagation()}}},[e("action-button",{attrs:{title:"Set as default",icon:t.$icons.pin},on:{action:function(e){return t.onActionDefault([n.row])}}}),e("action-button",{attrs:{title:"Edit edition",icon:t.$icons.edit},on:{action:function(e){return t.onActionEdit([n.row])}}}),e("action-button",{attrs:{title:"Delete edition",icon:t.$icons.delete},on:{action:function(e){return t.onActionDelete([n.row])}}})],1)]}},{key:"contextmenu",fn:function(n){return[e("x-context-menu-item",{directives:[{name:"show",rawName:"v-show",value:n.rows&&1===n.rows.length,expression:"props.rows && props.rows.length===1"}],attrs:{icon:t.$icons.pin},on:{click:function(e){return t.onActionDefault(n.rows)}}},[t._v("Set as default\n            ")]),e("x-context-menu-item",{directives:[{name:"show",rawName:"v-show",value:n.rows&&1===n.rows.length,expression:"props.rows && props.rows.length===1"}],attrs:{icon:t.$icons.edit},on:{click:function(e){return t.onActionEdit(n.rows)}}},[t._v("Edit\n            ")]),e("x-context-menu-item",{attrs:{icon:t.$icons.delete},on:{click:function(e){return t.onActionDelete(n.rows)}}},[t._v("\n                Delete\n            ")])]}},{key:"e_isdefault",fn:function(n){return[1==n.row.e_isdefault?e("span",{staticClass:"badge badge-secondary"},[t._v("default")]):t._e()]}},{key:"e_date",fn:function(e){return[t._v("\n            "+t._s(t.formatDate(e.row.e_date))+"\n        ")]}}])})],1)},i=[],r=(n("96cf"),n("3b8d")),a=n("2ef0"),s=n("b991"),c=n("e6a4"),u=n("115e"),l=n("5a0c"),d=n.n(l);function f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm";return Object(u["a"])(t)?null:d()(t).format(e)}var w={name:"EditionsTable",props:{},data:function(){return{loading:!1,columns:["col-check","e_id","e_title","e_info","e_isdefault","e_date","col-action"],options:{requestFunction:this.requestFunction,useFilterSearchQuery:!0,useFilterByColumn:!0,filterableColumns:["e_id","e_title","e_info"],sortable:["e_id","e_title"],uniqueKey:"e_id",headings:{e_id:"ID",e_title:"Title",e_info:"Info",e_isdefault:"Default",e_date:"Date created"}}}},watch:{searchQuery:function(){this.debounceQuery(this)}},mounted:function(){this.load()},methods:{formatDate:f,requestFunction:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=1,c["a"].getEditions(e);case 1:return n=t.sent,this.loading=!1,t.abrupt("return",n);case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),load:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$refs.table.refresh();case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),debounceQuery:Object(a["debounce"])((function(t){t.load()}),800),onActionNew:function(){this.$router.push({name:s["m"],params:{e_id:"new"}})},onActionDelete:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var n,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return 1===e.length?(o='Are you sure want to delete edition "'.concat(e[0]["e_title"],'"?'),n=e[0]):(o='Are you sure want to delete "'.concat(e.length,'" editions?'),n={e_id:e.map((function(t){return t["e_id"]}))}),t.next=1,this.$dialogs.confirmDelete({title:"Delete edition",message:o});case 1:if(i=t.sent,"ok"===i.trigger){t.next=2;break}return t.abrupt("return");case 2:return t.next=3,c["a"].deleteEdition(n);case 3:return t.next=4,this.load();case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),onActionEdit:function(t){this.$router.push({name:s["m"],params:{e_id:t[0]["e_id"]}})},onRowClick:function(t){this.onActionEdit([t.row])},onActionDefault:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=1,c["a"].setDefaultEdition({e_id:e[0].e_id});case 1:return t.next=2,this.load();case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},p=w,h=(n("1c82"),n("2877")),m=Object(h["a"])(p,o,i,!1,null,null,null);e["default"]=m.exports},7327:function(t,e,n){}}]);
//# sourceMappingURL=chunk-7daf5102.0ba69e92.js.map