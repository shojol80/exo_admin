{"version":3,"sources":["webpack:///./src/views/forms/FormsTable.vue","webpack:///src/views/forms/FormsTable.vue","webpack:///./src/views/forms/FormsTable.vue?cf3e","webpack:///./src/views/forms/FormsTable.vue?977f","webpack:///./src/components/dialogs/SelectDialog.vue","webpack:///src/components/dialogs/SelectDialog.vue","webpack:///./src/components/dialogs/SelectDialog.vue?551b","webpack:///./src/components/dialogs/SelectDialog.vue?206a","webpack:///./src/shared/transformTree.js","webpack:///./src/views/forms/FormsTable.vue?7a57","webpack:///./src/services/api/groups.js"],"names":["render","_vm","this","_c","_self","ref","staticClass","attrs","columns","options","on","onRowClick","scopedSlots","_u","key","fn","props","$icons","new","$event","onActionNew","directives","name","rawName","value","rows","length","expression","edit","onActionEdit","delete","onActionDelete","group_add","onActionAddToGroup","group_id","group_remove","onActionRemoveFromGroup","reload","load","stopPropagation","row","_v","staticRenderFns","components","ContextMenu","data","group_type","useFilterSearchQuery","useFilterByColumn","filterableColumns","requestFunction","debounce","sortable","uniqueKey","headings","computed","presetForms","Object","values","ECO","forms","preset_form","watch","newVal","oldVal","methods","_requestFunction","_asyncToGenerator","regeneratorRuntime","mark","_callee","params","wrap","_context","prev","next","loading","getForms","abrupt","sent","finish","stop","_x","apply","arguments","$refs","table","refresh","_onActionNew","_callee2","event","_context2","$dialogs","show","SelectDialog","title","tree","default","treeProps","idKey","labelKey","trigger","$router","push","R_FORM_EDIT","form_id","query","preset","form","message","_this","concat","map","confirmDelete","then","deleteForm","_this2","groups","getGroupTree","transformTree","item","addRelation","r_obj","_this3","confirm","okTitle","removeRelation","e","component","_b","localValue","onModalHide","onModalHidden","$dialogsProps","model","callback","$$v","treePropsDefault","mixins","withBModal","Array","multiple","clearable","_objectSpread","mounted","childrenName","removeEmptyChildren","undefined","isArray","_typeof","newItem","keys","deleteGroup","config","Api","post","prototype","slice","call","getGroup","saveGroup"],"mappings":"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","file":"js/chunk-11e2e364.9d375ba0.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('waiter',{ref:\"tableWaiter\"},[_c('action-table',{ref:\"table\",staticClass:\"forms-table\",attrs:{\"name\":'Forms',\"table-type\":\"server\",\"columns\":_vm.columns,\"options\":_vm.options},on:{\"row-click\":_vm.onRowClick},scopedSlots:_vm._u([{key:\"actions\",fn:function(props){return [_c('action-group',[_c('action-button',{attrs:{\"title\":\"New form\",\"icon\":_vm.$icons.new,\"shortkey\":\"['ctrl', 'o']\"},on:{\"action\":function($event){return _vm.onActionNew()}}}),_c('action-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(props.rows && props.rows.length===1),expression:\"props.rows && props.rows.length===1\"}],attrs:{\"title\":\"Edit form\",\"icon\":_vm.$icons.edit},on:{\"action\":function($event){return _vm.onActionEdit(props.rows)}}}),_c('action-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(props.rows && props.rows.length>0),expression:\"props.rows && props.rows.length>0\"}],attrs:{\"title\":\"Delete form\",\"icon\":_vm.$icons.delete},on:{\"action\":function($event){return _vm.onActionDelete(props.rows)}}}),_c('action-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(props.rows && props.rows.length>0),expression:\"props.rows && props.rows.length>0\"}],attrs:{\"title\":\"Add to group ...\",\"icon\":_vm.$icons.group_add},on:{\"action\":function($event){return _vm.onActionAddToGroup(props.rows)}}}),_c('action-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(props.rows && props.rows.length>0 && _vm.group_id>0),expression:\"props.rows && props.rows.length>0 && group_id>0\"}],attrs:{\"title\":\"Remove from this group\",\"icon\":_vm.$icons.group_remove},on:{\"action\":function($event){return _vm.onActionRemoveFromGroup(props.rows)}}}),_c('action-group-separator'),_c('action-button',{attrs:{\"title\":\"Reload\",\"icon\":_vm.$icons.reload},on:{\"action\":_vm.load}})],1)]}},{key:\"col-action\",fn:function(props){return [_c('action-group',{on:{\"click\":function($event){$event.stopPropagation();void 0}}},[_c('action-button',{attrs:{\"title\":\"Delete form\",\"icon\":_vm.$icons.delete},on:{\"action\":function($event){return _vm.onActionDelete([props.row])}}}),_c('action-button',{attrs:{\"title\":\"Add to group\",\"icon\":_vm.$icons.group_add},on:{\"action\":function($event){return _vm.onActionAddToGroup([props.row])}}}),_c('action-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.group_id>0),expression:\"group_id>0\"}],attrs:{\"title\":\"Remove from this group\",\"icon\":_vm.$icons.group_remove},on:{\"action\":function($event){return _vm.onActionRemoveFromGroup([props.row])}}})],1)]}},{key:\"contextmenu\",fn:function(props){return [_c('x-context-menu-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(props.rows && props.rows.length===1),expression:\"props.rows && props.rows.length===1\"}],attrs:{\"icon\":_vm.$icons.edit},on:{\"click\":function($event){return _vm.onActionEdit(props.rows)}}},[_vm._v(\"\\n                Edit\\n            \")]),_c('x-context-menu-item',{attrs:{\"icon\":_vm.$icons.delete},on:{\"click\":function($event){return _vm.onActionDelete(props.rows)}}},[_vm._v(\"\\n                Delete\\n            \")]),_c('x-context-menu-item',{attrs:{\"icon\":_vm.$icons.group_add},on:{\"click\":function($event){return _vm.onActionAddToGroup(props.rows)}}},[_vm._v(\"\\n                Add to group ...\\n            \")]),_c('x-context-menu-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.group_id>0),expression:\"group_id>0\"}],attrs:{\"icon\":_vm.$icons.group_remove},on:{\"click\":function($event){return _vm.onActionRemoveFromGroup(props.rows)}}},[_vm._v(\"\\n                Remove from this group\\n            \")])]}}])})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <waiter ref=\"tableWaiter\">\n        <action-table :name=\"'Forms'\"\n                      ref=\"table\"\n                      table-type=\"server\"\n                      :columns=\"columns\"\n                      :options=\"options\"\n                      class=\"forms-table\"\n                      @row-click=\"onRowClick\">\n            <template #actions=\"props\">\n                <action-group>\n                    <action-button @action=\"onActionNew()\"\n                                   title=\"New form\"\n                                   :icon=\"$icons.new\"\n                                   shortkey=\"['ctrl', 'o']\">\n                    </action-button>\n                    <action-button v-show=\"props.rows && props.rows.length===1\"\n                                   @action=\"onActionEdit(props.rows)\"\n                                   title=\"Edit form\"\n                                   :icon=\"$icons.edit\">\n                    </action-button>\n                    <action-button v-show=\"props.rows && props.rows.length>0\"\n                                   @action=\"onActionDelete(props.rows)\"\n                                   title=\"Delete form\"\n                                   :icon=\"$icons.delete\">\n                    </action-button>\n                    <action-button v-show=\"props.rows && props.rows.length>0\"\n                                   @action=\"onActionAddToGroup(props.rows)\"\n                                   title=\"Add to group ...\"\n                                   :icon=\"$icons.group_add\">\n                    </action-button>\n                    <action-button v-show=\"props.rows && props.rows.length>0 && group_id>0\"\n                                   @action=\"onActionRemoveFromGroup(props.rows)\"\n                                   title=\"Remove from this group\"\n                                   :icon=\"$icons.group_remove\">\n                    </action-button>\n                    <action-group-separator></action-group-separator>\n                    <action-button @action=\"load\"\n                                   title=\"Reload\"\n                                   :icon=\"$icons.reload\">\n                    </action-button>\n                </action-group>\n            </template>\n            <template #col-action=\"props\">\n                <action-group @click.stop=\"void 0\">\n                    <action-button @action=\"onActionDelete([props.row])\"\n                                   title=\"Delete form\"\n                                   :icon=\"$icons.delete\">\n                    </action-button>\n                    <action-button\n                        @action=\"onActionAddToGroup([props.row])\"\n                        title=\"Add to group\"\n                        :icon=\"$icons.group_add\">\n                    </action-button>\n                    <action-button\n                        v-show=\"group_id>0\"\n                        @action=\"onActionRemoveFromGroup([props.row])\"\n                        title=\"Remove from this group\"\n                        :icon=\"$icons.group_remove\">\n                    </action-button>\n                </action-group>\n            </template>\n            <template #contextmenu=\"props\">\n                <x-context-menu-item\n                    v-show=\"props.rows && props.rows.length===1\"\n                    @click=\"onActionEdit(props.rows)\"\n                    :icon=\"$icons.edit\">\n                    Edit\n                </x-context-menu-item>\n                <x-context-menu-item\n                    @click=\"onActionDelete(props.rows)\"\n                    :icon=\"$icons.delete\">\n                    Delete\n                </x-context-menu-item>\n                <x-context-menu-item\n                    @click=\"onActionAddToGroup(props.rows)\"\n                    :icon=\"$icons.group_add\">\n                    Add to group ...\n                </x-context-menu-item>\n                <x-context-menu-item\n                    v-show=\"group_id>0\"\n                    @click=\"onActionRemoveFromGroup(props.rows)\"\n                    :icon=\"$icons.group_remove\">\n                    Remove from this group\n                </x-context-menu-item>\n            </template>\n        </action-table>\n    </waiter>\n</template>\n\n<script>\nimport forms from '@/services/api/forms'\nimport {R_FORM_EDIT} from '@/router/routs'\nimport transformTree from \"@/shared/transformTree\"\nimport groups from '@/services/api/groups'\nimport ContextMenu from '@/components/FileManager/components/blocks/ContextMenu'\nimport SelectDialog from '@/components/dialogs/SelectDialog'\n\nexport default {\n    name: \"FormsTable\",\n    components: {ContextMenu},\n    props: {\n        group_id: null\n    },\n    data() {\n        return {\n            group_type: 'form',\n            columns: [\n                'col-check',\n                'form_id',\n                'form_name',\n                'form_info',\n                'col-action'\n            ],\n            options: {\n                useFilterSearchQuery: true,\n                useFilterByColumn: true,\n                filterableColumns: [\n                    'form_id',\n                    'form_name',\n                    'form_info',\n                ],\n                requestFunction: this.requestFunction,\n                debounce:500,\n                sortable: [\n                    'form_id',\n                    'form_name',\n                    'form_info'\n                ],\n                uniqueKey: 'form_id',\n                headings: {\n                    'form_id': 'ID',\n                    'form_name': 'Name',\n                    'form_info': 'Info',\n                },\n            },\n        }\n    },\n    computed: {\n        presetForms() {\n            return Object.values(this.ECO.forms.preset_form)\n        }\n    },\n    watch: {\n        group_id(newVal, oldVal) {\n            if (newVal !== oldVal) {\n                this.load()\n            }\n        }\n    },\n    methods: {\n        async requestFunction(params) {\n            if (this.group_id && +this.group_id !== 0) {\n                params.group_id = this.group_id\n            }\n            try {\n                this.loading = true;\n                return await forms.getForms(params)\n            } finally {\n                this.loading = false;\n            }\n        },\n\n        load() {\n            this.$refs.table.refresh()\n        },\n\n        async onActionNew() {\n\n            let event = await this.$dialogs.show(SelectDialog, {\n                title: 'Select a predefined form',\n                tree: this.presetForms,\n                default: this.presetForms[0]['name'],\n                treeProps: {\n                    idKey: 'name',\n                    labelKey: 'name',\n                }\n            })\n            if (event.trigger !== 'ok') return\n\n            await this.$router.push({\n                name: R_FORM_EDIT,\n                params: {form_id: 'new', group_id: this.group_id},\n                query: {preset: event.value}\n            })\n        },\n\n        onActionDelete(rows) {\n            let form, message\n            if (rows.length === 1) {\n                message = `Are you sure want to delete form \"${rows[0]['form_name']}\"?`\n                form = rows[0];\n            } else {\n                message = `Are you sure want to delete \"${rows.length}\" forms?`\n                form = {form_id: rows.map(row => row['form_id'])}\n            }\n            this.$dialogs.confirmDelete({\n                title: 'Delete form',\n                message: message\n            }).then(event => {\n                if (event.trigger !== 'ok') return\n                forms.deleteForm(form).then(this.load)\n            })\n\n        },\n\n        onActionEdit(rows) {\n            this.$router.push({name: R_FORM_EDIT, params: {form_id: rows[0]['form_id']}})\n        },\n\n        onActionAddToGroup(rows) {\n            groups.getGroupTree({group_type: this.group_type})\n                .then(data => transformTree(data, {\n                    'group_id': 'id',\n                    'group_name': 'label',\n                    'children': 'children'\n                }, 'children'))\n                .then(data => {\n                    this.$dialogs.show(SelectDialog, {\n                        title: 'Add to group',\n                        tree: data,\n                    }).then(event => {\n                        if (event.trigger !== 'ok') return\n                        const forms = rows.map(item => item['form_id']);\n                        groups.addRelation({\n                            group_type: this.group_type,\n                            r_obj: forms,\n                            group_id: event.value\n                        }).then(() => this.load())\n                    })\n                });\n        },\n\n        onActionRemoveFromGroup(rows) {\n            if (rows.length === 0) return\n            let message = rows.length > 1 ? `Do you want remove <b>${rows.length}</b> forms from this group?` : `Do you want remove form <b>${rows[0]['form_name']}</b> from this group?`\n            this.$dialogs.confirm({\n                okTitle: 'REMOVE',\n                message\n            }).then(event => {\n                if (event.trigger !== 'ok') return\n                const forms = rows.map(item => item['form_id']);\n                groups.removeRelation({\n                    group_type: this.group_type,\n                    r_obj: forms,\n                    group_id: this.group_id\n                })\n                    .then(() => this.load())\n            })\n        },\n\n        onRowClick(e) {\n            this.onActionEdit([e.row])\n        }\n    },\n\n}\n</script>\n\n<style lang=\"scss\">\n\n.forms-table {\n\n    .VueTables__search {\n        //margin-left: auto;\n        display: flex;\n    }\n\n    &__search {\n        min-width: 250px;\n    }\n\n    .col-form_id {\n        width: 80px;\n    }\n\n    .col-form_name {\n        width: 200px\n    }\n\n    .col-form_info {\n        max-width: 150px;\n    }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FormsTable.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FormsTable.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./FormsTable.vue?vue&type=template&id=03696f64\"\nimport script from \"./FormsTable.vue?vue&type=script&lang=js\"\nexport * from \"./FormsTable.vue?vue&type=script&lang=js\"\nimport style0 from \"./FormsTable.vue?vue&type=style&index=0&id=03696f64&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('dialog-modal',_vm._b({ref:\"modal\",attrs:{\"ok-disabled\":!_vm.localValue},on:{\"hide\":_vm.onModalHide,\"hidden\":_vm.onModalHidden}},'dialog-modal',_vm.$dialogsProps,false),[_c('x-select',_vm._b({attrs:{\"multiple\":false,\"options\":_vm.tree},model:{value:(_vm.localValue),callback:function ($$v) {_vm.localValue=$$v},expression:\"localValue\"}},'x-select',_vm.treePropsDefault,false))],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <dialog-modal\n        v-bind=\"$dialogsProps\"\n        @hide=\"onModalHide\"\n        @hidden=\"onModalHidden\"\n        :ok-disabled=\"!localValue\"\n        ref=\"modal\">\n        <x-select v-model=\"localValue\" :multiple=\"false\" :options=\"tree\" v-bind=\"treePropsDefault\"/>\n    </dialog-modal>\n</template>\n\n<script>\n\nimport withBModal from \"@modules/dialogs/mixins/withBModal\";\n\nexport default {\n    name: \"SelectDialog\",\n    mixins: [withBModal],\n    props: {\n        tree: Array,\n        multiple: false,\n        default: null,\n        treeProps: {\n            default() {\n                return {\n                    clearable: false\n                }\n            }\n        }\n    },\n    computed: {\n        treePropsDefault() {\n            return {\n                ...{\n                    clearable: false\n                },\n                ...this.treeProps\n            }\n        }\n    },\n    mounted() {\n        this.localValue = this.default ? this.default : null;\n    },\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SelectDialog.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SelectDialog.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./SelectDialog.vue?vue&type=template&id=2504ad0b\"\nimport script from \"./SelectDialog.vue?vue&type=script&lang=js\"\nexport * from \"./SelectDialog.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","function transformTree(tree, params, childrenName, removeEmptyChildren = false) {\n    if (!Array.isArray(tree) && typeof tree === 'object') {\n        tree = Object.values(tree)\n    }\n    return tree.map(item => {\n        let newItem = {}\n        Object.keys(params).map(key => {\n            if (key === childrenName) {\n                if (!removeEmptyChildren && item[key].length === 0) return\n                return newItem[params[key]] = transformTree(item[key], params, childrenName)\n            }\n            return newItem[params[key]] = item[key]\n        })\n        return newItem\n    })\n}\n\nexport default transformTree;\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FormsTable.vue?vue&type=style&index=0&id=03696f64&prod&lang=scss\"","import Api from \"@/services/api/Api\"\n\nexport default {\n\n    deleteGroup(params, config) {\n        return Api.post('/groups/deleteGroup', ...arguments)\n    },\n\n    getGroup(params, config) {\n        return Api.post('/groups/getGroup', ...arguments)\n    },\n\n    saveGroup(params, config) {\n        return Api.post('/groups/saveGroup', ...arguments)\n    },\n\n    getGroupTree(params, config) {\n        return Api.post('/groups/getGroupTree', ...arguments)\n    },\n    removeRelation(params, config) {\n        return Api.post('/groups/removeRelation', ...arguments)\n    },\n\n    addRelation(params, config) {\n        return Api.post('/groups/addRelation', ...arguments)\n    },\n\n\n}\n"],"sourceRoot":""}