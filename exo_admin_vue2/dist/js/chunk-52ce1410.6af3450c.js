(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-52ce1410"],{"154d":function(t,e,n){},"38e7":function(t,e,n){"use strict";n("96cf");var r=n("3b8d"),o=n("b991"),i=n("b84e"),s=n("f3b3"),a=n("8934"),c=n("6658");e["a"]={methods:{reactEdit:function(t){this.$router.push({name:o["w"],params:{react_id:t[0].react_id}})},reactBrowse:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var n,r,o=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},t.next=1,Object(a["a"])(e[0].react_id,n);case 1:if(r=t.sent,!r){t.next=2;break}return t.next=2,Object(c["a"])(r);case 2:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),reactClone:function(t){this.$awn.alert("Not implemented!")},reactDelete:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var n,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return 1===e.length?(r='Are you sure want to delete reaction "'.concat(e[0]["react_title"],'"?'),n=e[0]):(r='Are you sure want to delete "'.concat(e.length,'" reactions?'),n={react_id:e.map((function(t){return t["react_id"]}))}),t.next=1,this.$dialogs.confirmDelete({title:"Delete reaction",message:r});case 1:if(o=t.sent,"ok"===o.trigger){t.next=2;break}return t.abrupt("return");case 2:return t.next=3,i["a"].deleteReact(n);case 3:if(!this.load){t.next=4;break}return t.next=4,this.load();case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),reactNew:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=1,this.$dialogs.show(s["a"],{forms:e});case 1:if(n=t.sent,"ok"===n.trigger&&n.value){t.next=2;break}return t.abrupt("return");case 2:this.$router.push({name:o["w"],params:{react_id:"new"},query:n.value});case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}}},"5c61":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t._self._c;return e("app-screen",[e("div",{staticClass:"controller-view"},[e("controller",{attrs:{container:t.container}})],1)])},o=[],i=(n("55dd"),function(){var t=this,e=t._self._c;return e("fragment",[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isParentView,expression:"isParentView"}],staticClass:"controller"},[e("waiter",{ref:"waiter"},[e("action-toolbar",[e("action-group",[t._t("actionBefore"),e("action-dropdown",{attrs:{icon:t.$icons.add,title:"Add items",disabled:0===t.forms.length},scopedSlots:t._u([{key:"dropdown",fn:function(){return[e("b-dropdown-item",{on:{click:t.addNewItem}},[t._v("Add new item")]),e("b-dropdown-item",{on:{click:t.addItems}},[t._v("Select existing item")])]},proxy:!0}])}),e("action-button",{attrs:{title:"Reload",icon:t.$icons.reload},on:{action:t.reload}}),e("action-button",{attrs:{title:"Setup container",icon:t.$icons.setup},on:{action:t.setup}}),e("action-group-separator"),e("action-dropdown",{attrs:{icon:t.$icons.sort,title:"Sort items"},scopedSlots:t._u([{key:"dropdown",fn:function(){return[e("b-dropdown-item",{on:{click:function(e){return t.sort("react_title","asc")}}},[t._v("By name, A->Z\n                            ")]),e("b-dropdown-item",{on:{click:function(e){return t.sort("react_title","desc")}}},[t._v("By name, Z->Z\n                            ")]),e("b-dropdown-item",{on:{click:function(e){return t.sort("react_date_changed","asc")}}},[t._v("By last modify day, 0->9\n                            ")]),e("b-dropdown-item",{on:{click:function(e){return t.sort("react_date_changed","desc")}}},[t._v("By last modify day, 9->0\n                            ")])]},proxy:!0}])}),e("action-button",{attrs:{title:"Collapse/Expand",icon:t.$icons.collapse},on:{action:function(e){t.collapsed=!t.collapsed}}}),e("action-group-separator"),e("action-form-setup"),e("action-form-related-reacts"),e("action-open-holder")],2)],1),e("react-nestable",{attrs:{"key-prop":"$int_id","collapsed-items":t.collapsed,reacts:t.itemsTree,"max-depth":t.maxDepth},on:{change:t.save}})],1)],1),e("keep-alive",[e("router-view")],1),e("breadcrumb-portal",{attrs:{disabled:!t.isParentView}},[e("info-icon",[e("table",[e("tr",[e("th",[t._v("container:")]),e("td",[t._v(t._s(t.container))])])])])],1)],1)}),s=[],c=(n("96cf"),n("3b8d")),l=(n("7f7f"),function(){var t=this,e=t._self._c;return e("x-nestable",t._g(t._b({attrs:{value:t.reacts},on:{input:function(e){return t.$emit("input",e)}},scopedSlots:t._u([{key:"default",fn:function(n){return e("x-nestable-handle",t._b({},"x-nestable-handle",n,!1),[e("template",{slot:"content"},[e("react-nestable-row",{attrs:{item:n.item}})],1)],2)}},{key:"placeholder",fn:function(){return[t._v('\n        Press "+" to add items to this group.\n    ')]},proxy:!0}])},"x-nestable",t.$attrs,!1),t.$listeners))}),u=[],d=function(){var t=this,e=t._self._c;return e("vue-nestable",t._g(t._b({scopedSlots:t._u([t._l(t.$scopedSlots,(function(e,n){return{key:n,fn:function(e){return[t._t(n,null,null,e)]}}}))],null,!0)},"vue-nestable",t.$attrs,!1),t.$listeners),[t._l(t.$slots,(function(e,n){return t._t(n,null,{slot:n})}))],2)},h=[],p=(n("ac6a"),n("cadf"),n("456d"),function(){var t=this,e=t._self._c;return e("div",{class:["nestable","nestable-".concat(t.group),t.rtl?"nestable-rtl":""]},[e("ol",{staticClass:"nestable-list nestable-group"},[t.listIsEmpty?e("Placeholder",{attrs:{options:t.itemOptions}},[t._t("placeholder",(function(){return[t._v("\n        No content\n      ")]}))],2):t._e(),t._l(t.items,(function(n,r){return[e("NestableItem",{key:n[t.keyProp],attrs:{index:r,item:n,options:t.itemOptions},scopedSlots:t._u([t._l(Object.keys(t.$scopedSlots),(function(e){return{key:e,fn:function(n){return[t._t(e,null,null,n)]}}}))],null,!0)})]}))],2),t.dragItem?[e("div",{staticClass:"nestable-drag-layer"},[e("ol",{staticClass:"nestable-list",style:t.listStyles},[e("NestableItem",{attrs:{item:t.dragItem,options:t.itemOptions,"is-copy":!0},scopedSlots:t._u([t._l(Object.keys(t.$scopedSlots),(function(e){return{key:e,fn:function(n){return[t._t(e,null,null,n)]}}}))],null,!0)})],1)])]:t._e()],2)}),m=[],f=(n("8e6e"),n("bd86")),g=(n("6b54"),n("c5f6"),function(){var t=this,e=t._self._c;return e("li",{class:t.itemClasses},[e("div",{staticClass:"nestable-item-content",on:{mouseenter:t.onMouseEnter,mouseleave:t.onMouseLeave,mousemove:t.onMouseMove}},[t._t("default",null,{index:t.index,item:t.item,isChild:t.isChild,collapsed:t.collapsedNested,hasChildren:t.hasChildren,collapse:t.onCollapseNested})],2),t.hasChildren?e("ol",{staticClass:"nestable-list",class:{collapsed:t.collapsedNested}},[t._l(t.item[t.options.childrenProp],(function(n,r){return[e("NestableItem",{key:n[t.keyProp],attrs:{item:n,index:r,options:t.options,"is-copy":t.isCopy,"is-child":""},scopedSlots:t._u([t._l(Object.keys(t.$scopedSlots),(function(e){return{key:e,fn:function(n){return[t._t(e,null,null,n)]}}}))],null,!0)})]}))],2):t._e()])}),b=[],v=n("75fc"),y=n("7618");n("ac4d"),n("5df3");function _(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=w(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}function w(t,e){if(t){if("string"==typeof t)return P(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(t,e):void 0}}function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var x={},k={methods:{registerNestable:function(t){var e=this._getByGroup(t.group);e.onDragStartListeners.push(t.onDragStart),e.onMouseEnterListeners.push(t.onMouseEnter),e.onMouseMoveListeners.push(t.onMouseMove)},notifyDragStart:function(t,e,n){var r,o=this._getByGroup(t),i=_(o.onDragStartListeners);try{for(i.s();!(r=i.n()).done;){var s=r.value;s(e,n)}}catch(a){i.e(a)}finally{i.f()}},notifyMouseEnter:function(t,e,n,r){var o,i=this._getByGroup(t),s=_(i.onMouseEnterListeners);try{for(s.s();!(o=s.n()).done;){var a=o.value;a(e,n,r)}}catch(c){s.e(c)}finally{s.f()}},notifyMouseMove:function(t,e){var n,r=this._getByGroup(t),o=_(r.onMouseMoveListeners);try{for(o.s();!(n=o.n()).done;){var i=n.value;i(e)}}catch(s){o.e(s)}finally{o.f()}},_getByGroup:function(t){return x[t]||(x[t]={onDragStartListeners:[],onMouseEnterListeners:[],onMouseMoveListeners:[],onDragStart:[],dragItem:null}),x[t]}}},O={name:"NestableItem",mixins:[k],props:{item:{type:Object,required:!0,default:function(){return{}}},index:{type:Number,required:!1,default:null},isChild:{type:Boolean,required:!1,default:!1},isCopy:{type:Boolean,required:!1,default:!1},options:{type:Object,required:!0,default:function(){return{}}}},inject:["listId","group","keyProp","bus"],data:function(){return{breakPoint:null,moveDown:!1,collapsedNested:!1}},created:function(){var t=this;this.bus.$on("toggle-collapse",(function(e){return t.collapsedNested=e}))},computed:{isDragging:function(){var t=this.options.dragItem;return!this.isCopy&&t&&t[this.options.keyProp]===this.item[this.options.keyProp]},hasChildren:function(){return this.item[this.options.childrenProp]&&this.item[this.options.childrenProp].length>0},hasHandle:function(){return!!this.$scopedSlots.handler},normalizedClassProp:function(){var t=this.item[this.options.classProp];return t?Array.isArray(t)?t:("undefined"===typeof a||Object(y["a"])(a),[t]):[]},itemClasses:function(){var t=this.isDragging?["is-dragging"]:[];return["nestable-item".concat(this.isCopy?"-copy":""),"nestable-item".concat(this.isCopy?"-copy":"","-").concat(this.item[this.options.keyProp])].concat(t,Object(v["a"])(this.normalizedClassProp))}},methods:{onCollapseNested:function(t){this.collapsedNested=!this.collapsedNested},onMouseEnter:function(t){if(this.options.dragItem){if(!t.movementY)return this.sendNotification(t);this.moveDown=t.movementY>0,this.breakPoint=t.srcElement.getBoundingClientRect().height/2}},onMouseLeave:function(){this.breakPoint=null},onMouseMove:function(t){if(this.breakPoint){var e=t.offsetY-this.breakPoint;this.moveDown&&e<this.breakPoint/4||!this.moveDown&&e>-this.breakPoint/4||this.sendNotification(t)}},sendNotification:function(t){this.breakPoint=null;var e=this.item||this.$parent.item;this.notifyMouseEnter(this.group,t,this.listId,e)}}},C=O,I=n("2877"),$=Object(I["a"])(C,g,b,!1,null,null,null),j=$.exports,D=function(){var t=this,e=t._self._c;return e("li",[e("div",{staticClass:"nestable-list-empty",on:{mouseenter:t.onMouseEnter}},[t._t("default")],2)])},M=[],S={name:"Placeholder",mixins:[k],props:{index:{type:Number,required:!1,default:null},options:{type:Object,required:!1,default:function(){return{}}}},inject:["listId","group"],computed:{isDragging:function(){var t=this.options.dragItem;return t}},methods:{onMouseEnter:function(t){this.options.dragItem&&this.notifyMouseEnter(this.group,t,this.listId,null)}}},E=S,R=Object(I["a"])(E,D,M,!1,null,null,null),N=R.exports,A={methods:{getPathById:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.items,r=[];return n.every((function(n,o){if(n[e.keyProp]===t)r.push(o);else if(n[e.childrenProp]){var i=e.getPathById(t,n[e.childrenProp]);i.length&&(r=r.concat(o).concat(i))}return 0===r.length})),r},getItemByPath:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.items,r=null;return t.forEach((function(t){var o=r&&r[e.childrenProp]?r[e.childrenProp]:n;r=o[t]})),r},getItemDepth:function(t){var e=1;if(t[this.childrenProp]&&t[this.childrenProp].length>0){var n=t[this.childrenProp].map(this.getItemDepth);e+=Math.max.apply(Math,Object(v["a"])(n))}return e},getSplicePath:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},r=e.numToRemove||0,o=e.itemsToInsert||[],i=t.length-1,s=n;return t.forEach((function(t,n){if(n===i)s.$splice=[[t,r].concat(Object(v["a"])(o))];else{var a={};s[t]=Object(f["a"])({},e.childrenProp,a),s=a}})),n},getRealNextPath:function(t,e){var n=t.length-1,r=e.length-1;if(t.length<e.length){var o=!1;return e.map((function(i,s){return o?s===r?i+1:i:"number"!==typeof t[s]?i:e[s]>t[s]&&s===n?(o=!0,i-1):i}))}if(t.length===e.length&&e[r]>t[r]){var i=this.getItemByPath(e);if(i[this.childrenProp]&&i[this.childrenProp].length&&!this.isCollapsed(i))return e.slice(0,-1).concat(e[r]-1).concat(0)}return e}}},B={methods:{hook:function(t,e){if(!this.hooks[t])return!0;var n=this.hooks[t](e);return n||void 0===n}}},T=n("46c3"),q=n.n(T),V=n("a026");function L(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function F(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?L(Object(n),!0).forEach((function(e){Object(f["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var H=function(t,e){return t.closest(e)},X=function(t){var e=t.getBoundingClientRect();return{top:Math.round(e.top),left:Math.round(e.left)}},Y=function(t,e){return{transform:"translate("+t+"px, "+e+"px)"}},G=function(t,e){return t.map((function(t){return F(F({},t),{},Object(f["a"])({},e,t[e]?G(t[e],e):[]))}))};function K(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function z(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?K(Object(n),!0).forEach((function(e){Object(f["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Z={name:"VueNestable",components:{NestableItem:j,Placeholder:N},mixins:[A,k,B],props:{value:{type:Array,required:!0,default:function(){return[]}},threshold:{type:Number,required:!1,default:30},maxDepth:{type:Number,required:!1,default:10},keyProp:{type:String,required:!1,default:"id"},classProp:{type:String,required:!1,default:null},group:{type:[String,Number],required:!1,default:function(){return Math.random().toString(36).slice(2)}},childrenProp:{type:String,required:!1,default:"children"},collapsed:{type:Boolean,required:!1,default:!1},collapsedItems:{type:Boolean,required:!1,default:!1},hooks:{type:Object,required:!1,default:function(){return{}}},rtl:{type:Boolean,required:!1,default:!1}},provide:function(){return{listId:this.listId,group:this.group,keyProp:this.keyProp,childrenProp:this.childrenProp,onDragEnd:this.onDragEnd,bus:this.bus}},data:function(){return{bus:new V["default"],items:[],itemsOld:null,dragItem:null,mouse:{last:{x:0},shift:{x:0}},el:null,elCopyStyles:null,isDirty:!1,collapsedGroups:[],listId:Math.random().toString(36).slice(2)}},computed:{listIsEmpty:function(){return 0===this.items.length},itemOptions:function(){return{dragItem:this.dragItem,keyProp:this.keyProp,classProp:this.classProp,childrenProp:this.childrenProp}},listStyles:function(){var t=document.querySelector(".nestable-"+this.group+" .nestable-item-"+this.dragItem[this.keyProp]),e={};return t&&(e.width="".concat(t.clientWidth,"px")),this.elCopyStyles&&(e=z(z({},e),this.elCopyStyles)),e}},watch:{collapsedItems:function(t){this.bus.$emit("toggle-collapse",t)},value:{deep:!0,immediate:!0,handler:function(){this.items=G(this.value,this.childrenProp),this.isDirty=!1}}},created:function(){this.registerNestable(this)},beforeDestroy:function(){this.stopTrackMouse()},methods:{startTrackMouse:function(){document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onDragEnd),document.addEventListener("touchend",this.onDragEnd),document.addEventListener("touchcancel",this.onDragEnd),document.addEventListener("keydown",this.onKeyDown)},stopTrackMouse:function(){document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onDragEnd),document.removeEventListener("touchend",this.onDragEnd),document.removeEventListener("touchcancel",this.onDragEnd),document.removeEventListener("keydown",this.onKeyDown),this.elCopyStyles=null},onDragStart:function(t,e){var n=this;t&&(t.preventDefault(),t.stopPropagation()),this.el=H(t.target,".nestable-item"),this.startTrackMouse(),this.dragItem=e,this.itemsOld=this.items,this.$nextTick((function(){n.onMouseMove(t)}))},onDragEnd:function(t,e){t&&t.preventDefault(),this.stopTrackMouse(),this.el=null,e?this.dragRevert():this.dragApply()},onKeyDown:function(t){27===t.which&&this.onDragEnd(null,!0)},getXandYFromEvent:function(t){var e=t.clientX,n=t.clientY,r=t.targetTouches;if(r){var o=r[0];e=o.clientX,n=o.clientY;var i=new Event("mouseenter"),s=document.elementFromPoint(e,n),a=s&&(s.closest(".nestable-item-content")||s.closest(".nestable-list-empty"));a&&a.dispatchEvent(i)}return{clientX:e,clientY:n}},onMouseMove:function(t){t&&t.preventDefault();var e=this.getXandYFromEvent(t),n=e.clientX,r=e.clientY;0===this.mouse.last.x&&(this.mouse.last.x=n);var o=Y(n,r),i=document.querySelector(".nestable-"+this.group+" .nestable-drag-layer");if(i){var s=i.getBoundingClientRect(),a=s.top,c=s.left,l=document.querySelector(".nestable-"+this.group+" .nestable-drag-layer > .nestable-list");if(this.elCopyStyles){if(this.elCopyStyles=z(z({},this.elCopyStyles),o),l)for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&(l.style[u]=o[u]);var d=this.rtl?this.mouse.last.x-n:n-this.mouse.last.x;d>=0&&this.mouse.shift.x>=0||d<=0&&this.mouse.shift.x<=0?this.mouse.shift.x+=d:this.mouse.shift.x=0,this.mouse.last.x=n,Math.abs(this.mouse.shift.x)>this.threshold&&(this.mouse.shift.x>0?this.tryIncreaseDepth(this.dragItem):this.tryDecreaseDepth(this.dragItem),this.mouse.shift.x=0)}else{var h=X(this.el);this.elCopyStyles=z({marginTop:"".concat(h.top-r-a,"px"),marginLeft:"".concat(h.left-n-c,"px")},o)}}},moveItem:function(t){var e=t.dragItem,n=t.pathFrom,r=t.pathTo,o=this.getRealNextPath(n,r),i=this.getSplicePath(n,{numToRemove:1,childrenProp:this.childrenProp}),s=this.getSplicePath(o,{numToRemove:0,itemsToInsert:[e],childrenProp:this.childrenProp});this.hook("beforeMove",{dragItem:e,pathFrom:n,pathTo:o})&&(this.items=q()(this.items,i),this.items=q()(this.items,s),this.isDirty=!0,this.pathTo=o,this.$emit("input",this.items))},tryIncreaseDepth:function(t){var e=this.getPathById(t[this.keyProp]),n=e[e.length-1],r=e.length+this.getItemDepth(t);if(n>0&&r<=this.maxDepth){var o=this.getItemByPath(e.slice(0,-1).concat(n-1));if(o[this.childrenProp]&&(!o[this.childrenProp].length||!this.isCollapsed(o))){var i=e.slice(0,-1).concat(n-1).concat(o[this.childrenProp].length);this.moveItem({dragItem:t,pathFrom:e,pathTo:i})}}},tryDecreaseDepth:function(t){var e=this.getPathById(t[this.keyProp]),n=e[e.length-1];if(e.length>1){var r=this.getItemByPath(e.slice(0,-1));if(n+1===r[this.childrenProp].length){var o=e.slice(0,-1);o[o.length-1]+=1,this.moveItem({dragItem:t,pathFrom:e,pathTo:o})}}},onMouseEnter:function(t,e,n){t&&(t.preventDefault(),t.stopPropagation());var r=this.dragItem;if(r&&(null===n||r[this.keyProp]!==n[this.keyProp])){var o=this.getPathById(r[this.keyProp]);if(e===this.listId||0!==o.length){var i;i=null===n?o.length>0?[]:[0]:this.getPathById(n[this.keyProp]);var s=this.getRealNextPath(o,i).length+(this.getItemDepth(r)-1);if(!(s>this.maxDepth)){var a={};if(this.collapsed&&o.length>1){var c=this.getItemByPath(o.slice(0,-1));1===c[this.childrenProp].length&&(a=this.onToggleCollapse(c,!0))}this.moveItem({dragItem:r,pathFrom:o,pathTo:i},a)}}}},isCollapsed:function(t){return!!(this.collapsedGroups.indexOf(t[this.keyProp])>-1^this.collapsed)},dragApply:function(){this.$emit("change",this.dragItem,{items:this.items,pathTo:this.pathTo}),this.pathTo=null,this.itemsOld=null,this.dragItem=null,this.isDirty=!1},dragRevert:function(){this.$emit("input",this.itemsOld),this.pathTo=null,this.itemsOld=null,this.dragItem=null,this.isDirty=!1}}},J=Z,U=Object(I["a"])(J,p,m,!1,null,null,null),W=U.exports,Q=function(){var t=this,e=t._self._c;return e("div",{staticClass:"nestable-handle"},[e("div",{staticClass:"nestable-handle__handle",attrs:{draggable:""},on:{dragstart:t.dragstart,touchstart:t.dragstart,touchend:t.touchend,touchmove:t.touchmove}},[t._t("default")],2),e("div",{staticClass:"nestable-handle-collapse"},[t._t("collapse",null,{collapse:t.collapse,collapsed:t.collapsed,hasChildren:t.hasChildren})],2),e("div",{staticClass:"nestable-handle-content"},[t._t("content")],2)])},tt=[],et={name:"VueNestableHandle",mixins:[k],props:{item:{type:Object,required:!1,default:function(){return{}}},collapse:{type:Function},collapsed:{type:Boolean,default:!1}},inject:["group","onDragEnd","childrenProp"],computed:{hasChildren:function(){return this.item[this.childrenProp]&&this.item[this.childrenProp].length>0}},methods:{dragstart:function(t){var e=this.item||this.$parent.item;this.notifyDragStart(this.group,t,e)},touchend:function(t){this.onDragEnd(t)},touchmove:function(t){this.notifyMouseMove(this.group,t)}}},nt=et,rt=Object(I["a"])(nt,Q,tt,!1,null,null,null),ot=rt.exports,it={name:"XNestable",components:{VueNestable:W}},st=it,at=(n("c36b"),Object(I["a"])(st,d,h,!1,null,null,null)),ct=at.exports,lt=function(){var t=this,e=t._self._c;return e("vue-nestable-handle",t._g(t._b({scopedSlots:t._u([{key:"content",fn:function(e){return[t._t("content",null,null,e)]}},{key:"collapse",fn:function(n){return[e("button",{staticClass:"nestable-handle__collapse-toggle",class:{collapsed:n.collapsed,hidden:!n.hasChildren},on:{click:n.collapse}},[e("icon",{attrs:{icon:t.$icons.collapse_up}})],1)]}}],null,!0)},"vue-nestable-handle",t.$attrs,!1),t.$listeners),[e("template",{slot:"default"},[e("div",{staticClass:"nestable-handle__icon"},[e("icon",{attrs:{icon:t.$icons.dragable}})],1)])],2)},ut=[],dt={name:"XNestableHandle",components:{VueNestableHandle:ot},methods:{}},ht=dt,pt=(n("fb53"),Object(I["a"])(ht,lt,ut,!1,null,null,null)),mt=pt.exports,ft=function(){var t=this,e=t._self._c;return e("div",{staticClass:"react-nestable-row",on:{mouseleave:t.closeActionMenu}},[e("div",{staticClass:"react-nestable-row__column react_title",class:t.reactTitleClasses},[t._v(t._s(t.react.react_title))]),e("div",{staticClass:"react-nestable-row__column react_edition_id",attrs:{title:"edition id"}},[t._v("\n        "+t._s(t.react.react_edition_id)+"\n    ")]),e("div",{staticClass:"react-nestable-row__column form-actions"},[t.isRedirReact?e("icon",{attrs:{icon:t.$icons.redirect}}):t.isMailReact?e("icon",{attrs:{icon:t.$icons.mail}}):t._e()],1),e("div",{staticClass:"react-nestable-row__column react_publish"},[-1!==+t.react.react_publish?[e("x-switch",{attrs:{size:"sm",value:t.react.react_publish},on:{change:function(e){return t.onPublishChange(t.react,e)}}})]:t._e()],2),e("div",{staticClass:"react-nestable-row__column react_id",attrs:{title:"react id"}},[t._v(t._s(t.react.react_id))]),e("div",{staticClass:"react-nestable-row__column react_form_name",attrs:{title:"form name"}},[t._v(t._s(t.react.react_form_name))]),e("div",{staticClass:"react-nestable-row__column react_date_changed"},[t._v(t._s(t.react.react_date_changed))]),e("div",{staticClass:"react-nestable-row__column actions"},[e("action-group",[e("action-button",{attrs:{title:"Delete item",icon:t.$icons.group_remove},on:{action:t.removeItem}}),e("action-button",{attrs:{title:"Edit",icon:t.$icons.edit},on:{action:t.reactEditContainer}}),e("action-button",{attrs:{disabled:!t.react.hasOwnProperty("permalink"),title:"Browse",icon:t.$icons.external_link},on:{action:function(e){return t.reactBrowseExt(t.react)}}}),t.isActionContainer?e("action-button",{attrs:{title:"Actions",icon:t.$icons.rules},on:{action:t.reactAction}}):t._e(),e("action-dropdown",{ref:"actionMenu",attrs:{icon:t.$icons.more},scopedSlots:t._u([{key:"dropdown",fn:function(){return[e("action-dropdown-item",{attrs:{icon:t.$icons.clone},on:{click:function(e){return t.copyItem()}}},[t._v("Duplicate an item\n                    ")]),e("action-dropdown-item",{attrs:{icon:t.$icons.delete},on:{click:function(e){return t.reactDelete([t.react])}}},[t._v("Delete react completely\n                    ")])]},proxy:!0}])})],1)],1)])},gt=[],bt=n("38e7"),vt=n("b991"),yt=n("b84e"),_t={name:"ReactNestableRow",mixins:[bt["a"]],props:{item:Object},computed:{reactTitleClasses:function(){return{unpublished:0===+this.react.react_publish}},react:function(){return this.item.react},container:function(){return this.$store.getters["controller/container"]},holderId:function(){return this.$store.getters["controller/getHolderId"]},isActionContainer:function(){return this.$store.getters["controller/isActionContainer"]},isRedirReact:function(){return this.isActionContainer&&this.react.react_rule_use_for_redir},isMailReact:function(){return this.isActionContainer&&this.$store.getters["forms/isMailable"](this.react.react_form)}},methods:{reactEditContainer:function(){this.$router.push({name:vt["i"],params:{react_id:this.react.react_id}})},closeActionMenu:function(){this.$refs.actionMenu.hide()},removeItem:function(){this.$store.dispatch("controller/removeItem",{item:this.item})},copyItem:function(){this.$store.dispatch("controller/copyItem",{item:this.item})},reactAction:function(){this.$router.push({name:vt["f"],params:{react_id:this.react.react_id}})},load:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=1,this.$store.dispatch("controller/loadItems");case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onPublishChange:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=1,yt["a"].saveReactFieldValue({react_id:e.react_id,name:"publish",value:n});case 1:return t.next=2,this.load();case 2:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}(),reactBrowseExt:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=1,this.reactBrowse([e],{container:this.container,resolve_holder_form:this.isMailReact&&this.container});case 1:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},wt=_t,Pt=(n("c0ef"),Object(I["a"])(wt,ft,gt,!1,null,"5edd08ba",null)),xt=Pt.exports,kt={name:"ReactNestable",components:{XNestableHandle:mt,ReactNestableRow:xt,XNestable:ct},model:{prop:"reacts",event:"input"},props:{reacts:Array}},Ot=kt,Ct=Object(I["a"])(Ot,l,u,!1,null,"5a81617d",null),It=Ct.exports,$t=function(){var t=this,e=t._self._c;return t.isActionContainer?e("action-button",{attrs:{title:"Setup form",icon:t.$icons.form},on:{action:t.action}}):t._e()},jt=[],Dt=n("7c8b"),Mt={name:"ActionFormSetup",computed:{form_id:function(){return this.$store.getters["controller/getActionFormId"]},isActionContainer:function(){return this.$store.getters["controller/isActionContainer"]}},methods:{action:function(){this.$router.push({name:Dt["s"],params:{form_id:this.form_id,group_id:0}})}}},St=Mt,Et=Object(I["a"])(St,$t,jt,!1,null,"51bf3f4a",null),Rt=Et.exports,Nt=function(){var t=this,e=t._self._c;return t.isActionContainer?e("action-button",{attrs:{title:"Related reactions",icon:t.$icons.react},on:{action:t.action}}):t._e()},At=[],Bt={name:"ActionFormRelatedReacts",computed:{form_id:function(){return this.$store.getters["controller/getActionFormId"]},isActionContainer:function(){return this.$store.getters["controller/isActionContainer"]}},methods:{action:function(){this.$router.push({name:Dt["w"],params:{backRoute:!0},query:{forms:[this.form_id]}})}}},Tt=Bt,qt=Object(I["a"])(Tt,Nt,At,!1,null,"b54b8aaa",null),Vt=qt.exports,Lt=function(){var t=this,e=t._self._c;return e("action-button",{attrs:{title:"Open holder entity in new tab",icon:t.$icons.open_holder},on:{action:t.action}})},Ft=[],Ht=n("4d69"),Xt={name:"ActionOpenHolder",computed:{holderType:function(){return this.$store.getters["controller/getHolderType"]},holderId:function(){return this.$store.getters["controller/getHolderId"]},containerIdObject:function(){return this.$store.getters["controller/getContainerIdObject"]}},methods:{action:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,n,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=this.holderType,t.next="var"===r?1:"react"===r?3:"unit"===r?4:10;break;case 1:return t.next=2,this.resolveVarConainer(this.holderId);case 2:return e=t.sent,t.abrupt("continue",11);case 3:return e={name:Dt["x"],params:{react_id:this.holderId}},t.abrupt("continue",11);case 4:o=this.containerIdObject.holderParentType,t.next="react"===o?5:"var"===o?6:8;break;case 5:return e={name:Dt["x"],params:{react_id:this.containerIdObject.holderParentId}},t.abrupt("continue",9);case 6:return t.next=7,this.resolveVarConainer(this.holderId);case 7:return e=t.sent,t.abrupt("continue",9);case 8:this.$awn.alert('Conatiner holder parent type "'.concat(this.containerIdObject.holderParentType,'" is not supported'));case 9:return t.abrupt("continue",11);case 10:this.$awn.alert("Conatiner holder is not supported");case 11:n=this.$router.resolve(e),window.open(n.href,"_blank");case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),resolveVarConainer:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=1,Ht["a"].getVars({var_id:e});case 1:n=t.sent,n[0]&&this.$awn.alert("Can`t find variable to resolve holder. id="+e),r=n[0].var_type,t.next="form"===r?2:"edition"===r?3:"user"===r?4:"site"===r?5:6;break;case 2:return t.abrupt("return",{name:Dt["s"],params:{form_id:n[0].var_parent,group_id:0}});case 3:return t.abrupt("return",{name:Dt["m"],params:{e_id:n[0].var_parent}});case 4:return t.abrupt("return",{name:Dt["P"],params:{u_id:n[0].var_parent,ug_id:0}});case 5:return t.abrupt("return",{name:Dt["K"],params:{site_id:n[0].var_parent}});case 6:this.$awn.alert("Variable type ".concat(n[0].var_type," is not supported."));case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},Yt=Xt,Gt=Object(I["a"])(Yt,Lt,Ft,!1,null,null,null),Kt=Gt.exports,zt=n("115e"),Zt=n("f3b3"),Jt={name:"Controller",components:{ActionFormRelatedReacts:Vt,ActionFormSetup:Rt,ActionOpenHolder:Kt,ReactNestable:It},props:{container:{type:String,required:!0}},data:function(){return{collapsed:!0}},computed:{itemsTree:function(){return this.$store.getters["controller/itemsTree"]},isParentView:function(){return this.$route.name===vt["e"]},maxDepth:function(){return+this.$store.getters["controller/settings/config"].maxDepth},forms:function(){var t=this.$store.getters["controller/settings/getForms"];return Object(zt["a"])(t)?[]:t.map((function(t){return{form_id:t.form_id}}))},containerName:function(){return this.$store.getters["controller/settings/config"].name}},watch:{container:function(){this.load()},containerName:function(){this.updateBC()},$route:function(){this.updateBC()}},mounted:function(){this.load()},methods:{updateBC:function(){this.isParentView&&this.$store.dispatch("breadcrumb/updateLast",{label:"".concat(this.$route.meta.label,' "').concat(this.containerName,'"')})},load:function(){this.$refs.waiter.wait(this.$store.dispatch("controller/loadContainer",{container:this.container}))},addItems:function(){this.$router.push({name:vt["g"]})},addNewItem:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=1,this.$dialogs.show(Zt["a"],{forms:this.forms,defaults:{form_id:this.forms[0].form_id}});case 1:if(e=t.sent,"ok"===e.trigger&&e.value){t.next=2;break}return t.abrupt("return");case 2:return t.next=3,this.$router.push({name:vt["i"],params:{react_id:"new"},query:e.value});case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),save:function(t,e){this.$store.commit("controller/setItemsTree",e.items),this.$store.dispatch("controller/saveItems")},reload:function(){this.load()},setup:function(){this.$router.push({name:vt["j"]})},sort:function(t,e){this.$store.dispatch("controller/sortItems",{key:t,dir:e})}}},Ut=Jt,Wt=Object(I["a"])(Ut,i,s,!1,null,"565929b2",null),Qt=Wt.exports,te=Qt,ee={name:"ControllerView",components:{Controller:te},props:["container"]},ne=ee,re=Object(I["a"])(ne,r,o,!1,null,null,null);e["default"]=re.exports},a67e:function(t,e,n){},c0ef:function(t,e,n){"use strict";n("c3fd")},c36b:function(t,e,n){"use strict";n("a67e")},c3fd:function(t,e,n){},f3b3:function(t,e,n){"use strict";var r=function(){var t=this,e=t._self._c;return e("dialog-modal",t._b({ref:"modal",attrs:{"ok-disabled":!t.localValue.form_id||!t.localValue.react_edition_id},on:{hide:t.onModalHide,hidden:t.onModalHidden}},"dialog-modal",t.$dialogsProps,!1),[e("b-form-group",{attrs:{"label-cols":"2",label:"Form"}},[e("select-form",{attrs:{"value-format":"id",required:!0,clearable:!1,forms:t.forms,"exclude-forms":t.excludeForms},model:{value:t.localValue.form_id,callback:function(e){t.$set(t.localValue,"form_id",e)},expression:"localValue.form_id"}})],1),e("b-form-group",{staticClass:"mb-0",attrs:{"label-cols":"2",label:"Edition"}},[e("select-edition",{attrs:{"value-format":"id",required:!0,clearable:!1},model:{value:t.localValue.react_edition_id,callback:function(e){t.$set(t.localValue,"react_edition_id",e)},expression:"localValue.react_edition_id"}})],1)],1)},o=[],i=n("e5a8"),s={name:"PromptNewReactDialog",mixins:[i["a"]],props:{title:{default:"Create new React"},forms:[Array,Boolean],excludeForms:Array,defaults:{type:Object,default:function(){return{form_id:null,react_edition_id:this.currentEdition}}}},data:function(){return{localValue:{form_id:null,react_edition_id:null}}},computed:{currentEdition:function(){return this.$store.state.exolog.defaults.edition}},mounted:function(){this.defaults.form_id&&(this.localValue.form_id=this.defaults.form_id),this.defaults.react_edition_id?this.localValue.react_edition_id=this.defaults.react_edition_id:this.localValue.react_edition_id=this.currentEdition},methods:{}},a=s,c=n("2877"),l=Object(c["a"])(a,r,o,!1,null,null,null);e["a"]=l.exports},fb53:function(t,e,n){"use strict";n("154d")}}]);
//# sourceMappingURL=chunk-52ce1410.6af3450c.js.map