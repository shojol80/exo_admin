(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2407c2dc"],{"19ed":function(e,t,n){"use strict";n("fd81")},"38e7":function(e,t,n){"use strict";n("96cf");var r=n("3b8d"),o=n("b991"),i=n("b84e"),a=n("f3b3"),s=n("8934"),c=n("6658");t["a"]={methods:{reactEdit:function(e){this.$router.push({name:o["w"],params:{react_id:e[0].react_id}})},reactBrowse:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},e.next=1,Object(s["a"])(t[0].react_id,n);case 1:if(r=e.sent,!r){e.next=2;break}return e.next=2,Object(c["a"])(r);case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),reactClone:function(e){this.$awn.alert("Not implemented!")},reactDelete:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return 1===t.length?(r='Are you sure want to delete reaction "'.concat(t[0]["react_title"],'"?'),n=t[0]):(r='Are you sure want to delete "'.concat(t.length,'" reactions?'),n={react_id:t.map((function(e){return e["react_id"]}))}),e.next=1,this.$dialogs.confirmDelete({title:"Delete reaction",message:r});case 1:if(o=e.sent,"ok"===o.trigger){e.next=2;break}return e.abrupt("return");case 2:return e.next=3,i["a"].deleteReact(n);case 3:if(!this.load){e.next=4;break}return e.next=4,this.load();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),reactNew:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=1,this.$dialogs.show(a["a"],{forms:t});case 1:if(n=e.sent,"ok"===n.trigger&&n.value){e.next=2;break}return e.abrupt("return");case 2:this.$router.push({name:o["w"],params:{react_id:"new"},query:n.value});case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}}},"5ffd":function(e,t,n){"use strict";n("6762"),n("2fdb");var r=function(){var e=this,t=e._self._c;return t("fragment",[e.actions.includes("edit")?t("x-context-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.rows&&1===e.rows.length,expression:"rows && rows.length===1"}],attrs:{icon:e.$icons.edit},on:{click:function(t){return e.$emit("edit")}}},[e._v("\n        Edit\n    ")]):e._e(),e.rows&&1===e.rows.length&&e.actions.includes("browse")&&e.rows[0].hasOwnProperty("permalink")?t("x-context-menu-item",{attrs:{icon:e.$icons.external_link},on:{click:function(t){return e.$emit("browse")}}},[e._v("\n        Browse\n    ")]):e._e(),e.actions.includes("clone")?t("x-context-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.rows&&1===e.rows.length,expression:"rows && rows.length===1"}],attrs:{icon:e.$icons.clone},on:{click:function(t){return e.$emit("clone")}}},[e._v("\n        Clone\n    ")]):e._e(),e.actions.includes("delete")?t("x-context-menu-item",{attrs:{icon:e.$icons.delete},on:{click:function(t){return e.$emit("delete")}}},[e._v("\n        Delete completely\n    ")]):e._e()],1)},o=[],i={name:"ReactContextMenu",props:{actions:{default:function(){return["edit","browse","clone","delete"]}},rows:{type:Array}}},a=i,s=n("2877"),c=Object(s["a"])(a,r,o,!1,null,"470e7b54",null);t["a"]=c.exports},"62fc":function(e,t,n){},"86e4":function(e,t,n){"use strict";n("9591")},"93be":function(e,t,n){"use strict";n("9d82")},9591:function(e,t,n){},"98f8":function(e,t,n){"use strict";n("62fc")},"9d82":function(e,t,n){},affb:function(e,t,n){"use strict";n("6762"),n("2fdb");var r=function(){var e=this,t=e._self._c;return t("fragment",[e.actions.includes("edit")?t("action-button",{attrs:{title:"Edit",icon:e.$icons.edit},on:{action:function(t){return e.$emit("edit")}}}):e._e(),e.actions.includes("browse")&&e.row.hasOwnProperty("permalink")?t("action-button",{attrs:{title:"Browse",icon:e.$icons.external_link},on:{action:function(t){return e.$emit("browse")}}}):e._e(),e.actions.includes("clone")?t("action-button",{attrs:{title:"Clone",icon:e.$icons.clone},on:{action:function(t){return e.$emit("clone")}}}):e._e(),e.actions.includes("delete")?t("action-button",{attrs:{title:"Delete completely",icon:e.$icons.delete},on:{action:function(t){return e.$emit("delete")}}}):e._e()],1)},o=[],i={name:"ReactColumnActions",props:{actions:{default:function(){return["edit","browse","clone","delete"]}},row:{type:Object}}},a=i,s=(n("86e4"),n("2877")),c=Object(s["a"])(a,r,o,!1,null,"2c903583",null);t["a"]=c.exports},d06d:function(e,t,n){"use strict";n("6762"),n("2fdb");var r=function(){var e=this,t=e._self._c;return t("fragment",[e.actions.includes("new")?t("action-button",{attrs:{title:"New",icon:e.$icons.new,shortkey:"['ctrl', 'n']"},on:{action:function(t){return e.$emit("new")}}}):e._e(),e.actions.includes("edit")?t("action-button",{directives:[{name:"show",rawName:"v-show",value:e.rows&&1===e.rows.length,expression:"rows && rows.length===1"}],attrs:{title:"Edit",icon:e.$icons.edit},on:{action:function(t){return e.$emit("edit")}}}):e._e(),e.actions.includes("delete")?t("action-button",{directives:[{name:"show",rawName:"v-show",value:e.rows&&e.rows.length>0,expression:"rows && rows.length>0"}],attrs:{title:"Delete",icon:e.$icons.delete},on:{action:function(t){return e.$emit("delete")}}}):e._e()],1)},o=[],i={name:"ReactTableActions",props:{actions:{default:function(){return["new","edit","delete"]}},rows:{type:Array}}},a=i,s=(n("98f8"),n("2877")),c=Object(s["a"])(a,r,o,!1,null,"5656d29a",null);t["a"]=c.exports},d0f3:function(e,t,n){"use strict";n("386d"),n("7f7f");var r=function(){var e=this,t=e._self._c;return t("action-table",{ref:"table",staticClass:"react-data-table",attrs:{"table-type":"server",name:e.name,url:"/",columns:e.columns,options:e.options},on:e._d({},[e.rowclickevent,e.onRowClick]),scopedSlots:e._u([{key:"afterFilterWrapper",fn:function(){return[!1!==e.forms?[t("div",{directives:[{name:"show",rawName:"v-show",value:e.showSearch_val,expression:"showSearch_val"}],staticClass:"react-data-table__search mr-2"},[t("search-query-input",{attrs:{forms:e.forms},model:{value:e.queryScope,callback:function(t){e.queryScope=t},expression:"queryScope"}})],1),e.allowHideSearch?t("action-button",{attrs:{title:"Search in reactions content",icon:e.$icons.search},on:{action:function(t){e.showSearch_val=!e.showSearch_val}}}):e._e()]:e._e()]},proxy:!0},{key:"actions",fn:function(n){return[t("action-group",[e._t("beforeActions",null,null,n),t("react-table-actions",{attrs:{actions:[e.allowAddNew?"new":"","edit","delete"],rows:n.rows},on:{new:function(t){return e.reactNew(e.forms)},edit:function(t){return e.reactEdit(n.rows)},delete:function(t){return e.reactDelete(n.rows)}}}),t("action-group-separator"),t("action-button",{attrs:{title:"Reload",icon:e.$icons.reload},on:{action:e.load}})],2)]}},{key:"col-action",fn:function(n){var r=n.row;return[t("action-group",{on:{click:function(e){e.stopPropagation()}}},[t("react-column-actions",{attrs:{row:r},on:{edit:function(t){return e.reactEdit([r])},browse:function(t){return e.reactBrowse([r])},clone:function(t){return e.reactClone([r])},delete:function(t){return e.reactDelete([r])}}})],1)]}},{key:"contextmenu",fn:function(n){var r=n.rows;return[t("react-context-menu",{attrs:{rows:r},on:{edit:function(t){return e.reactEdit(r)},browse:function(t){return e.reactBrowse(r)},clone:function(t){return e.reactClone(r)},delete:function(t){return e.reactDelete(r)}}})]}},{key:"react_publish",fn:function(n){return[+n.row.react_publish?e._e():[t("icon",{staticClass:"cell-icon",attrs:{icon:e.$icons.not_published}})]]}},{key:"react_form_name",fn:function(t){return[e._v("\n        "+e._s(t.row.react_form_name)+"\n    ")]}},{key:"react_edition_id",fn:function(t){return[e._v("\n        "+e._s(t.row.react_edition_id)+"\n    ")]}},{key:"h__col-select",fn:function(){return[e._t("header-col-select")]},proxy:!0},e._l(e.$scopedSlots,(function(t,n){return{key:n,fn:function(t){return[e._t(n,null,null,t)]}}}))],null,!0)},[e._l(e.$slots,(function(t,n){return e._t(n,null,{slot:n})}))],2)},o=[],i=(n("ac6a"),n("cadf"),n("456d"),n("bc3a")),a=n.n(i),s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"search-query-input"},[t("div",{staticClass:"mr-2 search-query-input__input"},[t("b-form-input",{attrs:{id:"input-default",type:"text",disabled:0===e.selectedForms.length,placeholder:"Search in reactions content"},on:{input:e.changeQueryScope},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}})],1),t("div",{staticClass:"search-query-input__forms"},[t("x-select",{attrs:{"value-format":"object",multiple:!0,options:e.availableForms,childrenKey:"form_questions",limit:4,"append-to-body":!0,placeholder:"Select fields or forms"},model:{value:e.selectedForms,callback:function(t){e.selectedForms=t},expression:"selectedForms"}})],1)])},c=[],l=n("75fc"),u=(n("c5f6"),n("2ef0")),d=(n("8e6e"),n("20d6"),n("bd86")),f=n("115e");function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){Object(d["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _={computed:{availableForms:function(){var e=this,t=this.$store.getters["forms/forms"];if(Object(f["a"])(t))return[];if(t=t.map((function(e){return h(h({},e),{},{id:e.form_id,label:e.form_name,form_questions:e.form_questions.map((function(e){return h(h({},e),{},{id:e.fq_id,label:e.fq_name})}))})})),!0===this.forms)return t;var n=[];return t.forEach((function(t){var r=e.forms.findIndex((function(e){return parseInt(e.form_id)===parseInt(t.form_id)}));if(-1!==r){var o=t;e.forms[r].form_questions&&e.forms[r].form_questions.length>0&&(o.form_questions=t.form_questions.filter((function(t){return-1!==e.forms[r].form_questions.findIndex((function(e){return parseInt(e.fq_id)===parseInt(t.fq_id)}))}))),n.push(o)}})),n},availableFormsFilter:function(){var e=this,t=this.$store.getters["forms/forms"];if(Object(f["a"])(t))return[];if(t=t.map((function(e){return h(h({},e),{},{id:e.form_name,text:e.form_id+" - "+e.form_name})})),!0===this.forms)return t;var n=[];return t.forEach((function(t){var r=e.forms.findIndex((function(e){return parseInt(e.form_id)===parseInt(t.form_id)}));-1!==r&&n.push(t)})),n}}},p={name:"SearchQueryInput",mixins:[_],props:{forms:{type:[Array,Boolean],default:!0},queryScope:{type:Object}},model:{prop:"queryScope",event:"change"},delay:{type:Number,default:500},data:function(){return{query:this.queryScope?this.queryScope.query:"",selectedForms:[]}},computed:{storageKey:function(){return this.$store.state.site.site_id+"_"+this.$store.state.site.site_alias+"_search-react-questions"}},watch:{selectedForms:{deep:!0,handler:function(){this.changeQueryScope()}},availableForms:{deep:!0,immediate:!0,handler:function(){this.availableForms.length>0&&(this.selectedForms=Object(l["a"])(this.availableForms))}}},methods:{changeQueryScope:Object(u["debounce"])((function(e){var t=this.selectedForms.map((function(e){return e.form_id?e.form_questions:e}));t=t.flat(1),this.$emit("change",{query:this.query,form_questions:t})}),500)}},b=p,w=(n("93be"),n("2877")),y=Object(w["a"])(b,s,c,!1,null,"43381e40",null),v=y.exports,g=n("38e7"),x=n("b84e"),q=n("d06d"),k=n("5ffd"),$=n("affb"),F={computed:{availableEditionsFilter:function(){var e=this.$store.getters["pages/editions"];return Object(f["a"])(e)?[]:(e=e.map((function(e){return{id:e.e_id,text:e.e_id+" - "+e.e_title}})),e)}}},S={mixins:[_,F],data:function(){return{showSearch_val:this.showSearch,showFilters_val:this.showFilters,customFilters:["react_id","react_title","react_form_name","react_edition_id","react_user_email","react_user_id"]}},computed:{emptyFilter:function(){return this.customFilters.reduce((function(e,t){return e[t]="",e}),{})},fullFilter:function(){var e=this;return this.customFilters.reduce((function(t,n){return t[n]=e.filter[n]?e.filter[n]:"",t}),{})}},watch:{availableFormsFilter:{immediate:!0,handler:function(){this.options.listColumns.react_form_name=this.availableFormsFilter}},availableEditionsFilter:{immediate:!0,handler:function(){this.options.listColumns.react_edition_id=this.availableEditionsFilter||[]}},filter:{immediate:!0,handler:function(e,t){}},showFilters:{handler:function(){this.showFilters_val=this.showFilters}}},methods:{onSetFilter:function(e){}}},O={name:"ReactDataTable",components:{ReactColumnActions:$["a"],ReactTableActions:q["a"],ReactContextMenu:k["a"],SearchQueryInput:v},mixins:[g["a"],S],props:{forms:{type:[Array,Boolean],default:!0},rowClickEdit:{type:Boolean,default:!0},showSearch:{type:Boolean,default:!1},searchQuery:{type:String,default:""},showFilters:{type:Boolean,default:!1},dataApi:{type:Function,default:x["a"].searchByFormsFields},allowAddNew:{type:Boolean,default:!0},filter:{type:Object,default:function(){return{}}},allowHideSearch:{type:Boolean,default:!0},name:{type:String,default:"ReactDataTable"},saveState:{type:Boolean,default:!1},usePagination:{type:Boolean,default:!0},columns:{type:Array,default:function(){return["col-check","react_id","react_title","react_publish","react_form_name","react_edition_id","react_user_email","react_date_changed","col-action"]}}},data:function(){return{queryScope:{query:this.searchQuery,form_questions:[]},options:{usePagination:this.usePagination,saveState:this.saveState,debounce:500,sendInitialRequest:!0,listColumns:{react_form_name:[],react_edition_id:[]},useFilterSearchQuery:!1,useFilterByColumn:!0,filterableColumns:["react_id","react_title","react_form_name","react_edition_id","react_user_email","react_user_id"],sortable:["react_id","react_title","react_form_name","react_edition_id","react_date_changed"],uniqueKey:"react_id",headings:{react_id:"ID",react_title:"Title",react_publish:"",react_form_name:"Form",react_edition_id:"Edition",react_user_email:"User",react_date_changed:"Date changed",edit:""},requestKeys:{query:"filter",limit:"limit",orderBy:"order",ascending:"way",page:"page",byColumn:"byColumn"},requestFunction:this.requestFunction,responseAdapter:this.responseAdapter}}},computed:{rowclickevent:function(){return this.rowClickEdit?"row-click":"---"}},watch:{queryScope:function(){this.showSearch_val&&this.load()},showSearch_val:function(){this.load()},showSearch:{handler:function(){this.showSearch_val=this.showSearch}}},methods:{requestFunction:function(e){var t=this;return e["way"]=1===e["way"]?"asc":"desc",!1!==this.forms&&this.showSearch_val?(e["form_questions"]=this.queryScope.form_questions,e["query"]=this.queryScope.query):(e["form_questions"]=!1,e["query"]=""),this.filter&&Object.keys(this.filter).length>0?(e["filter"]=this.filter,console.log("🔍 ReactDataTable: Adding filter to request",{filter:this.filter,data:e})):console.log("🔍 ReactDataTable: No filter to add",{filter:this.filter,filter_keys:this.filter?Object.keys(this.filter):"NULL"}),this.source&&this.source.cancel("CANCEL"),this.source=a.a.CancelToken.source(),this.$refs.table&&this.$refs.table.$refs.table&&(this.$refs.table.$refs.table.loading=!0),this.dataApi(e,{cancelToken:this.source.token}).then((function(e){return t.$refs.table&&(t.$refs.table.$refs.table.loading=!1),e}))},responseAdapter:function(e){return e?{data:e.data,count:e.total}:{data:[],count:0}},load:function(){this.$refs.table.refresh()},onRowClick:function(e){this.rowClickEdit&&this.reactEdit([e.row])}}},j=O,C=(n("19ed"),Object(w["a"])(j,r,o,!1,null,null,null));t["a"]=C.exports},f3b3:function(e,t,n){"use strict";var r=function(){var e=this,t=e._self._c;return t("dialog-modal",e._b({ref:"modal",attrs:{"ok-disabled":!e.localValue.form_id||!e.localValue.react_edition_id},on:{hide:e.onModalHide,hidden:e.onModalHidden}},"dialog-modal",e.$dialogsProps,!1),[t("b-form-group",{attrs:{"label-cols":"2",label:"Form"}},[t("select-form",{attrs:{"value-format":"id",required:!0,clearable:!1,forms:e.forms,"exclude-forms":e.excludeForms},model:{value:e.localValue.form_id,callback:function(t){e.$set(e.localValue,"form_id",t)},expression:"localValue.form_id"}})],1),t("b-form-group",{staticClass:"mb-0",attrs:{"label-cols":"2",label:"Edition"}},[t("select-edition",{attrs:{"value-format":"id",required:!0,clearable:!1},model:{value:e.localValue.react_edition_id,callback:function(t){e.$set(e.localValue,"react_edition_id",t)},expression:"localValue.react_edition_id"}})],1)],1)},o=[],i=n("e5a8"),a={name:"PromptNewReactDialog",mixins:[i["a"]],props:{title:{default:"Create new React"},forms:[Array,Boolean],excludeForms:Array,defaults:{type:Object,default:function(){return{form_id:null,react_edition_id:this.currentEdition}}}},data:function(){return{localValue:{form_id:null,react_edition_id:null}}},computed:{currentEdition:function(){return this.$store.state.exolog.defaults.edition}},mounted:function(){this.defaults.form_id&&(this.localValue.form_id=this.defaults.form_id),this.defaults.react_edition_id?this.localValue.react_edition_id=this.defaults.react_edition_id:this.localValue.react_edition_id=this.currentEdition},methods:{}},s=a,c=n("2877"),l=Object(c["a"])(s,r,o,!1,null,null,null);t["a"]=l.exports},fd81:function(e,t,n){}}]);
//# sourceMappingURL=chunk-2407c2dc.f42ca95f.js.map