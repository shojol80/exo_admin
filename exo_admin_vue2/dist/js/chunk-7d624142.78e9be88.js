(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7d624142"],{"090e":function(t,e,i){},"0c73":function(t,e,i){"use strict";i("e666")},"18e7":function(t,e,i){"use strict";i("8f7d")},3660:function(t,e,i){"use strict";i("d053")},"3a8a":function(t,e,i){},4922:function(t,e,i){"use strict";i("8e6e"),i("456d"),i("ac6a"),i("cadf");var n=i("bd86"),r=i("6c46");function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function s(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(Object(i),!0).forEach((function(e){Object(n["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}e["a"]={mixins:[r["a"]],methods:{fqTemplate:function(){return{fq_id:-this.genID(),fq_name:"Field name",fq_displayname:"Field name",fq_info:null,fq_isrequired:0,fq_order:null,fq_ishidden:0,fq_type:1,fq_custom_params:null,fq_rules:null,fq_prefix:null,fq_postfix:null,values:[],form_questions_tree:[],fq_visibility:{form:0,form_new:0}}},fqvTemplate:function(){return{fqv_id:-this.genID(),fqv_site:null,fqv_value:null,fqv_displayvalue:null,fqv_isdefault:0,fqv_custom_params:null}},formTemplate:function(){return{form_name:"New Form",form_questions_tree:[],vars:[]}},buildFq:function(t){var e=this,i=s(s({},this.fqTemplate()),t);return i.values&&(i.values=i.values.map((function(t){return s(s({},e.fqvTemplate()),t)}))),i},buildForm:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=s(s({},this.formTemplate()),e);return i.form_questions_tree=i.form_questions_tree.map((function(e){return t.buildFq(e)})),i}}}},"4c35":function(t,e,i){},"4f44":function(t,e,i){"use strict";i("4c35")},5735:function(t,e,i){"use strict";i("e223")},"5d6c":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t._self._c;return e("waiter",{ref:"waiter",staticClass:"exolog-form"},[e("ValidationObserver",{ref:"observer",scopedSlots:t._u([{key:"default",fn:function(i){i.invalid;return[e("action-toolbar",[e("action-group",{staticClass:"mr-2"},[e("action-back"),e("action-group-separator"),e("ValidationProvider",{attrs:{rules:"required",name:"name",slim:""},scopedSlots:t._u([{key:"default",fn:function(i){var n=i.valid,r=i.errors;return e("action-input",{ref:"name",attrs:{valid:n,errors:r},model:{value:t.form.form_name,callback:function(e){t.$set(t.form,"form_name",e)},expression:"form.form_name"}})}}],null,!0)}),e("action-button",{attrs:{title:"Save",icon:t.$icons.save,shortkey:"['ctrl', 's']"},on:{action:t.save}}),e("action-button",{attrs:{disabled:"new"===t.form_id,title:"Reload",icon:t.$icons.reload},on:{action:t.load}}),e("action-group-separator"),e("action-button",{attrs:{disabled:"new"===t.form_id,title:"Related reactions",icon:t.$icons.react},on:{action:t.onReactions}}),e("action-button",{attrs:{disabled:"new"===t.form_id,title:"Create new reaction",icon:t.$icons.react_add},on:{action:t.onNewReact}})],1)],1),e("b-tabs",{staticClass:"x-tabs"},[e("b-tab",{ref:"questionsTab",staticClass:"exolog-form__questions",attrs:{active:""},scopedSlots:t._u([{key:"title",fn:function(){return[e("icon",{attrs:{icon:t.$icons.wizard}}),t._v("\n                    Fields\n                ")]},proxy:!0}],null,!0)},[e("form-builder",{attrs:{container:t.container},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}})],1),e("b-tab",{ref:"propertiesTab",scopedSlots:t._u([{key:"title",fn:function(){return[e("icon",{attrs:{icon:t.$icons.properties}}),t._v("\n                    Properties\n                ")]},proxy:!0}],null,!0)},[e("x-form-input",{attrs:{title:"Form ID","db-field":"form_id",readonly:""},model:{value:t.form.form_id,callback:function(e){t.$set(t.form,"form_id",e)},expression:"form.form_id"}}),e("x-form-input",{attrs:{title:"Subject template",description:"You can use field name, react_ and form_ standard fields for substitutions. Ex {menu_title}-{name}","db-field":"form_mailsubject"},model:{value:t.form.form_mailsubject,callback:function(e){t.$set(t.form,"form_mailsubject",e)},expression:"form.form_mailsubject"}}),e("x-form-group",{attrs:{title:"Default react permalink","db-field":"form_permalink_id",description:"You can use field name, react_ and form_ standard fields for substitutions. Ex /{form_name}/{menu_title}"}},[e("select-form-permalink",{attrs:{form_id:t.form.form_id},model:{value:t.form.form_permalink_id,callback:function(e){t.$set(t.form,"form_permalink_id",e)},expression:"form.form_permalink_id"}})],1),e("x-form-text-area",{attrs:{title:"Info"},model:{value:t.form.form_info,callback:function(e){t.$set(t.form,"form_info",e)},expression:"form.form_info"}})],1),e("b-tab",{scopedSlots:t._u([{key:"title",fn:function(){return[e("icon",{attrs:{icon:t.$icons.variables}}),t._v("\n                    Variables\n                ")]},proxy:!0}],null,!0)},[e("vars-editor",{model:{value:t.form.vars,callback:function(e){t.$set(t.form,"vars",e)},expression:"form.vars"}})],1)],1)]}}])})],1)},r=[],o=(i("8e6e"),i("ac6a"),i("cadf"),i("456d"),i("a481"),i("bd86")),s=(i("96cf"),i("3b8d")),a=(i("7f7f"),i("fb4c")),f=i("b991"),l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"fb-container"},[e("div",{staticClass:"fb-question-container",class:{"fb-question-container--empty":t.isEmpty}},[e("visibility-header"),e("FqDndContainer",{model:{value:t.form.form_questions_tree,callback:function(e){t.$set(t.form,"form_questions_tree",e)},expression:"form.form_questions_tree"}})],1),e("screen-scroll-container",{staticClass:"fb-fqt-container",attrs:{"height-option":2}},[e("div",[e("list-preset-fields",{staticClass:"mb-3",attrs:{form_questions:t.form.form_questions_tree}}),e("list-fields")],1)])],1)},c=[],u=function(){var t=this,e=t._self._c;return t.container?e("div",{staticClass:"fb-visibility-header"},[e("div",{staticClass:"fb-visibility-header__group"},[e("x-switch",{model:{value:t.is_custom_fields,callback:function(e){t.is_custom_fields=e},expression:"is_custom_fields"}}),e("span",{staticClass:"ml-1"},[t._v("Set custom visibility for form in this group")])],1)]):t._e()},d=[],m=i("71e8"),p={name:"VisibilityHeader",props:{},computed:{is_custom_fields:{get:function(){return _.get(this.form,"form_options.containers.".concat(this.container,".is_custom_fields"),0)},set:function(t){_.set(this.form,"form_options.containers.".concat(this.container,".is_custom_fields"),t)}},form:function(){return m["a"].form},container:function(){return m["a"].container}}},q=p,b=(i("5735"),i("2877")),v=Object(b["a"])(q,u,d,!1,null,"ee626918",null),h=v.exports,y=function(){var t=this,e=t._self._c;return e("list-base",{attrs:{title:"Predefined fields",items:t.preset_fq,"key-name":"name"},scopedSlots:t._u([{key:"default",fn:function(i){var n=i.item;return[e("icon",{staticClass:"mr-1",attrs:{icon:n.icon}}),t._v("\n        "+t._s(n.name)+"\n    ")]}}])})},g=[],x=(i("8615"),i("d290")),w=i("ca1b"),k={name:"ListPresetFields",components:{ListBase:x["a"]},props:{form_questions:{type:Array}},computed:{form_questions_flat:function(){return Object(w["a"])(this.form_questions,"form_questions_tree")},preset_fq:function(){var t=this,e=Object.values(this.ECO.forms.preset_fq);return e.filter((function(e){return!t.form_questions_flat.some((function(t){return t.fq_name===e.fq.fq_name}))}))}}},O=k,$=Object(b["a"])(O,y,g,!1,null,"2f01adc0",null),C=$.exports,j=i("c017"),P=i("a589"),D={name:"FormBuilder",components:{FqDndContainer:P["default"],ListFields:j["a"],VisibilityHeader:h,ListPresetFields:C},model:{prop:"form",event:"change"},props:{form:{required:!0,type:Object},container:{required:!1,type:String}},computed:{isEmpty:function(){return!this.form.form_questions_tree||0===this.form.form_questions_tree.length},store:function(){return m["a"]}},watch:{form:{immediate:!0,handler:function(t){m["a"].form=t}},container:{immediate:!0,handler:function(t){m["a"].container=t}}}},F=D,S=(i("18e7"),Object(b["a"])(F,l,c,!1,null,null,null)),E=S.exports,V=E,A=i("4922"),N=i("f3b3"),R=i("2d7e"),I=i("9466");function B(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function T(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?B(Object(i),!0).forEach((function(e){Object(o["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):B(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var L={name:"Form",mixins:[A["a"]],components:{VarsEditor:I["a"],XFormControl:R["a"],FormBuilder:V},props:{form_id:{required:!0},group_id:{required:!0,default:0},preset:{required:!1}},data:function(){return{form:this.buildForm()}},computed:{container:function(){return this.$route.query.container}},watch:{form_id:function(t,e){t!==e&&this.load()}},mounted:function(){this.load(),this.$store.dispatch("breadcrumb/updateLast",{label:"Edit form: ".concat(this.$route.params.form_id)})},methods:{new:function(){var t=this,e=this.$route.query.preset?this.$route.query.preset:"_blank";this.form=this.buildForm(this.ECO.forms.preset_form[e].form),this.$nextTick((function(){t.$refs.name.focus()}))},load:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.form_id){t.next=1;break}return this.$awn.alert('Prop "form_id" is not defined!'),t.abrupt("return");case 1:if("new"!==this.form_id){t.next=2;break}return this.new(),t.abrupt("return");case 2:return t.next=3,this.$refs.waiter.wait(!0);case 3:return t.prev=3,t.next=4,a["a"].getForm({form_id:this.form_id,container:this.container});case 4:this.form=t.sent;case 5:return t.prev=5,t.next=6,this.$refs.waiter.wait(!1);case 6:return t.finish(5);case 7:case"end":return t.stop()}}),t,this,[[3,,5,7]])})));function e(){return t.apply(this,arguments)}return e}(),save:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=1,this.$refs.observer.validate();case 1:if(e=t.sent,e){t.next=2;break}return this.$refs.propertiesTab.activate(),t.abrupt("return");case 2:return t.next=3,this.$refs.waiter.wait(!0);case 3:return t.prev=3,console.log(T({},this.form)),t.next=4,a["a"].saveForm(T(T({},this.form),{},{form_permalink_id:this.form.form_permalink_id?this.form.form_permalink_id:null,container:this.container,group_id:this.group_id>0&&"new"===this.form_id?this.group_id:null}));case 4:if(i=t.sent,"new"!==this.form_id){t.next=6;break}return t.next=5,this.$router.replace({name:f["s"],params:{form_id:i["form_id"],group_id:this.group_id},query:this.$route.query});case 5:t.next=7;break;case 6:return t.next=7,this.load();case 7:return t.prev=7,t.next=8,this.$refs.waiter.wait(!1);case 8:return t.finish(7);case 9:case"end":return t.stop()}}),t,this,[[3,,7,9]])})));function e(){return t.apply(this,arguments)}return e}(),onReactions:function(){this.$router.push({name:f["v"],params:{backRoute:!0},query:{forms:[this.form.form_id]}})},onNewReact:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=1,this.$dialogs.show(N["a"],{forms:!0,defaults:{form_id:this.form.form_id}});case 1:if(e=t.sent,"ok"===e.trigger&&e.value){t.next=2;break}return t.abrupt("return");case 2:return t.next=3,this.$router.push({name:f["w"],params:{react_id:"new"},query:e.value});case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getFormForSave:function(){return this.form}}},H=L,U=(i("0c73"),Object(b["a"])(H,n,r,!1,null,null,null));e["default"]=U.exports},"686af":function(t,e,i){"use strict";i("7c8c")},"71e8":function(t,e,i){"use strict";var n=i("a026"),r=i("ca1b"),o=n["default"].observable({form:{form_questions_tree:[]},container:null});function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=Object(r["a"])(o.form.form_questions_tree,"form_questions_tree");return i.some((function(i){return i.fq_name===t+(0===e?"":"_"+e)}))?s(t,e+1):t+(0===e?"":"_"+e)}o.getUniqueName=s,e["a"]=o},"7a88":function(t,e,i){"use strict";i("090e")},"7c8c":function(t,e,i){},"8f7d":function(t,e,i){},a589:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"fq-dnd-container",class:{"fq-dnd-container--empty":!t.form_questions||0===t.form_questions.length},attrs:{"data-empty-title":"Drag a field from the right to this area"}},[e("Container",{staticClass:"list-group",attrs:{"group-name":"1","get-child-payload":t.getChildPayload,"drag-handle-selector":".column-drag-handle","drop-placeholder":t.placeholderOptions},on:{drop:t.onDrop}},t._l(t.form_questions,(function(i,n){return e("Draggable",{key:i.fq_id},[e(t.getComponent(i.fq_type),{tag:"component",staticClass:"draggable-item list-group-item",attrs:{fq:t.form_questions[n],active:t.active===n},on:{change:function(e){return t.onChange(n,e)},delete:function(e){return t.onDeleteQuestion(i,n)},collapse:function(e){return t.collapse(n)}}})],1)})),1)],1)},r=[],o=(i("8e6e"),i("ac6a"),i("cadf"),i("456d"),i("bd86")),s=i("3f7d"),a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"fqt-base",class:{"fqt-base--active":t.active},on:{click:function(e){return t.$emit("click")}}},[e("fqt-header",{scopedSlots:t._u([{key:"default",fn:function(i){var n=i.hover;return[t._t("header",(function(){return[e("div",{staticClass:"fqt-base__header-title",on:{click:function(e){return t.collapse(e)}}},[e("icon",{staticClass:"fqt-base__header-icon",attrs:{icon:t.icon}}),t._v("\n                    "+t._s(t.fq.fq_name)+"\n                ")],1),e("action-group",{directives:[{name:"show",rawName:"v-show",value:t.active||n,expression:"active || hover"}],staticClass:"fqt-base__header-actions"},[e("action-group-separator"),e("action-button",{attrs:{title:"Delete field",icon:t.$icons.delete},on:{action:t.onActionDelete}}),e("action-dropdown",{attrs:{icon:t.$icons.more},scopedSlots:t._u([{key:"dropdown",fn:function(){return[e("b-dropdown-item",{on:{click:function(e){t.info=!0}}},[t._v("Show info\n                            ")]),e("b-dropdown-item",{on:{click:function(e){t.prefix=!0}}},[t._v("Show prefix\n                            ")]),e("b-dropdown-item",{on:{click:function(e){t.postfix=!0}}},[t._v("Show postfix\n                            ")])]},proxy:!0}],null,!0)}),e("action-button",{staticClass:"fqt-base__collapse",attrs:{title:"Collapse",icon:t.$icons.collapse_down},on:{action:function(e){return t.collapse(e)}}})],1),e("span",{directives:[{name:"show",rawName:"v-show",value:!(t.active||n),expression:"!(active || hover)"}],staticClass:"fqt-base__header-displayname"},[t._v(t._s(t.fq.fq_displayname))])]}),{fq:t.fq})]}}],null,!0)}),e("b-collapse",{staticClass:"fqt-base__edit",attrs:{visible:t.active,id:t.fq.fq_id+"id"}},[e("div",{staticClass:"fqt-base__options"},[t._t("options",(function(){return[t._t("type",(function(){return[e("x-form-select",{attrs:{title:"Type",options:t.fqt,"id-key":"fqt_id",zIndex:"9999",clearable:!1,"label-key":"fqt_name"},model:{value:t.fq.fq_type,callback:function(e){t.$set(t.fq,"fq_type",e)},expression:"fq.fq_type"}})]}),{fq:t.fq}),e("x-form-input",{attrs:{id:"fq_name"+t.fq.fq_id,disabled:t.isNameDisabled,title:"Name","db-field":"fq_name"},on:{input:t.updateLabel},model:{value:t.fq.fq_name,callback:function(e){t.$set(t.fq,"fq_name",e)},expression:"fq.fq_name"}}),e("x-form-input",{attrs:{id:"fq_displayname"+t.fq.fq_id,title:"Label","db-field":"fq_displayname"},on:{change:function(e){t.labelDirty=!0}},model:{value:t.fq.fq_displayname,callback:function(e){t.$set(t.fq,"fq_displayname",e)},expression:"fq.fq_displayname"}}),e("x-form-text-area",{directives:[{name:"show",rawName:"v-show",value:t.showInfo,expression:"showInfo"}],attrs:{id:"fq_info"+t.fq.fq_id,title:"Info","db-field":"fq_info"},model:{value:t.fq.fq_info,callback:function(e){t.$set(t.fq,"fq_info",e)},expression:"fq.fq_info"}}),e("x-form-input",{directives:[{name:"show",rawName:"v-show",value:t.showPrefix,expression:"showPrefix"}],attrs:{id:"fq_prefix"+t.fq.fq_id,title:"Prefix","db-field":"fq_prefix"},model:{value:t.fq.fq_prefix,callback:function(e){t.$set(t.fq,"fq_prefix",e)},expression:"fq.fq_prefix"}}),e("x-form-input",{directives:[{name:"show",rawName:"v-show",value:t.showPostfix,expression:"showPostfix"}],attrs:{id:"fq_postfix_"+t.fq.fq_id,title:"Postfix","db-field":"fq_postfix"},model:{value:t.fq.fq_postfix,callback:function(e){t.$set(t.fq,"fq_postfix",e)},expression:"fq.fq_postfix"}}),t._t("required",(function(){return[e("x-form-switch",{attrs:{title:"Required","db-field":"fq_isrequired"},model:{value:t.fq.fq_isrequired,callback:function(e){t.$set(t.fq,"fq_isrequired",e)},expression:"fq.fq_isrequired"}})]}),{fq:t.fq}),t._t("rules",(function(){return[e("x-form-input",{attrs:{id:"fq_rules_"+t.fq.fq_id,title:"Validation rules","db-field":"fq_rules"},model:{value:t.fq.fq_rules,callback:function(e){t.$set(t.fq,"fq_rules",e)},expression:"fq.fq_rules"}})]}),{fq:t.fq}),t._t("customParam",(function(){return[e("x-form-group",{staticClass:"fqt-base__custom-params",attrs:{title:"Custom params"}},[e("custom-params-input",{model:{value:t.fq.fq_custom_params,callback:function(e){t.$set(t.fq,"fq_custom_params",e)},expression:"fq.fq_custom_params"}})],1)]}),{fq:t.fq}),e("fq-visibility-checks",{attrs:{fq:t.fq}}),t._t("default",null,{fq:t.fq})]}),{fq:t.fq})],2)]),t._t("footer")],2)},f=[],l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"fqt-header",on:{mouseover:function(e){t.hover=!0},mouseleave:function(e){t.hover=!1}}},[e("div",{staticClass:"column-drag-handle"},[e("icon",{attrs:{icon:t.$icons.dragable}})],1),t._t("default",null,null,{hover:t.hover})],2)},c=[],u={name:"FqtHeader",data:function(){return{hover:!1}}},d=u,m=(i("4f44"),i("2877")),p=Object(m["a"])(d,l,c,!1,null,"3bb1abf5",null),q=p.exports,b=function(){var t=this,e=t._self._c;return e("div",[e("x-form-group",{attrs:{title:"Visibility","control-padding":!0}},[e("x-switch",{attrs:{disabled:t.disabled},model:{value:t.visibility_form_new,callback:function(e){t.visibility_form_new=e},expression:"visibility_form_new"}},[t._v("new")]),e("x-switch",{staticClass:"ml-3",attrs:{disabled:t.disabled},model:{value:t.visibility_form,callback:function(e){t.visibility_form=e},expression:"visibility_form"}},[t._v("edit")])],1),t.is_custom_fields?e("x-form-group",{attrs:{"control-padding":!0,title:"Group visibility"}},[e("x-switch",{attrs:{disabled:t.disabled},model:{value:t.group_new,callback:function(e){t.group_new=e},expression:"group_new"}},[t._v("new")]),e("x-switch",{staticClass:"ml-3",attrs:{disabled:t.disabled},model:{value:t.group,callback:function(e){t.group=e},expression:"group"}},[t._v("edit")])],1):t._e()],1)},v=[],h=i("71e8"),y={name:"FqVisibilityChecks",props:{fq:{}},computed:{disabled:function(){return"menu_title"===this.fq.fq_name||"publish"===this.fq.fq_name},form:function(){return h["a"].form},container:function(){return h["a"].container},is_custom_fields:function(){return _.get(this.form.form_options,"containers.".concat(this.container,".is_custom_fields"),0)},visibility_form:{get:function(){return this.disabled?1:_.get(this.fq.fq_visibility,"form",0)},set:function(t){this.fq.fq_visibility.form=t}},visibility_form_new:{get:function(){return this.disabled?1:_.get(this.fq.fq_visibility,"form_new",0)},set:function(t){this.fq.fq_visibility.form_new=t}},group_new:{get:function(){return this.disabled?1:_.get(this.fq.fq_visibility,"containers.".concat(this.container,".group_new"),0)},set:function(t){Array.isArray(this.fq.fq_visibility.containers)&&(this.fq.fq_visibility.containers={}),_.set(this.fq.fq_visibility,"containers.".concat(this.container,".group_new"),t)}},group:{get:function(){return this.disabled?1:_.get(this.fq.fq_visibility.containers,"".concat(this.container,".group"),0)},set:function(t){Array.isArray(this.fq.fq_visibility.containers)&&(this.fq.fq_visibility.containers={}),_.set(this.fq.fq_visibility.containers,"".concat(this.container,".group"),t)}}}},g=y,x=Object(m["a"])(g,b,v,!1,null,null,null),w=x.exports,k={name:"fqtBase",components:{FqVisibilityChecks:w,FqtHeader:q},model:{prop:"fq",event:"change"},props:{fq:{type:Object},active:{type:Boolean,default:!1}},data:function(){return{info:!1,prefix:!1,postfix:!1,labelDirty:!1}},computed:{showInfo:function(){return!!this.fq.fq_info||this.info},showPrefix:function(){return!!this.fq.fq_prefix||this.prefix},showPostfix:function(){return!!this.fq.fq_postfix||this.postfix},fqt:function(){return this.$store.getters["ECO/fqtArray"]},icon:function(){var t=this.$store.getters["ECO/fqtArrayId"][this.fq.fq_type];return t?t["icon"]:""},type:function(){var t=this.$store.getters["ECO/fqtArrayId"][this.fq.fq_type];return t?t["fqt_displayname"]:""},isNameDisabled:function(){var t=this.$store.getters["ECO/fqtArrayId"][this.fq.fq_type];return!!t&&t["singleton"]}},methods:{onActionDelete:function(){this.$emit("delete")},updateLabel:function(t){this.fq.fq_id>0||this.labelDirty||(this.fq.fq_displayname=t)},collapse:function(t){this.$emit("collapse")}}},O=k,$=(i("3660"),Object(m["a"])(O,a,f,!1,null,null,null)),C=$.exports,j=function(){var t=this,e=t._self._c;return e("fqt-base",t._g(t._b({scopedSlots:t._u([{key:"default",fn:function(t){var i=t.fq;return[e("x-form-group",{attrs:{title:"Options","label-for":"input-1"}},[e("b-card",[e("fq-values",{attrs:{fq:i},on:{"update:fq":function(t){i=t}}})],1)],1)]}}])},"fqt-base",t.$attrs,!1),t.$listeners))},P=[],D=(i("6b54"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"fq-values"},[t._l(this.fq.values,(function(i){return e("div",{key:i.fqv_id},[e("div",{staticClass:"key-value"},[e("div",{staticClass:"key-value__key"},[e("b-input-group",[e("b-input-group-prepend",{attrs:{"is-text":""}},[e("b-form-radio",{staticClass:"mr-n2",attrs:{name:"group"+t.fq.fq_id,value:"1"},on:{change:function(e){return t.setDefault(i)}},model:{value:i.fqv_isdefault,callback:function(e){t.$set(i,"fqv_isdefault",e)},expression:"item.fqv_isdefault"}},[e("span",{staticClass:"sr-only"},[t._v("Default value")])])],1),e("b-form-input",{attrs:{placeholder:"Enter value"},model:{value:i.fqv_value,callback:function(e){t.$set(i,"fqv_value",e)},expression:"item.fqv_value"}})],1)],1),e("div",{staticClass:"key-value__value"},[e("b-input",{attrs:{placeholder:"Enter display value"},model:{value:i.fqv_displayvalue,callback:function(e){t.$set(i,"fqv_displayvalue",e)},expression:"item.fqv_displayvalue"}})],1),e("div",{staticClass:"key-value__actions"},[e("action-group",[e("action-button",{attrs:{icon:t.$icons.value_custom_params,title:"Custom param"},on:{action:function(t){i.$_visible=!i.$_visible}}}),e("action-button",{attrs:{icon:t.$icons.delete,title:"Delete option"},on:{action:function(e){return t.onDelete(i)}}})],1)],1)]),e("b-collapse",{attrs:{id:i.fqv_id.toString()},model:{value:i.$_visible,callback:function(e){t.$set(i,"$_visible",e)},expression:"item.$_visible"}},[e("custom-params-input",{model:{value:i.fqv_custom_params,callback:function(e){t.$set(i,"fqv_custom_params",e)},expression:"item.fqv_custom_params"}})],1)],1)})),e("action-button",{attrs:{title:"Add option",icon:t.$icons.add},on:{action:t.onAdd}})],2)}),F=[],S=i("4922"),E={name:"fqValues",mixins:[S["a"]],props:{fq:Object},computed:{fqv:function(){return this.fq.values}},methods:{onAdd:function(){this.fqv.push(this.fqvTemplate())},setDefault:function(t){this.fqv.forEach((function(e){e!==t&&(e.fqv_isdefault="0")}))},onDelete:function(t){this.fq.values=this.fq.values.filter((function(e){return t!==e}))}}},V=E,A=(i("fa08"),Object(m["a"])(V,D,F,!1,null,null,null)),N=A.exports,R={name:"fqtMulti",components:{fqValues:N,fqtBase:C},model:{prop:"fq",event:"change"}},I=R,B=Object(m["a"])(I,j,P,!1,null,null,null),T=B.exports,L=function(){var t=this,e=t._self._c;return e("fqt-base",t._g(t._b({scopedSlots:t._u([{key:"required",fn:function(){return[e("span",{staticClass:"d-none"})]},proxy:!0},{key:"customParam",fn:function(i){var n=i.fq;return[e("x-form-group",[e("action-button",{attrs:{disabled:n.fq_id<0,icon:t.$icons.setup},on:{action:function(e){return t.setup(n)}}},[t._v("Container settings\n            ")])],1)]}}])},"fqt-base",t.$attrs,!1),t.$listeners))},H=[],U=(i("96cf"),i("3b8d")),M=i("7c8b"),G={name:"fqtContainer",components:{fqValues:N,fqtBase:C},model:{prop:"fq",event:"change"},methods:{setup:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=1,this.$router.push({name:M["h"],params:{params:{form_id:e.fq_form,fq_name:e.fq_name}},query:{params:JSON.stringify({form_id:e.fq_form,fq_name:e.fq_name}),back:this.$route.path}});case 1:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},J=G,z=Object(m["a"])(J,L,H,!1,null,"032b6be7",null),Q=z.exports,Y=function(){var t=this,e=t._self._c;return e("fqt-base",t._g(t._b({staticClass:"fqt-section",attrs:{fq:t.fq,active:t.sectionActive},on:{collapse:function(e){t.sectionActive=!t.sectionActive}},scopedSlots:t._u([{key:"type",fn:function(){return[e("span")]},proxy:!0},{key:"rules",fn:function(){return[e("span")]},proxy:!0},{key:"required",fn:function(){return[e("span")]},proxy:!0},{key:"customParam",fn:function(){return[e("span")]},proxy:!0}])},"fqt-base",t.$attrs,!1),t.$listeners),[[e("div",{staticClass:"fqt-section__holder"},[e("fq-dnd-container",{model:{value:t.form_questions,callback:function(e){t.form_questions=e},expression:"form_questions"}})],1)]],2)},X=[],K={name:"fqtSection",components:{FqtBase:C,FqDndContainer:function(){return Promise.resolve().then(i.bind(null,"a589"))}},model:{prop:"fq",event:"change"},props:{fq:{}},data:function(){return{sectionActive:!1}},computed:{form_questions:{get:function(){return this.fq.form_questions_tree||[]},set:function(t){this.fq.form_questions_tree=t}}},methods:{}},W=K,Z=(i("c925"),Object(m["a"])(W,Y,X,!1,null,null,null)),tt=Z.exports,et=i("b3a8");function it(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function nt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?it(Object(i),!0).forEach((function(e){Object(o["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):it(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var rt={name:"FqDndContainer",mixins:[et["a"],S["a"]],components:{Container:s["Container"],Draggable:s["Draggable"],fqtBase:C,fqtMulti:T,fqtContainer:Q,fqtSection:tt},model:{prop:"form_questions",event:"change"},props:{form_questions:{type:Array}},data:function(){return{active:-1,placeholderOptions:{className:"fq-drop-preview",animationDuration:"150",showOnTop:!1}}},computed:{isEmpty:function(){return!this.form_questions||0===this.form_questions.length}},methods:{collapse:function(t){this.active=this.active===t?-1:t},onDrop:function(t){var e=t.removedIndex,i=t.addedIndex,n=t.payload;if(null!==e||null!==i){var r=n;if(n.fqt_name){var o=this.getUniqueName(n.fqt_name);r=this.buildFq({fq_name:o,fq_displayname:o,fq_type:n.fqt_id}),this.active=i}else if(n.fq){var s=this.getUniqueName(n.fq.fq_name);r=this.buildFq(nt(nt({},n.fq),{},{fq_name:s,fq_displayname:s})),this.active=-1}else e===this.active?this.active=i:i<=this.active&&e>=this.active?this.active++:i>=this.active&&e<=this.active&&this.active--;var a=this.form_questions;null!==e&&(r=a.splice(e,1)[0]),null!==i&&a.splice(i,0,r)}},getChildPayload:function(t){return this.form_questions[t]},getComponent:function(t){var e=this.fqt.find((function(e){return+e.fqt_id===+t}));return e&&e["builder"]&&e["builder"]["component"]||"fqtBase"},onDeleteQuestion:function(t,e){var i=this.form_questions.filter((function(e){return e!==t}));e===this.active&&(this.active=-1),this.$emit("change",i)},getUniqueName:function(t){return h["a"].getUniqueName(t)},onChange:function(t,e){this.form_questions[t]=event}}},ot=rt,st=(i("686af"),Object(m["a"])(ot,n,r,!1,null,null,null));e["default"]=st.exports},b3a8:function(t,e,i){"use strict";e["a"]={computed:{fqt:function(){return this.$store.getters["ECO/fqtArray"].filter((function(t){return!(t.builder&&t.builder.hidden)}))}},methods:{getGhostParent:function(){return document.body}}}},c017:function(t,e,i){"use strict";var n=function(){var t=this,e=t._self._c;return e("list-base",{attrs:{title:"Available field types",items:t.fqt,"key-name":"fqt_name"},scopedSlots:t._u([{key:"default",fn:function(i){var n=i.item;return[e("icon",{staticClass:"mr-1",attrs:{icon:n.icon}}),t._v(t._s(n.fqt_displayname)+"\n    ")]}}])})},r=[],o=i("d290"),s=i("b3a8"),a={name:"ListFields",mixins:[s["a"]],components:{ListBase:o["a"]}},f=a,l=i("2877"),c=Object(l["a"])(f,n,r,!1,null,null,null);e["a"]=c.exports},c925:function(t,e,i){"use strict";i("db42")},d053:function(t,e,i){},d290:function(t,e,i){"use strict";var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"list-base"},[e("h3",{staticClass:"list-base-legend"},[t._v("\n        "+t._s(t.title)+"\n    ")]),e("b-list-group",[e("Container",{attrs:{"group-name":"1",behaviour:"copy","get-child-payload":t.getChildPayload,"get-ghost-parent":t.getGhostParent,"remove-on-drop-out":!1}},t._l(t.items,(function(i){return e("Draggable",{key:i[t.keyName]},[e("b-list-group-item",{staticClass:"list-base-item draggable-item",attrs:{button:""}},[t._t("default",null,{item:i})],2)],1)})),1)],1)],1)},r=[],o=i("b3a8"),s=i("3f7d"),a={name:"ListBase",mixins:[o["a"]],components:{Container:s["Container"],Draggable:s["Draggable"]},props:{items:{type:Array,required:!0},keyName:{type:String,required:!0},title:{type:String,default:""}},methods:{getChildPayload:function(t){return this.items[t]}}},f=a,l=(i("7a88"),i("2877")),c=Object(l["a"])(f,n,r,!1,null,"0a374a4d",null);e["a"]=c.exports},db42:function(t,e,i){},e223:function(t,e,i){},e666:function(t,e,i){},f3b3:function(t,e,i){"use strict";var n=function(){var t=this,e=t._self._c;return e("dialog-modal",t._b({ref:"modal",attrs:{"ok-disabled":!t.localValue.form_id||!t.localValue.react_edition_id},on:{hide:t.onModalHide,hidden:t.onModalHidden}},"dialog-modal",t.$dialogsProps,!1),[e("b-form-group",{attrs:{"label-cols":"2",label:"Form"}},[e("select-form",{attrs:{"value-format":"id",required:!0,clearable:!1,forms:t.forms,"exclude-forms":t.excludeForms},model:{value:t.localValue.form_id,callback:function(e){t.$set(t.localValue,"form_id",e)},expression:"localValue.form_id"}})],1),e("b-form-group",{staticClass:"mb-0",attrs:{"label-cols":"2",label:"Edition"}},[e("select-edition",{attrs:{"value-format":"id",required:!0,clearable:!1},model:{value:t.localValue.react_edition_id,callback:function(e){t.$set(t.localValue,"react_edition_id",e)},expression:"localValue.react_edition_id"}})],1)],1)},r=[],o=i("e5a8"),s={name:"PromptNewReactDialog",mixins:[o["a"]],props:{title:{default:"Create new React"},forms:[Array,Boolean],excludeForms:Array,defaults:{type:Object,default:function(){return{form_id:null,react_edition_id:this.currentEdition}}}},data:function(){return{localValue:{form_id:null,react_edition_id:null}}},computed:{currentEdition:function(){return this.$store.state.exolog.defaults.edition}},mounted:function(){this.defaults.form_id&&(this.localValue.form_id=this.defaults.form_id),this.defaults.react_edition_id?this.localValue.react_edition_id=this.defaults.react_edition_id:this.localValue.react_edition_id=this.currentEdition},methods:{}},a=s,f=i("2877"),l=Object(f["a"])(a,n,r,!1,null,null,null);e["a"]=l.exports},fa08:function(t,e,i){"use strict";i("3a8a")}}]);
//# sourceMappingURL=chunk-7d624142.78e9be88.js.map