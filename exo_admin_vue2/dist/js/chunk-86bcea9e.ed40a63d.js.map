{"version":3,"sources":["webpack:///./src/views/newsletters/NewslettersTable.vue","webpack:///./src/services/api/newsletters.js","webpack:///./src/views/newsletters/parties/Mailreport.vue","webpack:///src/views/newsletters/parties/Mailreport.vue","webpack:///./src/views/newsletters/parties/Mailreport.vue?b89b","webpack:///./src/views/newsletters/parties/Mailreport.vue?bf4f","webpack:///src/views/newsletters/NewslettersTable.vue","webpack:///./src/views/newsletters/NewslettersTable.vue?a9cd","webpack:///./src/views/newsletters/NewslettersTable.vue?f87e","webpack:///./src/views/newsletters/NewslettersTable.vue?0f7c","webpack:///./src/views/newsletters/parties/Mailreport.vue?bc4f"],"names":["render","_vm","this","_c","_self","ref","attrs","loading","staticClass","columns","options","on","showReport","scopedSlots","_u","key","fn","props","$icons","reload","$event","load","_ref","row","stopPropagation","rn_status","terminate","_e","_ref2","rows","_v","_ref3","_s","formatDate","rn_date_created","_ref4","rn_date_scheduled","_ref5","rn_date_done","staticRenderFns","getNewsletters","params","config","Api","post","apply","concat","Array","prototype","slice","call","arguments","getNewsletter","class","newsletter","rn_subject","rn_send_fromname","rn_send_from","usergroup","ug_name","user","u_email","rn_count_mails","rn_count_mails_error","rn_count_bounces","rn_count_click_users","rn_count_clicks","name","components","AsidePanel","data","methods","show","_show","_asyncToGenerator","regeneratorRuntime","mark","_callee","rn_id","wrap","_context","prev","next","$refs","modal","newsletters","sent","iframe","contentWindow","document","open","write","rn_mail_body","close","stop","_x","component","Mailreport","useFilterSearchQuery","useFilterByColumn","filterableColumns","listColumns","id","text","headings","orderBy","ascending","column","requestFunction","sortable","uniqueKey","mounted","table","refresh","_requestFunction","abrupt","e","report","_terminate","_callee2","event","_context2","$dialogs","confirmDelete","title","message","trigger","map","i","_x2","str","isEmpty","dayjs","format"],"mappings":"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","file":"js/chunk-86bcea9e.ed40a63d.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('app-screen',[_c('waiter',{ref:\"waiter\",attrs:{\"show\":_vm.loading}},[_c('action-table',{ref:\"table\",staticClass:\"newsletters-table\",attrs:{\"name\":'newsletters',\"table-type\":\"server\",\"columns\":_vm.columns,\"options\":_vm.options},on:{\"row-click\":_vm.showReport},scopedSlots:_vm._u([{key:\"actions\",fn:function(props){return [_c('action-group',[_c('action-button',{attrs:{\"title\":\"Refresh\",\"icon\":_vm.$icons.reload},on:{\"action\":function($event){return _vm.load()}}})],1)]}},{key:\"col-action\",fn:function({row}){return [_c('action-group',{on:{\"click\":function($event){$event.stopPropagation();void 0}}},[(row.rn_status === 'new')?_c('action-button',{attrs:{\"title\":\"Terminate\",\"icon\":_vm.$icons.terminate},on:{\"action\":function($event){return _vm.terminate([row])}}}):_vm._e()],1)]}},{key:\"contextmenu\",fn:function({rows}){return [_c('x-context-menu-item',{attrs:{\"icon\":_vm.$icons.terminate},on:{\"click\":function($event){return _vm.terminate(rows)}}},[_vm._v(\"\\n                    Terminate\\n                \")])]}},{key:\"rn_date_created\",fn:function({row}){return [_vm._v(\"\\n                \"+_vm._s(_vm.formatDate(row.rn_date_created))+\"\\n            \")]}},{key:\"rn_date_scheduled\",fn:function({row}){return [_vm._v(\"\\n                \"+_vm._s(_vm.formatDate(row.rn_date_scheduled))+\"\\n            \")]}},{key:\"rn_date_done\",fn:function({row}){return [_vm._v(\"\\n                \"+_vm._s(_vm.formatDate(row.rn_date_done))+\"\\n            \")]}}])})],1),_c('mailreport',{ref:\"report\"})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Api from \"@/services/api/Api\";\n\nexport default {\n    getNewsletters(params, config) {\n        return Api.post(\"/newsletters/getNewsletters\", ...arguments);\n    },\n    terminate(params, config) {\n        return Api.post(\"/newsletters/terminate\", ...arguments);\n    },\n    getNewsletter(params, config) {\n        return Api.post(\"/newsletters/getNewsletter\", ...arguments);\n    }\n};\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('aside-panel',{ref:\"modal\",staticClass:\"mailreport\"},[_c('waiter',[_c('div',{staticClass:\"mailreport__body\"},[_c('table',{staticClass:\"table table-striped table-borderless table-sm\"},[_c('tr',[_c('th',[_vm._v(\"Status\")]),_c('td',{class:{\n                            'text-success': _vm.newsletter.rn_status === 'done'\n                        }},[_vm._v(\"\\n                        \"+_vm._s(_vm.newsletter.rn_status)+\"\\n                    \")])]),_c('tr',[_c('th',[_vm._v(\"Subject\")]),_c('td',[_vm._v(_vm._s(_vm.newsletter.rn_subject))])]),_c('tr',[_c('th',[_vm._v(\"From\")]),_c('td',[_vm._v(\"\\n                        \"+_vm._s(_vm.newsletter.rn_send_fromname)+\"<\"+_vm._s(_vm.newsletter.rn_send_from)+\">\\n                    \")])]),_c('tr',[_c('th',[_vm._v(\"To \")]),_c('td',[_vm._v(\"group:\"+_vm._s(_vm.newsletter.usergroup.ug_name))])]),_c('tr',[_c('th',[_vm._v(\"User\")]),_c('td',[_vm._v(_vm._s(_vm.newsletter.user.u_email))])]),_c('tr',[_c('th',[_vm._v(\"Send mails\")]),_c('td',[_vm._v(\"\\n                        \"+_vm._s(_vm.newsletter.rn_count_mails)+\"\\n                        \"),(+_vm.newsletter.rn_count_mails_error > 0)?_c('span',{staticClass:\"text-error\"},[_vm._v(\"errors:\"+_vm._s(_vm.newsletter.rn_count_mails_error))]):_vm._e()])]),_c('tr',[_c('th',[_vm._v(\"Bounces\")]),_c('td',[_vm._v(_vm._s(_vm.newsletter.rn_count_bounces))])]),_c('tr',[_c('th',[_vm._v(\"Users that react\")]),_c('td',[_vm._v(_vm._s(_vm.newsletter.rn_count_click_users))])]),_c('tr',[_c('th',[_vm._v(\"Users total clicks\")]),_c('td',[_vm._v(_vm._s(_vm.newsletter.rn_count_clicks))])])]),_c('iframe',{ref:\"iframe\",attrs:{\"src\":\"javascript:void(0);\",\"frameborder\":\"0\"}})])])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <aside-panel class=\"mailreport\" ref=\"modal\">\n        <waiter>\n            <div class=\"mailreport__body\">\n                <table class=\"table table-striped table-borderless table-sm\">\n                    <tr>\n                        <th>Status</th>\n                        <td\n                            :class=\"{\n                                'text-success': newsletter.rn_status === 'done'\n                            }\"\n                        >\n                            {{ newsletter.rn_status }}\n                        </td>\n                    </tr>\n                    <tr>\n                        <th>Subject</th>\n                        <td>{{ newsletter.rn_subject }}</td>\n                    </tr>\n                    <tr>\n                        <th>From</th>\n                        <td>\n                            {{ newsletter.rn_send_fromname }}<{{\n                                newsletter.rn_send_from\n                            }}>\n                        </td>\n                    </tr>\n                    <tr>\n                        <th>To </th>\n                        <td>group:{{ newsletter.usergroup.ug_name }}</td>\n                    </tr>\n                    <tr>\n                        <th>User</th>\n                        <td>{{ newsletter.user.u_email }}</td>\n                    </tr>\n                    <tr>\n                        <th>Send mails</th>\n                        <td>\n                            {{ newsletter.rn_count_mails }}\n                            <span\n                                v-if=\"+newsletter.rn_count_mails_error > 0\"\n                                class=\"text-error\"\n                                >errors:{{\n                                    newsletter.rn_count_mails_error\n                                }}</span\n                            >\n                        </td>\n                    </tr>\n                    <tr>\n                        <th>Bounces</th>\n                        <td>{{ newsletter.rn_count_bounces }}</td>\n                    </tr>\n                    <tr>\n                        <th>Users that react</th>\n                        <td>{{ newsletter.rn_count_click_users }}</td>\n                    </tr>\n                    <tr>\n                        <th>Users total clicks</th>\n                        <td>{{ newsletter.rn_count_clicks }}</td>\n                    </tr>\n                </table>\n\n                <iframe\n                    src=\"javascript:void(0);\"\n                    ref=\"iframe\"\n                    frameborder=\"0\"\n                ></iframe>\n            </div>\n        </waiter>\n    </aside-panel>\n</template>\n\n<script>\nimport AsidePanel from \"@/components/containers/components/AsidePanel\";\nimport newsletters from \"@/services/api/newsletters\";\n\nexport default {\n    name: \"Mailreport\",\n    components: { AsidePanel },\n    data() {\n        return {\n            newsletter: {\n                user: {},\n                usergroup: {}\n            }\n        };\n    },\n    methods: {\n        async show(rn_id) {\n            this.$refs.modal.show();\n            this.newsletter = await newsletters.getNewsletter({ rn_id });\n            this.$refs.iframe.contentWindow.document.open(\n                \"text/html\",\n                \"replace\"\n            );\n            this.$refs.iframe.contentWindow.document.write(\n                this.newsletter.rn_mail_body\n            ); // htmlCode is the variable you called newDocument\n            this.$refs.iframe.contentWindow.document.close();\n        }\n    }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"src/assets/scss/vue-component\";\n\n.mailreport__body {\n    margin-top: 1rem;\n    height: calc(100vh - #{$action-toolbar-height} - 2rem);\n\n    iframe {\n        border: 1px solid $border-color;\n        height: 100%;\n        width: 100%;\n    }\n\n    table {\n        th {\n            width: 300px;\n        }\n    }\n}\n\n.mode-popup .aside-panel {\n    .mailreport__body {\n        height: calc(\n            100vh - #{$action-toolbar-height} - #{$popup-header-height} - 2rem\n        );\n    }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Mailreport.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Mailreport.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Mailreport.vue?vue&type=template&id=927c884e&scoped=true\"\nimport script from \"./Mailreport.vue?vue&type=script&lang=js\"\nexport * from \"./Mailreport.vue?vue&type=script&lang=js\"\nimport style0 from \"./Mailreport.vue?vue&type=style&index=0&id=927c884e&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"927c884e\",\n  null\n  \n)\n\nexport default component.exports","<template>\n    <app-screen>\n        <waiter ref=\"waiter\" :show=\"loading\">\n            <action-table\n                :name=\"'newsletters'\"\n                ref=\"table\"\n                table-type=\"server\"\n                :columns=\"columns\"\n                :options=\"options\"\n                @row-click=\"showReport\"\n                class=\"newsletters-table\"\n            >\n                <!--Actions-->\n                <template #actions=\"props\">\n                    <action-group>\n                        <action-button\n                            @action=\"load()\"\n                            title=\"Refresh\"\n                            :icon=\"$icons.reload\"\n                        >\n                        </action-button>\n                    </action-group>\n                </template>\n                <template #col-action=\"{row}\">\n                    <action-group @click.stop=\"void 0\">\n                        <action-button\n                            v-if=\"row.rn_status === 'new'\"\n                            @action=\"terminate([row])\"\n                            title=\"Terminate\"\n                            :icon=\"$icons.terminate\"\n                        >\n                        </action-button>\n                    </action-group>\n                </template>\n                <template #contextmenu=\"{rows}\">\n                    <x-context-menu-item\n                        @click=\"terminate(rows)\"\n                        :icon=\"$icons.terminate\"\n                    >\n                        Terminate\n                    </x-context-menu-item>\n                </template>\n                <!--Columns-->\n                <template #rn_date_created=\"{row}\">\n                    {{ formatDate(row.rn_date_created) }}\n                </template>\n                <template #rn_date_scheduled=\"{row}\">\n                    {{ formatDate(row.rn_date_scheduled) }}\n                </template>\n                <template #rn_date_done=\"{row}\">\n                    {{ formatDate(row.rn_date_done) }}\n                </template>\n            </action-table>\n        </waiter>\n        <mailreport ref=\"report\"></mailreport>\n    </app-screen>\n</template>\n\n<script>\nimport newsletters from \"@/services/api/newsletters\";\nimport Mailreport from \"@/views/newsletters/parties/Mailreport\";\nimport dayjs from \"dayjs\";\nimport isEmpty from \"@modules/isEmpty\";\n\nexport default {\n    name: \"NewslettersTable\",\n    components: { Mailreport },\n    props: {},\n    data: function() {\n        return {\n            loading:false,\n\n            columns: [\n                //'col-check',\n                \"rn_id\",\n                \"usergroup.ug_name\",\n                \"rn_subject\",\n                \"rn_status\",\n                \"rn_date_created\",\n                \"rn_date_scheduled\",\n                \"rn_date_done\",\n                \"col-action\"\n            ],\n            options: {\n                useFilterSearchQuery: true,\n                useFilterByColumn: true,\n                filterableColumns: [\n                    \"rn_id\",\n                    \"usergroup.ug_name\",\n                    \"rn_status\",\n                    \"rn_subject\"\n                ],\n                listColumns: {\n                    rn_status: [\n                        {\n                            id: \"new\",\n                            text: \"new\"\n                        },\n                        {\n                            id: \"done\",\n                            text: \"done\"\n                        },\n                        {\n                            id: \"error\",\n                            text: \"error\"\n                        },\n                        {\n                            id: \"terminated\",\n                            text: \"terminated\"\n                        }\n                    ]\n                },\n                headings: {\n                    rn_id: \"ID\",\n                    \"usergroup.ug_name\": \"User group\",\n                    rn_subject: \"Subject\",\n                    rn_status: \"Status\",\n                    rn_date_created: \"Created\",\n                    rn_date_scheduled: \"Scheduled\",\n                    rn_date_done: \"Done\"\n                },\n                orderBy: {\n                    ascending: false,\n                    column: \"rn_date_scheduled\"\n                },\n\n                requestFunction: this.requestFunction,\n                sortable: [\n                    \"rn_id\",\n                    \"rn_subject\",\n                    \"rn_status\",\n                    \"rn_date_created\",\n                    \"rn_date_scheduled\",\n                    \"rn_date_done\"\n                ],\n                uniqueKey: \"rn_id\"\n            }\n        };\n    },\n    mounted() {\n        this.load();\n    },\n    methods: {\n        load() {\n            this.$refs.table.refresh();\n        },\n        async requestFunction(params) {\n            this.loading = true;\n            let data = await newsletters.getNewsletters(params);\n            this.loading = false;\n            return data;\n        },\n        showReport(e) {\n            this.$refs.report.show(e.row.rn_id);\n        },\n        async terminate(rows) {\n            let event = await this.$dialogs.confirmDelete({\n                title: \"Terminate newsletter\",\n                message: `Are you sure want to terminate newsletter \"${rows[0][\"rn_subject\"]}\" (${rows[0][\"rn_id\"]})?`\n            });\n            if (event.trigger !== \"ok\") return;\n            await newsletters.terminate({ rn_id: rows.map(i => i.rn_id) });\n            await this.load();\n        },\n        formatDate(str) {\n            if (isEmpty(str)) return null\n            return dayjs(str).format(\"YYYY-MM-DD HH:mm\");\n        }\n    }\n};\n</script>\n\n<style lang=\"scss\">\n.newsletters-table {\n    .VueTables__table {\n        table-layout: fixed;\n    }\n\n    tbody tr:not(.VueTables__filters-row) {\n        td:not(.action-table__col-action) {\n            text-overflow: ellipsis;\n            overflow: hidden;\n            white-space: nowrap;\n        }\n    }\n\n    //column sizes\n    thead tr:first-child {\n        .col-rn_id {\n            width: 86px;\n        }\n\n        .col-usergroup\\.ug_name {\n            width: 180px;\n        }\n\n        .col-rn_subject {\n            min-width: 100px; //width: 45px;\n        }\n\n        .col-rn_status {\n            width: 90px;\n        }\n\n        .col-rn_date_created,\n        .col-rn_date_scheduled,\n        .col-rn_date_done {\n            width: 190px;\n        }\n    }\n\n    &__search {\n        min-width: 250px;\n    }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewslettersTable.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewslettersTable.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./NewslettersTable.vue?vue&type=template&id=3c8bb07e\"\nimport script from \"./NewslettersTable.vue?vue&type=script&lang=js\"\nexport * from \"./NewslettersTable.vue?vue&type=script&lang=js\"\nimport style0 from \"./NewslettersTable.vue?vue&type=style&index=0&id=3c8bb07e&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewslettersTable.vue?vue&type=style&index=0&id=3c8bb07e&prod&lang=scss\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Mailreport.vue?vue&type=style&index=0&id=927c884e&prod&lang=scss&scoped=true\""],"sourceRoot":""}