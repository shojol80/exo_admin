(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6596e346"],{"0022":function(e,t,r){"use strict";t["a"]={methods:{selectByRoute:function(e){var t=this;this.$nextTick((function(){var r=t.$refs.xtree.tree;if(!(r.selected().length>0)){var o=r.find({id:+t.$route.params[e.id]});o&&0!==o.length||(o=r.find({id:+t.$route.query[e.parent]})),o&&0!==o.length||(o=r.find({id:"0"})),o&&o.length>0&&t.$refs.xtree.selectAndExpand(o[0])}}))}}}},"4cb8":function(e,t,r){"use strict";var o=r("2c67");t["a"]={deleteGroup:function(e,t){return o["a"].post.apply(o["a"],["/groups/deleteGroup"].concat(Array.prototype.slice.call(arguments)))},getGroup:function(e,t){return o["a"].post.apply(o["a"],["/groups/getGroup"].concat(Array.prototype.slice.call(arguments)))},saveGroup:function(e,t){return o["a"].post.apply(o["a"],["/groups/saveGroup"].concat(Array.prototype.slice.call(arguments)))},getGroupTree:function(e,t){return o["a"].post.apply(o["a"],["/groups/getGroupTree"].concat(Array.prototype.slice.call(arguments)))},removeRelation:function(e,t){return o["a"].post.apply(o["a"],["/groups/removeRelation"].concat(Array.prototype.slice.call(arguments)))},addRelation:function(e,t){return o["a"].post.apply(o["a"],["/groups/addRelation"].concat(Array.prototype.slice.call(arguments)))}}},"6b7d":function(e,t,r){"use strict";t["a"]={computed:{showGroupTree:function(){return!("POPUP"===this.$store.getters["app/screenMode"]&&this.$route.meta.hideTreeInPopup)}}}},a033:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e._self._c;return t("app-screen",{scopedSlots:e._u([e.showGroupTree?{key:"aside",fn:function(){return[t("form-group-tree",{staticClass:"mt-3"})]},proxy:!0}:null],null,!0)})},n=[],a=function(){var e=this,t=e._self._c;return t("waiter",{ref:"waiter"},[t("x-tree",{ref:"xtree",attrs:{data:e.groupsTree,options:e.treeOptions},on:{add:e.onAdd,edit:e.onEdit,delete:e.onDelete,click:e.onClick}})],1)},p=[],u=r("4cb8"),i=r("b991"),s=r("0022"),c={name:"FormGroupTree",mixins:[s["a"]],data:function(){return{group_type:"form",groupsTree:[],treeOptions:{customNodeEdit:!0,propertyNames:{text:"group_name",children:"children",id:"group_id"}}}},watch:{$route:function(e,t){this.selectByRoute({id:"group_id",parent:"group_parent"})}},mounted:function(){this.loadTree(),exoEventBus.$on("exo-api-call:groups/saveGroup",this.loadTree)},methods:{loadTree:function(){var e=this;u["a"].getGroupTree({group_type:this.group_type}).then((function(t){e.groupsTree=[{group_name:"All Forms",children:t,group_id:"0",state:{selected:!1,selectable:!0,checked:!1,expanded:!0,indeterminate:!1,matched:!1,editable:!1,deleteble:!1,append:!0,dragging:!1,draggable:!1,dropable:!0},data:{type:"root"}}]})).then((function(){e.selectByRoute({id:"group_id",parent:"group_parent"})}))},onAdd:function(e){e.select(),this.$router.push({name:i["p"],params:{group_id:"new"},query:{group_parent:e.id}})},onEdit:function(e){e.select(),this.$router.push({name:i["p"],params:{group_id:e.id}})},onDelete:function(e){var t=this;this.$dialogs.confirmDelete({title:"Delete Node",message:'Are you sure want to delete group "'.concat(e.data.text,'"?')}).then((function(r){"ok"===r.trigger&&(t.$route.params.group_id===e.id&&t.$router.push({name:i["r"],params:{group_id:e.parent.id}}),t.$refs.waiter.wait(u["a"].deleteGroup({group_id:e.id,group_type:t.group_type}).then(t.loadTree)))}))},onClick:function(e){this.$router.push({name:i["r"],params:{group_id:e.id,form_id:""}})}}},l=c,d=r("2877"),g=Object(d["a"])(l,a,p,!1,null,"32435848",null),f=g.exports,h=r("6b7d"),m={name:"Forms",mixins:[h["a"]],components:{FormGroupTree:f}},y=m,_=Object(d["a"])(y,o,n,!1,null,"eb54889e",null);t["default"]=_.exports}}]);
//# sourceMappingURL=chunk-6596e346.bd22e3e7.js.map