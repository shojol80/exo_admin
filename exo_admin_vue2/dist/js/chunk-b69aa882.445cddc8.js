(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b69aa882"],{"383a":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t._self._c;return e("app-screen",[e("waiter",{ref:"tableWaiter",attrs:{show:t.loading}},[e("action-table",{ref:"table",staticClass:"schedule-table",attrs:{name:"Schedules","table-type":"server",columns:t.columns,options:t.options},scopedSlots:t._u([{key:"actions",fn:function(n){return[e("action-group",[e("action-button",{attrs:{title:"New schedule",icon:t.$icons.new},on:{action:function(e){return t.onActionNew()}}}),e("action-button",{directives:[{name:"show",rawName:"v-show",value:n.rows&&1===n.rows.length,expression:"props.rows && props.rows.length === 1"}],attrs:{title:"Edit schedule",icon:t.$icons.edit},on:{action:function(e){return t.onActionEdit(n.rows)}}}),e("action-button",{directives:[{name:"show",rawName:"v-show",value:n.rows&&n.rows.length>0,expression:"props.rows && props.rows.length > 0"}],attrs:{title:"Inactivate schedule",icon:"pause"},on:{action:function(e){return t.onActionInactivate(n.rows)}}}),e("action-button",{directives:[{name:"show",rawName:"v-show",value:n.rows&&n.rows.length>0,expression:"props.rows && props.rows.length > 0"}],attrs:{title:"Activate schedule",icon:"play"},on:{action:function(e){return t.onActionActivate(n.rows)}}}),e("action-button",{directives:[{name:"show",rawName:"v-show",value:n.rows&&n.rows.length>0,expression:"props.rows && props.rows.length > 0"}],attrs:{title:"Delete schedule",icon:"delete"},on:{action:function(e){return t.onActionDelete(n.rows)}}}),e("action-group-separator"),e("action-button",{attrs:{title:"Refresh",icon:t.$icons.reload},on:{action:function(e){return t.load()}}})],1),e("action-group",{staticClass:"ml-auto mr-4"},[e("action-text",[t._v("\n                        All schedules will be executed in the timezone:\n                        "),e("span",{staticClass:"text-danger"},[t._v(t._s(t.timezone))])])],1)]}},{key:"col-action",fn:function(n){return[e("action-group",{on:{click:function(t){t.stopPropagation()}}},[e("action-button",{attrs:{title:"Edit schedule",icon:t.$icons.edit},on:{action:function(e){return t.onActionEdit([n.row])}}}),1===+n.row.status?e("action-button",{attrs:{title:"Inactivate",icon:"pause"},on:{action:function(e){return t.onActionInactivate([n.row])}}}):e("action-button",{attrs:{title:"Activate",icon:"play"},on:{action:function(e){return t.onActionActivate([n.row])}}}),e("action-button",{attrs:{title:"Delete",icon:"delete"},on:{action:function(e){return t.onActionDelete([n.row])}}})],1)]}},{key:"contextmenu",fn:function(n){return[e("x-context-menu-item",{directives:[{name:"show",rawName:"v-show",value:n.rows&&1===n.rows.length,expression:"props.rows && props.rows.length === 1"}],attrs:{icon:t.$icons.edit},on:{click:function(e){return t.onActionEdit(n.rows)}}},[t._v("\n                    Edit\n                ")]),e("x-context-menu-item",{directives:[{name:"show",rawName:"v-show",value:n.rows&&1===n.rows.length&&"1"===n.rows[0].status,expression:"\n                        props.rows &&\n                            props.rows.length === 1 &&\n                            props.rows[0].status === '1'\n                    "}],attrs:{icon:"pause"},on:{click:function(e){return t.onActionInactivate(n.rows)}}},[t._v("\n                    Inactivate\n                ")]),e("x-context-menu-item",{directives:[{name:"show",rawName:"v-show",value:n.rows&&1===n.rows.length&&"0"===n.rows[0].status,expression:"\n                        props.rows &&\n                            props.rows.length === 1 &&\n                            props.rows[0].status === '0'\n                    "}],attrs:{icon:"play"},on:{click:function(e){return t.onActionActivate(n.rows)}}},[t._v("\n                    Activate\n                ")]),e("x-context-menu-item",{directives:[{name:"show",rawName:"v-show",value:n.rows&&n.rows.length>0,expression:"props.rows && props.rows.length > 0"}],attrs:{icon:"delete"},on:{click:function(e){return t.onActionDelete(n.rows)}}},[t._v("\n                    Delete\n                ")])]}},{key:"status",fn:function(n){var o=n.row;return["1"===o.status?e("span",{staticClass:"badge badge-success"},[t._v("Active\n                ")]):e("span",{staticClass:"badge badge-secondary"},[t._v("Inactive ")])]}},{key:"params",fn:function(n){var o=n.row;return[e("div",{staticClass:"text-truncate"},[t._v("\n                    "+t._s(t.formatParams(o.params))+"\n                ")])]}},{key:"options",fn:function(n){var o=n.row;return[e("div",{staticClass:"text-truncate"},[t._v("\n                    "+t._s(t.formatOptions(o.options))+"\n                ")])]}},{key:"created_at",fn:function(e){var n=e.row;return[t._v("\n                "+t._s(t.formatDate(n.created_at))+"\n            ")]}},{key:"updated_at",fn:function(e){var n=e.row;return[t._v("\n                "+t._s(t.formatDate(n.updated_at))+"\n            ")]}}])})],1)],1)},r=[],a=(n("ac6a"),n("cadf"),n("456d"),n("96cf"),n("3b8d")),s=n("7c8b"),c=n("e74a"),i=n("5a0c"),u=n.n(i),l={name:"SchedulesTable",data:function(){return{loading:!1,columns:["col-check","id","command","params","options","expression","status","created_at","updated_at","col-action"],options:{requestFunction:this.requestFunction,useFilterSearchQuery:!0,useFilterByColumn:!0,filterableColumns:["id","command","expression","status"],listColumns:{status:[{id:"1",text:"Active"},{id:"0",text:"Inactive"}]},sortable:["id","command","expression","status","created_at","updated_at"],uniqueKey:"id",headings:{id:"ID",command:"Command",params:"Arguments",options:"Options",expression:"Cron Expression",created_at:"Created At",updated_at:"Updated At",status:"Status"}}}},computed:{dayjs:function(){return u.a},timezone:function(){return _.get(this.$store,"state.exolog.app.database-schedule.timezone")}},mounted:function(){},activated:function(){this.load()},methods:{requestFunction:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=1,c["a"].getSchedules(e);case 1:return n=t.sent,this.loading=!1,t.abrupt("return",n);case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),load:function(){this.$refs.table.refresh()},onActionNew:function(){this.$router.push({name:s["B"],params:{schedule_id:"new"}})},onActionInactivate:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=1,c["a"].inactivate({id:e.map((function(t){return t["id"]}))});case 1:return t.next=2,this.load();case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),onActionActivate:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=1,c["a"].activate({id:e.map((function(t){return t["id"]}))});case 1:return t.next=2,this.load();case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),onActionEdit:function(t){this.$router.push({name:s["B"],params:{schedule_id:t[0]["id"]}})},onActionDelete:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=1===e.length?"Are you sure want to delete schedule <b>".concat(e[0]["command"],"</b>?"):'Are you sure want to delete "'.concat(e.length,'" schedules?'),t.next=1,this.$dialogs.confirmDelete({title:"Delete schedule",message:n});case 1:if(o=t.sent.trigger,"ok"===o){t.next=2;break}return t.abrupt("return");case 2:return t.next=3,c["a"].deleteSchedule({id:e.map((function(t){return t["id"]}))});case 3:return t.next=4,this.load();case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),onRowClick:function(t){},formatDate:function(t){return u()(t).utc().format("YYYY-MM-DD HH:mm")},formatParams:function(t){return Object.keys(t).reduce((function(e,n){return e.push("".concat(n,"=").concat(t[n].value)),e}),[]).join(", ")},formatOptions:function(t){return Object.keys(t).reduce((function(e,n){return _.isObject(t[n])?e.push("--".concat(n,"=").concat(t[n].value)):e.push("--".concat(n)),e}),[]).join(" ")}}},p=l,d=(n("534f"),n("2877")),h=Object(d["a"])(p,o,r,!1,null,null,null);e["default"]=h.exports},"534f":function(t,e,n){"use strict";n("bf56")},bf56:function(t,e,n){},e74a:function(t,e,n){"use strict";var o=n("2c67");e["a"]={getSchedules:function(t,e){return o["a"].post.apply(o["a"],["/schedule/getSchedules"].concat(Array.prototype.slice.call(arguments)))},saveSchedule:function(t,e){return o["a"].post.apply(o["a"],["/schedule/saveSchedule"].concat(Array.prototype.slice.call(arguments)))},inactivate:function(t,e){return o["a"].post.apply(o["a"],["/schedule/inactivate"].concat(Array.prototype.slice.call(arguments)))},activate:function(t,e){return o["a"].post.apply(o["a"],["/schedule/activate"].concat(Array.prototype.slice.call(arguments)))},deleteSchedule:function(t,e){return o["a"].post.apply(o["a"],["/schedule/deleteSchedule"].concat(Array.prototype.slice.call(arguments)))},getSchedule:function(t,e){return o["a"].post.apply(o["a"],["/schedule/getSchedule"].concat(Array.prototype.slice.call(arguments)))},commands:function(t,e){return o["a"].post.apply(o["a"],["/schedule/commands"].concat(Array.prototype.slice.call(arguments)))}}}}]);
//# sourceMappingURL=chunk-b69aa882.445cddc8.js.map